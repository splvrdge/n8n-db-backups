SET session_replication_role = replica;

--
-- PostgreSQL database dump
--

-- \restrict qMHZrBhY2v9N53J2tJTekuuSlHw8qoWfUh7z2Ggi6QEteFLrUvsFhCXsIZtLq4S

-- Dumped from database version 17.6
-- Dumped by pg_dump version 17.6

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Data for Name: audit_log_entries; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY "auth"."audit_log_entries" ("instance_id", "id", "payload", "created_at", "ip_address") FROM stdin;
\.


--
-- Data for Name: flow_state; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY "auth"."flow_state" ("id", "user_id", "auth_code", "code_challenge_method", "code_challenge", "provider_type", "provider_access_token", "provider_refresh_token", "created_at", "updated_at", "authentication_method", "auth_code_issued_at") FROM stdin;
\.


--
-- Data for Name: users; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY "auth"."users" ("instance_id", "id", "aud", "role", "email", "encrypted_password", "email_confirmed_at", "invited_at", "confirmation_token", "confirmation_sent_at", "recovery_token", "recovery_sent_at", "email_change_token_new", "email_change", "email_change_sent_at", "last_sign_in_at", "raw_app_meta_data", "raw_user_meta_data", "is_super_admin", "created_at", "updated_at", "phone", "phone_confirmed_at", "phone_change", "phone_change_token", "phone_change_sent_at", "email_change_token_current", "email_change_confirm_status", "banned_until", "reauthentication_token", "reauthentication_sent_at", "is_sso_user", "deleted_at", "is_anonymous") FROM stdin;
\.


--
-- Data for Name: identities; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY "auth"."identities" ("provider_id", "user_id", "identity_data", "provider", "last_sign_in_at", "created_at", "updated_at", "id") FROM stdin;
\.


--
-- Data for Name: instances; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY "auth"."instances" ("id", "uuid", "raw_base_config", "created_at", "updated_at") FROM stdin;
\.


--
-- Data for Name: oauth_clients; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY "auth"."oauth_clients" ("id", "client_secret_hash", "registration_type", "redirect_uris", "grant_types", "client_name", "client_uri", "logo_uri", "created_at", "updated_at", "deleted_at", "client_type") FROM stdin;
\.


--
-- Data for Name: sessions; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY "auth"."sessions" ("id", "user_id", "created_at", "updated_at", "factor_id", "aal", "not_after", "refreshed_at", "user_agent", "ip", "tag", "oauth_client_id", "refresh_token_hmac_key", "refresh_token_counter") FROM stdin;
\.


--
-- Data for Name: mfa_amr_claims; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY "auth"."mfa_amr_claims" ("session_id", "created_at", "updated_at", "authentication_method", "id") FROM stdin;
\.


--
-- Data for Name: mfa_factors; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY "auth"."mfa_factors" ("id", "user_id", "friendly_name", "factor_type", "status", "created_at", "updated_at", "secret", "phone", "last_challenged_at", "web_authn_credential", "web_authn_aaguid", "last_webauthn_challenge_data") FROM stdin;
\.


--
-- Data for Name: mfa_challenges; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY "auth"."mfa_challenges" ("id", "factor_id", "created_at", "verified_at", "ip_address", "otp_code", "web_authn_session_data") FROM stdin;
\.


--
-- Data for Name: oauth_authorizations; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY "auth"."oauth_authorizations" ("id", "authorization_id", "client_id", "user_id", "redirect_uri", "scope", "state", "resource", "code_challenge", "code_challenge_method", "response_type", "status", "authorization_code", "created_at", "expires_at", "approved_at") FROM stdin;
\.


--
-- Data for Name: oauth_consents; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY "auth"."oauth_consents" ("id", "user_id", "client_id", "scopes", "granted_at", "revoked_at") FROM stdin;
\.


--
-- Data for Name: one_time_tokens; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY "auth"."one_time_tokens" ("id", "user_id", "token_type", "token_hash", "relates_to", "created_at", "updated_at") FROM stdin;
\.


--
-- Data for Name: refresh_tokens; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY "auth"."refresh_tokens" ("instance_id", "id", "token", "user_id", "revoked", "created_at", "updated_at", "parent", "session_id") FROM stdin;
\.


--
-- Data for Name: sso_providers; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY "auth"."sso_providers" ("id", "resource_id", "created_at", "updated_at", "disabled") FROM stdin;
\.


--
-- Data for Name: saml_providers; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY "auth"."saml_providers" ("id", "sso_provider_id", "entity_id", "metadata_xml", "metadata_url", "attribute_mapping", "created_at", "updated_at", "name_id_format") FROM stdin;
\.


--
-- Data for Name: saml_relay_states; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY "auth"."saml_relay_states" ("id", "sso_provider_id", "request_id", "for_email", "redirect_to", "created_at", "updated_at", "flow_state_id") FROM stdin;
\.


--
-- Data for Name: sso_domains; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY "auth"."sso_domains" ("id", "sso_provider_id", "domain", "created_at", "updated_at") FROM stdin;
\.


--
-- Data for Name: annotation_tag_entity; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."annotation_tag_entity" ("id", "name", "createdAt", "updatedAt") FROM stdin;
\.


--
-- Data for Name: role; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."role" ("slug", "displayName", "description", "roleType", "systemRole", "createdAt", "updatedAt") FROM stdin;
global:owner	Owner	Owner	global	t	2025-11-11 02:22:43.476+00	2025-11-11 02:23:01.755+00
global:admin	Admin	Admin	global	t	2025-11-11 02:22:43.476+00	2025-11-11 02:23:01.755+00
global:member	Member	Member	global	t	2025-11-11 02:22:43.476+00	2025-11-11 02:23:01.755+00
project:admin	Project Admin	Full control of settings, members, workflows, credentials and executions	project	t	2025-11-11 02:22:43.476+00	2025-11-11 02:23:03.099+00
project:personalOwner	Project Owner	Project Owner	project	t	2025-11-11 02:22:43.476+00	2025-11-11 02:23:03.099+00
project:editor	Project Editor	Create, edit, and delete workflows, credentials, and executions	project	t	2025-11-11 02:22:43.476+00	2025-11-11 02:23:03.099+00
project:viewer	Project Viewer	Read-only access to workflows, credentials, and executions	project	t	2025-11-11 02:22:43.476+00	2025-11-11 02:23:03.099+00
credential:owner	Credential Owner	Credential Owner	credential	t	2025-11-11 02:23:04.317+00	2025-11-11 02:23:04.317+00
credential:user	Credential User	Credential User	credential	t	2025-11-11 02:23:04.317+00	2025-11-11 02:23:04.317+00
workflow:owner	Workflow Owner	Workflow Owner	workflow	t	2025-11-11 02:23:05.167+00	2025-11-11 02:23:05.167+00
workflow:editor	Workflow Editor	Workflow Editor	workflow	t	2025-11-11 02:23:05.167+00	2025-11-11 02:23:05.167+00
\.


--
-- Data for Name: user; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."user" ("id", "email", "firstName", "lastName", "password", "personalizationAnswers", "createdAt", "updatedAt", "settings", "disabled", "mfaEnabled", "mfaSecret", "mfaRecoveryCodes", "lastActiveAt", "roleSlug") FROM stdin;
0936ff70-3fd3-4423-863d-b5b2a98d70bf	lagang.francisjames@gmail.com	Francis James	Lagang	$2a$10$78D4TzyNIk/4NVPgR7ORmOzCKtjuC8psOeSltnM2FsEQ6BXFM6FFS	{"version":"v4","personalization_survey_submitted_at":"2025-11-11T02:26:26.361Z","personalization_survey_n8n_version":"1.118.2","automationGoalDevops":["incident-response","ticketing-systems-integrations","reporting"],"companySize":"<20","companyType":"systems-integrator","role":"it","reportedSource":"youtube"}	2025-11-11 02:19:23.589+00	2025-11-11 05:01:58.866+00	{"userActivated": false}	f	f	\N	\N	2025-11-11	global:owner
\.


--
-- Data for Name: auth_identity; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."auth_identity" ("userId", "providerId", "providerType", "createdAt", "updatedAt") FROM stdin;
\.


--
-- Data for Name: auth_provider_sync_history; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."auth_provider_sync_history" ("id", "providerType", "runMode", "status", "startedAt", "endedAt", "scanned", "created", "updated", "disabled", "error") FROM stdin;
\.


--
-- Data for Name: credentials_entity; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."credentials_entity" ("name", "data", "type", "createdAt", "updatedAt", "id", "isManaged") FROM stdin;
Telegram account	U2FsdGVkX18/jDJLj2OpToS6VPJoSZluG3jgH0Ynaiaq0567tFACyhXOVed03J4jkMWcsXQ4W+iRRtVFrWKrLGDY4fto8+eyoZDwaAyOTpUIWM53ujBVbLOF/T1W+yAe	telegramApi	2025-11-11 02:56:27.455+00	2025-11-11 02:56:27.236+00	7x35n8A75QzWftQ2	f
OpenAi account	U2FsdGVkX1+sTtrDklNV/rYC5RCGhFMhQ1IoHwsFtTIBDPIwcDmJozId0Tsy7uCbYUniGElNv2pnub9ijpkltnmv/Jmvt1Sr1e27Wk8iRwn9kvasuuGtGEcg8hObEr55bH8rIZYSvWUtsvBRpEpULphVC9yhyCfLMYM+bLDYv46Yax8OMUcl6yrkEEdSrX79L1j150oc4hcOVTS3L6ZsUyBslPvpJU5cRwBrHTFZT5hyB3XJkwM5NhNgDJUjoWP4mOO2LI2b6haDPYjGGLqJyw==	openAiApi	2025-11-11 23:06:43.629+00	2025-11-11 23:06:43.419+00	p2T40GsW7EeHqQhv	f
Google Sheets account	U2FsdGVkX19HC+st8xiYaNsefvevA9MPh2cgVq3wcgWDCQJ+xGH2VE6OTkNfHYaAizRBRbKulp6okxWNWp3qHL3VuhLosU+YYEPqZeU8xoq7rMBYvDVn/nN6WmGdxC8BuXsC1jkuKIjV6oP4P4URQl44tNI/baQiUk3iX8sRRC/e4IAS7gQ2CMawYoak0DR7biF+zBpB6mRDaKf752neR+1YbEx4+Tq8hHZAGLUeDi8yZlptdGN/ac7zpEph66oXaLvWUG3jYr5N/KdnmwRHghf531XpIOkcdJbn6REjOO0KwSPPzSBEYOVJ9j104YEw+fjtqug0D78NhED7WaCuBkZhxuGdaB0KN0Pkz425JE3xKPnn83hHE4HANW7wRAz55so0Bdjl/T1do0phtACRnCbZOZF1gHPHz872IOqcbHEIJ1Z7YbTGHvaHl3Gh1y9al84pvcJZLJXscp8BvFs/oqEn8Txp2wkgyh3InJNHIi7GBOjQT8L2CYzOcAki39VJIHqLvo2OWTv3hcXFDWoeifs66CdFNA9ukOzapr6f/VinPP5Uv2hIcc0rvbGiyoOtAX/OKIOirQVE/i6rB56W44OnZvzxCtzW2sgJj6DitT7XBUrxX/bLuqddbhVDBv06AaRD35wyUY/QZ9UeUsm3j+2CY8zxGygr8ScCxdsR6VdC89WOY0+OsasfwNIloGvm/B8OIRZSJJDtRJ6S+1f+xT7Psr51Z+jMUQxldRflk1A+kXIMefliUyUVEmBnVkOtHWopezZqYRDsm70BFAD9ZQ2UPrZC4ON/eFq/bv7j2AQryjEApZeA7HcorzkZxAhA+O3gMs6x9GKzsooVz3JKa/pPAqbxG2rbAttoJI1WeFk9uFf/EyBEW95MK97KbuzQQpphd2FKGlg+uGsJCsu2dCP2tgqlOHZba6NTunoU5sQG7t5pKDt/VrN9CSfqp9oTZuUDQNQtb0HUwDFOu81bVBGUTd7AGmKn+yypCMCdgX2PkVNOByW6IoAzsya1FQ5RBKdhIkRamqd2bRmtdqxf5aPasC8GOknwupqi4DRSQkVPDob4QNa2Qn4CBcbs3ix5b01z0hgrqb05DXD8dManKhubnCMLMoLaeFVkO/uITPp6lEoV6nerP1qVd7TLpBGv4Ewnf6lYccBjjkzWtga0ns7CJPWaNK5ZUslg0IbI8ZSuJGBkbE7gbj1PItb2AlkJKB8DjJW/C9057lRSHclZ/ZNkOzB4Kxha0zSqoUCgepheCFsfcdZjSxBRaq4iPZ1O	googleSheetsOAuth2Api	2025-11-11 05:57:27.785+00	2025-11-11 23:08:33.924+00	bMdngHKZ99tCKomj	f
uClassify account	U2FsdGVkX1/AZGiB2u8nmoWuFCLR5AwRoLlFfhLvxB50y+LLWm6eKNVPoOQsTXfM4i7bVnZeKqyXLPlpdvakVq7dbAdtdbm+ogj3En86d1A=	httpHeaderAuth	2025-11-11 23:17:42.712+00	2025-11-11 23:18:01.193+00	VxZc1cjaRgBJsWRh	f
Google Gemini(PaLM) Api account	U2FsdGVkX1+MODLEA113fBJbedPx8qXIQIrq7V4CrdfjPYZsGay3pwFTZE97epNC9s7ZJy03T8ONte1WH4NzaQ==	googlePalmApi	2025-11-11 07:51:55.398+00	2025-11-11 07:51:55.183+00	zdDZCTsALNpNUjT8	f
\.


--
-- Data for Name: project; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."project" ("id", "name", "type", "createdAt", "updatedAt", "icon", "description") FROM stdin;
lo5eMUeT6xJE2ZPX	Francis James Lagang <lagang.francisjames@gmail.com>	personal	2025-11-11 02:20:36.223+00	2025-11-11 02:25:27.469+00	\N	\N
\.


--
-- Data for Name: folder; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."folder" ("id", "name", "parentFolderId", "projectId", "createdAt", "updatedAt") FROM stdin;
\.


--
-- Data for Name: workflow_entity; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."workflow_entity" ("name", "active", "nodes", "connections", "createdAt", "updatedAt", "settings", "staticData", "pinData", "versionId", "triggerCount", "id", "meta", "parentFolderId", "isArchived", "versionCounter") FROM stdin;
CrisisMapper (Nov 11 at 20:35:41)	f	[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"If"},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["callback_query"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Telegram Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If1"},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Telegram Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}]	{"If":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Telegram Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"Find User":{"main":[[{"node":"If1","type":"main","index":0}]]},"If1":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]}}	2025-11-11 12:46:53.528+00	2025-11-11 12:46:53.528+00	\N	\N	\N	49f5faca-d8a7-4f88-a12e-2d3fb9a0c95c	0	mBZxoj5g1bytRJeO	\N	\N	f	1
CrisisMapper	f	[{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-400],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[224,-400],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["callback_query"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-224],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-224],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[448,-224],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,-48],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-48],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[896,-48],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[224,-224],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-48],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[448,-48],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,144],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,144],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,144],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[672,144],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,368],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,368],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"current_step":"end_of_form","row_number":"={{ $json.row_number }}","media":"={{ $('Description and Media Trigger').item.json.message.photo \\n    ? $('Description and Media Trigger').item.json.message.photo[$('Description and Media Trigger').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}\\n","description":"={{ $('Description and Media Trigger').item.json.message.caption || $('Description and Media Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,368],"id":"ed64d4df-b84d-4265-b123-ba6a51997cc6","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}]	{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]},"Find User - Desc & Media":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]}}	2025-11-11 02:59:22.229+00	2025-11-11 23:01:45.589+00	{"executionOrder":"v1"}	\N	{}	0f3e70cb-7e6b-4f2c-aaa8-b19e97c71c3e	0	EXVIlWqfZ2MPIEOk	{"templateCredsSetupCompleted":true}	\N	f	15
\.


--
-- Data for Name: chat_hub_sessions; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."chat_hub_sessions" ("id", "title", "ownerId", "lastMessageAt", "credentialId", "provider", "model", "workflowId", "createdAt", "updatedAt") FROM stdin;
\.


--
-- Data for Name: execution_entity; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."execution_entity" ("id", "finished", "mode", "retryOf", "retrySuccessId", "startedAt", "stoppedAt", "waitTill", "status", "workflowId", "deletedAt", "createdAt") FROM stdin;
1	t	manual	\N	\N	2025-11-11 02:59:41.101+00	2025-11-11 02:59:41.394+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 02:59:39.524+00
19	f	manual	\N	\N	2025-11-11 04:45:02.292+00	2025-11-11 04:45:03.396+00	\N	error	EXVIlWqfZ2MPIEOk	\N	2025-11-11 04:45:01.528+00
38	t	manual	\N	\N	2025-11-11 07:03:44.953+00	2025-11-11 07:03:45.242+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 07:03:43.774+00
59	t	manual	\N	\N	2025-11-11 11:35:38.024+00	2025-11-11 11:35:40.032+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 11:35:36.98+00
20	f	manual	\N	\N	2025-11-11 04:45:23.708+00	2025-11-11 04:45:24.787+00	\N	error	EXVIlWqfZ2MPIEOk	\N	2025-11-11 04:45:22.715+00
2	t	manual	\N	\N	2025-11-11 03:26:21.607+00	2025-11-11 03:26:21.895+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 03:26:20.174+00
3	t	manual	\N	\N	2025-11-11 03:26:21.891+00	2025-11-11 03:26:22.176+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 03:26:20.899+00
39	t	manual	\N	\N	2025-11-11 07:05:52.545+00	2025-11-11 07:05:54.251+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 07:05:51.686+00
21	f	manual	\N	\N	2025-11-11 05:01:59.933+00	2025-11-11 05:02:00.992+00	\N	error	EXVIlWqfZ2MPIEOk	\N	2025-11-11 05:01:59.221+00
4	t	manual	\N	\N	2025-11-11 03:27:09.792+00	2025-11-11 03:27:10.079+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 03:27:08.797+00
60	t	manual	\N	\N	2025-11-11 11:41:39.561+00	2025-11-11 11:41:39.849+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 11:41:38.566+00
40	t	manual	\N	\N	2025-11-11 07:19:55.613+00	2025-11-11 07:19:58.478+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 07:19:54.308+00
5	t	manual	\N	\N	2025-11-11 03:30:58.467+00	2025-11-11 03:30:58.781+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 03:30:57.757+00
22	t	manual	\N	\N	2025-11-11 05:03:48.489+00	2025-11-11 05:03:49.815+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 05:03:47.784+00
6	f	manual	\N	\N	2025-11-11 04:01:27.001+00	2025-11-11 04:01:27.672+00	\N	error	EXVIlWqfZ2MPIEOk	\N	2025-11-11 04:01:24.883+00
61	f	manual	\N	\N	2025-11-11 11:45:04.55+00	2025-11-11 11:45:04.836+00	\N	error	EXVIlWqfZ2MPIEOk	\N	2025-11-11 11:45:03.761+00
23	t	manual	\N	\N	2025-11-11 05:06:28.972+00	2025-11-11 05:06:29.258+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 05:06:27.932+00
41	t	manual	\N	\N	2025-11-11 07:44:04.782+00	2025-11-11 07:44:05.074+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 07:44:03.891+00
7	f	manual	\N	\N	2025-11-11 04:01:51.429+00	2025-11-11 04:01:54.768+00	\N	error	EXVIlWqfZ2MPIEOk	\N	2025-11-11 04:01:50.375+00
24	t	manual	\N	\N	2025-11-11 05:07:30.888+00	2025-11-11 05:07:31.182+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 05:07:30.176+00
8	f	manual	\N	\N	2025-11-11 04:02:26.683+00	2025-11-11 04:02:27.759+00	\N	error	EXVIlWqfZ2MPIEOk	\N	2025-11-11 04:02:25.676+00
42	t	manual	\N	\N	2025-11-11 07:44:45.76+00	2025-11-11 07:44:46.046+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 07:44:44.885+00
62	t	manual	\N	\N	2025-11-11 12:00:42.342+00	2025-11-11 12:00:43.624+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 12:00:40.762+00
9	t	manual	\N	\N	2025-11-11 04:02:44.163+00	2025-11-11 04:02:44.449+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 04:02:43.144+00
25	f	manual	\N	\N	2025-11-11 05:09:55.853+00	2025-11-11 05:09:56.298+00	\N	error	EXVIlWqfZ2MPIEOk	\N	2025-11-11 05:09:55.141+00
10	t	manual	\N	\N	2025-11-11 04:02:59.507+00	2025-11-11 04:02:59.808+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 04:02:58.455+00
43	f	manual	\N	\N	2025-11-11 07:57:00.654+00	2025-11-11 07:57:02.593+00	\N	error	EXVIlWqfZ2MPIEOk	\N	2025-11-11 07:56:59.779+00
26	t	manual	\N	\N	2025-11-11 05:18:56.455+00	2025-11-11 05:18:57.727+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 05:18:55.411+00
11	t	manual	\N	\N	2025-11-11 04:03:36.035+00	2025-11-11 04:03:36.321+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 04:03:35.037+00
63	f	manual	\N	\N	2025-11-11 12:01:06.003+00	2025-11-11 12:01:06.288+00	\N	error	EXVIlWqfZ2MPIEOk	\N	2025-11-11 12:01:05.008+00
27	t	manual	\N	\N	2025-11-11 05:22:15.271+00	2025-11-11 05:22:15.558+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 05:22:14.271+00
12	f	manual	\N	\N	2025-11-11 04:05:48.44+00	2025-11-11 04:05:49.511+00	\N	error	EXVIlWqfZ2MPIEOk	\N	2025-11-11 04:05:47.388+00
44	t	manual	\N	\N	2025-11-11 08:00:36.362+00	2025-11-11 08:00:37.687+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 08:00:35.221+00
28	t	manual	\N	\N	2025-11-11 05:25:34.935+00	2025-11-11 05:25:36.299+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 05:25:34.208+00
64	t	manual	\N	\N	2025-11-11 12:06:56.08+00	2025-11-11 12:06:57.369+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 12:06:55.077+00
45	t	manual	\N	\N	2025-11-11 08:01:13.488+00	2025-11-11 08:01:13.775+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 08:01:12.345+00
29	t	manual	\N	\N	2025-11-11 06:17:18.846+00	2025-11-11 06:17:22.788+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 06:17:17.649+00
13	t	manual	\N	\N	2025-11-11 04:36:33.334+00	2025-11-11 04:36:33.653+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 04:36:30.732+00
14	t	manual	\N	\N	2025-11-11 04:36:33.362+00	2025-11-11 04:36:33.904+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 04:36:31.775+00
15	t	manual	\N	\N	2025-11-11 04:36:33.927+00	2025-11-11 04:36:34.918+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 04:36:32.652+00
46	t	manual	\N	\N	2025-11-11 08:01:44.126+00	2025-11-11 08:01:44.415+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 08:01:43.273+00
30	t	manual	\N	\N	2025-11-11 06:19:33.202+00	2025-11-11 06:19:33.487+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 06:19:32.199+00
16	t	manual	\N	\N	2025-11-11 04:37:39.842+00	2025-11-11 04:37:40.128+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 04:37:38.848+00
65	t	manual	\N	\N	2025-11-11 12:07:32.857+00	2025-11-11 12:07:33.145+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 12:07:31.848+00
17	f	manual	\N	\N	2025-11-11 04:40:38.5+00	2025-11-11 04:40:40.401+00	\N	error	EXVIlWqfZ2MPIEOk	\N	2025-11-11 04:40:37.787+00
31	t	manual	\N	\N	2025-11-11 06:23:38.456+00	2025-11-11 06:23:40.194+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 06:23:37.7+00
47	t	manual	\N	\N	2025-11-11 08:01:54.946+00	2025-11-11 08:01:56.34+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 08:01:54.092+00
18	f	manual	\N	\N	2025-11-11 04:41:58.593+00	2025-11-11 04:41:59.665+00	\N	error	EXVIlWqfZ2MPIEOk	\N	2025-11-11 04:41:57.558+00
66	t	manual	\N	\N	2025-11-11 12:16:01.337+00	2025-11-11 12:16:02.66+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 12:16:00.6+00
32	t	manual	\N	\N	2025-11-11 06:29:17.659+00	2025-11-11 06:29:19.68+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 06:29:16.805+00
48	t	manual	\N	\N	2025-11-11 08:02:16.651+00	2025-11-11 08:02:20.742+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 08:02:15.8+00
33	t	manual	\N	\N	2025-11-11 06:38:57.997+00	2025-11-11 06:38:59.555+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 06:38:57.009+00
67	t	manual	\N	\N	2025-11-11 12:21:00.108+00	2025-11-11 12:21:03.209+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 12:20:59.385+00
49	t	manual	\N	\N	2025-11-11 08:05:37.802+00	2025-11-11 08:05:42.038+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 08:05:36.93+00
34	t	manual	\N	\N	2025-11-11 06:41:27.913+00	2025-11-11 06:41:28.2+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 06:41:26.771+00
35	t	manual	\N	\N	2025-11-11 06:44:27.803+00	2025-11-11 06:44:29.446+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 06:44:26.952+00
50	t	manual	\N	\N	2025-11-11 08:06:02.729+00	2025-11-11 08:06:06.469+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 08:06:01.872+00
68	t	manual	\N	\N	2025-11-11 12:23:31.199+00	2025-11-11 12:23:31.486+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 12:23:30.142+00
36	t	manual	\N	\N	2025-11-11 06:45:56.087+00	2025-11-11 06:45:58.504+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 06:45:55.214+00
51	t	manual	\N	\N	2025-11-11 08:06:36.65+00	2025-11-11 08:06:38.073+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 08:06:35.504+00
37	t	manual	\N	\N	2025-11-11 06:53:10.262+00	2025-11-11 06:53:11.557+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 06:53:09.407+00
69	t	manual	\N	\N	2025-11-11 12:25:50.715+00	2025-11-11 12:25:51.987+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 12:25:49.993+00
52	t	manual	\N	\N	2025-11-11 08:07:54.397+00	2025-11-11 08:07:59.573+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 08:07:53.263+00
70	t	manual	\N	\N	2025-11-11 12:26:51.816+00	2025-11-11 12:26:52.107+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 12:26:51.102+00
53	t	manual	\N	\N	2025-11-11 08:08:32.99+00	2025-11-11 08:08:37.147+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 08:08:32.139+00
54	t	manual	\N	\N	2025-11-11 08:09:00.865+00	2025-11-11 08:09:02.299+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 08:08:59.726+00
71	t	manual	\N	\N	2025-11-11 12:28:29.139+00	2025-11-11 12:28:31.251+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 12:28:28.284+00
55	f	manual	\N	\N	2025-11-11 10:58:32.252+00	2025-11-11 10:58:32.693+00	\N	error	EXVIlWqfZ2MPIEOk	\N	2025-11-11 10:58:30.657+00
72	t	manual	\N	\N	2025-11-11 12:35:17.849+00	2025-11-11 12:35:19.202+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 12:35:16.974+00
56	t	manual	\N	\N	2025-11-11 10:58:55.944+00	2025-11-11 10:58:56.228+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 10:58:54.959+00
73	t	manual	\N	\N	2025-11-11 12:48:36.766+00	2025-11-11 12:48:38.052+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 12:48:35.622+00
57	t	manual	\N	\N	2025-11-11 11:03:15.247+00	2025-11-11 11:03:15.533+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 11:03:14.255+00
58	t	manual	\N	\N	2025-11-11 11:04:36.902+00	2025-11-11 11:04:38.192+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 11:04:36.157+00
74	t	manual	\N	\N	2025-11-11 12:49:06.686+00	2025-11-11 12:49:10.877+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 12:49:05.547+00
75	t	manual	\N	\N	2025-11-11 12:49:51.126+00	2025-11-11 12:49:55.277+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 12:49:49.988+00
81	t	manual	\N	\N	2025-11-11 13:08:33.344+00	2025-11-11 13:08:36.17+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 13:08:32.489+00
77	t	manual	\N	\N	2025-11-11 12:56:39.02+00	2025-11-11 12:56:39.307+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 12:56:37.832+00
78	f	manual	\N	\N	2025-11-11 12:56:52.181+00	2025-11-11 12:56:54.294+00	\N	error	EXVIlWqfZ2MPIEOk	\N	2025-11-11 12:56:51.327+00
83	t	manual	\N	\N	2025-11-11 13:34:32.877+00	2025-11-11 13:34:33.164+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 13:34:31.735+00
80	t	manual	\N	\N	2025-11-11 13:03:04.224+00	2025-11-11 13:03:06.283+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 13:03:02.933+00
84	t	manual	\N	\N	2025-11-11 13:34:34.726+00	2025-11-11 13:34:35.011+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 13:34:33.445+00
88	t	manual	\N	\N	2025-11-11 23:08:32.344+00	2025-11-11 23:08:35.109+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 23:08:30.604+00
89	t	manual	\N	\N	2025-11-11 23:08:54.119+00	2025-11-11 23:08:54.407+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 23:08:53.264+00
90	t	manual	\N	\N	2025-11-11 23:09:05.63+00	2025-11-11 23:09:05.916+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 23:09:04.773+00
91	t	manual	\N	\N	2025-11-11 23:09:58.282+00	2025-11-11 23:09:59.72+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 23:09:57.142+00
93	t	manual	\N	\N	2025-11-11 23:11:03.722+00	2025-11-11 23:11:07.279+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 23:11:02.578+00
94	t	manual	\N	\N	2025-11-11 23:11:18.714+00	2025-11-11 23:11:22.292+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 23:11:17.57+00
76	t	manual	\N	\N	2025-11-11 12:54:35.555+00	2025-11-11 12:54:36.894+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 12:54:34.672+00
82	t	manual	\N	\N	2025-11-11 13:30:56.469+00	2025-11-11 13:30:56.753+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 13:30:55.317+00
79	t	manual	\N	\N	2025-11-11 12:58:45.601+00	2025-11-11 12:58:46.924+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 12:58:44.748+00
85	t	manual	\N	\N	2025-11-11 13:38:43.976+00	2025-11-11 13:38:45.285+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 13:38:43.074+00
86	t	manual	\N	\N	2025-11-11 13:45:15.807+00	2025-11-11 13:45:18.971+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 13:45:14.952+00
87	t	manual	\N	\N	2025-11-11 13:51:45.112+00	2025-11-11 13:51:46.101+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 13:51:43.438+00
92	t	manual	\N	\N	2025-11-11 23:10:30.734+00	2025-11-11 23:10:34.562+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 23:10:29.593+00
95	f	manual	\N	\N	2025-11-11 23:11:39.854+00	2025-11-11 23:11:48.077+00	\N	error	EXVIlWqfZ2MPIEOk	\N	2025-11-11 23:11:38.716+00
96	f	manual	\N	\N	2025-11-11 23:24:02.922+00	2025-11-11 23:24:04.497+00	\N	error	EXVIlWqfZ2MPIEOk	\N	2025-11-11 23:24:02.001+00
97	f	manual	\N	\N	2025-11-11 23:25:53.114+00	2025-11-11 23:25:53.687+00	\N	error	EXVIlWqfZ2MPIEOk	\N	2025-11-11 23:25:52.258+00
98	t	manual	\N	\N	2025-11-11 23:27:37.84+00	2025-11-11 23:27:38.46+00	\N	success	EXVIlWqfZ2MPIEOk	\N	2025-11-11 23:27:36.984+00
\.


--
-- Data for Name: chat_hub_messages; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."chat_hub_messages" ("id", "sessionId", "previousMessageId", "revisionOfMessageId", "retryOfMessageId", "type", "name", "content", "provider", "model", "workflowId", "executionId", "createdAt", "updatedAt", "status") FROM stdin;
\.


--
-- Data for Name: data_table; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."data_table" ("id", "name", "projectId", "createdAt", "updatedAt") FROM stdin;
\.


--
-- Data for Name: data_table_column; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."data_table_column" ("id", "name", "type", "index", "dataTableId", "createdAt", "updatedAt") FROM stdin;
\.


--
-- Data for Name: event_destinations; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."event_destinations" ("id", "destination", "createdAt", "updatedAt") FROM stdin;
\.


--
-- Data for Name: execution_annotations; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."execution_annotations" ("id", "executionId", "vote", "note", "createdAt", "updatedAt") FROM stdin;
\.


--
-- Data for Name: execution_annotation_tags; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."execution_annotation_tags" ("annotationId", "tagId") FROM stdin;
\.


--
-- Data for Name: execution_data; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."execution_data" ("executionId", "workflowData", "data") FROM stdin;
1	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Telegram Trigger",{"Telegram Trigger":"10"},{},{},[],{},["11"],{"startTime":1762829981391,"executionIndex":0,"source":"12","hints":"13","executionTime":2,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714001,"message":"21"},{"item":0},{"message_id":1,"from":"22","chat":"23","date":1762829978,"text":"24","entities":"25"},{"id":1377981370,"is_bot":false,"first_name":"26","username":"27","language_code":"28"},{"id":1377981370,"first_name":"26","username":"27","type":"29"},"/start",["30"],"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"31"},"bot_command"]
3	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"7aa5d00f-136a-4dac-b1f9-7a37740f4c89","leftValue":"","rightValue":"","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[208,0],"id":"f0ab8bd3-ecb0-4c04-bc5f-9c6f427523dc","name":"If"}],"connections":{"Telegram Trigger":{"main":[[{"node":"If","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Telegram Trigger",{"Telegram Trigger":"10"},{},{},[],{},["11"],{"startTime":1762831582175,"executionIndex":0,"source":"12","hints":"13","executionTime":0,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714003,"message":"21"},{"item":0},{"message_id":3,"from":"22","chat":"23","date":1762831515,"location":"24"},{"id":1377981370,"is_bot":false,"first_name":"25","username":"26","language_code":"27"},{"id":1377981370,"first_name":"25","username":"26","type":"28"},{"latitude":10.39184,"longitude":123.96867},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
7	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=={{$json[\\"message\\"][\\"chat\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"c6cf457e-94cc-45c1-9fcb-3b87474255ab","name":"Send a text message","webhookId":"a82a5cf7-9834-407d-b59d-0a7a49846ae4","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"a39d823c-fcc3-4ccb-8e4a-ba19909d7662","name":"Telegram Trigger1","webhookId":"21c6d25e-6865-44e8-bcf9-5970371142f1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"14657d84-a974-4796-bbf1-ca97a587697a","leftValue":"={{$json[\\"data\\"]}}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"03eba121-f207-4ca3-97a9-542c251baab8","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=","text":"","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"fa7bfcef-93a7-4a04-b05a-77388ec5c815","name":"Send a text message1","webhookId":"b23d5b70-dc5b-41bf-b3aa-413b6d18fbe2","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Telegram Trigger1":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[{"node":"Send a text message1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6","error":"7"},{"contextData":"8","nodeExecutionStack":"9","waitingExecution":"10"},{"Telegram Trigger":"11","Send a text message":"12"},{},"Send a text message",{"level":"13","tags":"14","description":"15","timestamp":1762833714767,"context":"16","functionality":"17","name":"18","node":"19","messages":"20","httpCode":"21","message":"22","stack":"23"},{},["24"],{},["25"],["26"],"warning",{},"Bad Request: chat not found",{},"regular","NodeApiError",{"parameters":"27","type":"28","typeVersion":1.2,"position":"29","id":"30","name":"6","webhookId":"31","credentials":"32"},["33"],"400","Bad request - please check your parameters","NodeApiError: Bad request - please check your parameters\\n    at ExecuteContext.apiRequest (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Telegram/GenericFunctions.ts:230:9)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at ExecuteContext.execute (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Telegram/Telegram.node.ts:2198:21)\\n    at WorkflowExecute.executeNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1093:8)\\n    at WorkflowExecute.runNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1274:11)\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1708:27\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:2324:11",{"node":"34","data":"35","source":"36"},{"startTime":1762833711731,"executionIndex":0,"source":"37","hints":"38","executionTime":0,"executionStatus":"39","data":"40"},{"startTime":1762833711731,"executionIndex":1,"source":"41","hints":"42","executionTime":3037,"executionStatus":"43","error":"44"},{"preBuiltAgentsCalloutTelegram":"45","resource":"46","operation":"47","chatId":"48","text":"49","replyMarkup":"50","inlineKeyboard":"51","additionalFields":"52"},"n8n-nodes-base.telegram",[208,0],"c6cf457e-94cc-45c1-9fcb-3b87474255ab","a82a5cf7-9834-407d-b59d-0a7a49846ae4",{"telegramApi":"53"},"400 - {\\"ok\\":false,\\"error_code\\":400,\\"description\\":\\"Bad Request: chat not found\\"}",{"parameters":"54","type":"28","typeVersion":1.2,"position":"55","id":"30","name":"6","webhookId":"31","credentials":"56"},{"main":"57"},{"main":"41"},[],[],"success",{"main":"58"},["59"],[],"error",{"level":"13","tags":"14","description":"15","timestamp":1762833714767,"context":"16","functionality":"17","name":"18","node":"19","messages":"20","httpCode":"21","message":"22","stack":"23"},"","message","sendMessage","=={{$json[\\"message\\"][\\"chat\\"][\\"id\\"]}}","Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","inlineKeyboard",{"rows":"60"},{},{"id":"61","name":"62"},{"preBuiltAgentsCalloutTelegram":"45","resource":"46","operation":"47","chatId":"48","text":"49","replyMarkup":"50","inlineKeyboard":"63","additionalFields":"64"},[208,0],{"telegramApi":"65"},["66"],["67"],{"previousNode":"68"},["69"],"7x35n8A75QzWftQ2","Telegram account",{"rows":"70"},{},{"id":"61","name":"62"},["71"],["72"],"Telegram Trigger",{"row":"73"},["74"],{"json":"75","pairedItem":"76"},{"json":"75","pairedItem":"77"},{"buttons":"78"},{"row":"79"},{"update_id":483714005,"message":"80"},{"item":0},{"item":0},["81"],{"buttons":"82"},{"message_id":5,"from":"83","chat":"84","date":1762833704,"text":"85","entities":"86"},{"text":"87","additionalFields":"88"},["89"],{"id":1377981370,"is_bot":false,"first_name":"90","username":"91","language_code":"92"},{"id":1377981370,"first_name":"90","username":"91","type":"93"},"/start",["94"],"Get Started",{"callback_data":"95"},{"text":"87","additionalFields":"96"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"97"},"get_started",{"callback_data":"95"},"bot_command"]
2	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"7aa5d00f-136a-4dac-b1f9-7a37740f4c89","leftValue":"","rightValue":"","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[208,0],"id":"f0ab8bd3-ecb0-4c04-bc5f-9c6f427523dc","name":"If"}],"connections":{"Telegram Trigger":{"main":[[{"node":"If","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Telegram Trigger",{"Telegram Trigger":"10"},{},{},[],{},["11"],{"startTime":1762831581893,"executionIndex":0,"source":"12","hints":"13","executionTime":1,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714002,"message":"21"},{"item":0},{"message_id":2,"from":"22","chat":"23","date":1762829989,"text":"24"},{"id":1377981370,"is_bot":false,"first_name":"25","username":"26","language_code":"27"},{"id":1377981370,"first_name":"25","username":"26","type":"28"},"Hello! Testing...","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
4	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"7aa5d00f-136a-4dac-b1f9-7a37740f4c89","leftValue":"","rightValue":"","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[208,0],"id":"f0ab8bd3-ecb0-4c04-bc5f-9c6f427523dc","name":"If"}],"connections":{"Telegram Trigger":{"main":[[{"node":"If","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Telegram Trigger",{"Telegram Trigger":"10"},{},{},[],{},["11"],{"startTime":1762831630077,"executionIndex":0,"source":"12","hints":"13","executionTime":1,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714004,"message":"21"},{"item":0},{"message_id":4,"from":"22","chat":"23","date":1762831626,"location":"24"},{"id":1377981370,"is_bot":false,"first_name":"25","username":"26","language_code":"27"},{"id":1377981370,"first_name":"25","username":"26","type":"28"},{"latitude":10.391845,"longitude":123.968693},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
5	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"7aa5d00f-136a-4dac-b1f9-7a37740f4c89","leftValue":"","rightValue":"","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[208,0],"id":"f0ab8bd3-ecb0-4c04-bc5f-9c6f427523dc","name":"If"},{"parameters":{"mode":"runOnceForAllItems","language":"javaScript","jsCode":"return [{\\n  json: {\\n    latitude: $json[\\"message\\"][\\"location\\"][\\"latitude\\"],\\n    longitude: $json[\\"message\\"][\\"location\\"][\\"longitude\\"],\\n    maps_url: `https://maps.google.com/?q=${$json[\\"message\\"][\\"location\\"][\\"latitude\\"]},${$json[\\"message\\"][\\"location\\"][\\"longitude\\"]}`\\n  }\\n}];\\n","notice":""},"type":"n8n-nodes-base.code","typeVersion":2,"position":[416,-96],"id":"23bcebd4-53aa-40e6-bee9-977c155ca25b","name":"Code in JavaScript"}],"connections":{"Telegram Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[{"node":"Code in JavaScript","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Code in JavaScript",["13","14","4"],{"Telegram Trigger":"15","If":"16","Code in JavaScript":"17"},{},{},[],{},{},{},"Telegram Trigger","If",["18"],["19"],["20"],{"startTime":1762831630077,"executionIndex":0,"source":"21","hints":"22","executionTime":1,"executionStatus":"23","data":"24"},{"startTime":1762831858755,"executionIndex":1,"source":"25","hints":"26","executionTime":3,"executionStatus":"23","data":"27"},{"startTime":1762831858759,"executionIndex":2,"source":"28","hints":"29","executionTime":21,"executionStatus":"23","data":"30"},[],[],"success",{"main":"31"},["32"],[],{"main":"33"},["34"],["35"],{"main":"36"},["37"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["38","39"],{"previousNode":"14"},{"message":"40","location":"41"},["42"],["43"],["44"],[],"To make sure expressions after this node work, return the input items that produced each output item. <a target=\\"_blank\\" href=\\"https://docs.n8n.io/data/data-mapping/data-item-linking/item-linking-code-node/\\">More info</a>","outputPane",["45"],{"json":"46","pairedItem":"47"},{"json":"46","pairedItem":"48"},{"json":"49","pairedItem":"50"},{"update_id":483714004,"message":"51"},{"item":0},{"item":0},{"latitude":10.391845,"longitude":123.968693,"maps_url":"52"},{"item":0},{"message_id":4,"from":"53","chat":"54","date":1762831626,"location":"55"},"https://maps.google.com/?q=10.391845,123.968693",{"id":1377981370,"is_bot":false,"first_name":"56","username":"57","language_code":"58"},{"id":1377981370,"first_name":"56","username":"57","type":"59"},{"latitude":10.391845,"longitude":123.968693},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
6	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=={{$json[\\"message\\"][\\"chat\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"c6cf457e-94cc-45c1-9fcb-3b87474255ab","name":"Send a text message","webhookId":"a82a5cf7-9834-407d-b59d-0a7a49846ae4","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"a39d823c-fcc3-4ccb-8e4a-ba19909d7662","name":"Telegram Trigger1","webhookId":"21c6d25e-6865-44e8-bcf9-5970371142f1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"14657d84-a974-4796-bbf1-ca97a587697a","leftValue":"={{$json[\\"data\\"]}}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"03eba121-f207-4ca3-97a9-542c251baab8","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=","text":"","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"fa7bfcef-93a7-4a04-b05a-77388ec5c815","name":"Send a text message1","webhookId":"b23d5b70-dc5b-41bf-b3aa-413b6d18fbe2","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Telegram Trigger1":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[{"node":"Send a text message1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"resultData":"1"},{"error":"2","runData":"3"},{"level":"4","tags":"5","timestamp":1762833687304,"context":"6","functionality":"7","name":"8","message":"9","stack":"10"},{},"warning",{},{},"regular","WorkflowHasIssuesError","The workflow has issues and cannot be executed for that reason. Please fix them first.","WorkflowHasIssuesError: The workflow has issues and cannot be executed for that reason. Please fix them first.\\n    at WorkflowExecute.checkForWorkflowIssues (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1382:10)\\n    at WorkflowExecute.processRunExecutionData (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1461:8)\\n    at WorkflowExecute.runPartialWorkflow2 (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:332:15)\\n    at ManualExecutionService.runManually (/usr/local/lib/node_modules/n8n/src/manual-execution.service.ts:175:27)\\n    at WorkflowRunner.runMainProcess (/usr/local/lib/node_modules/n8n/src/workflow-runner.ts:297:53)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at WorkflowRunner.run (/usr/local/lib/node_modules/n8n/src/workflow-runner.ts:175:4)\\n    at WorkflowExecutionService.executeManually (/usr/local/lib/node_modules/n8n/src/workflows/workflow-execution.service.ts:229:23)\\n    at WorkflowsController.runManually (/usr/local/lib/node_modules/n8n/src/workflows/workflows.controller.ts:465:10)\\n    at handler (/usr/local/lib/node_modules/n8n/src/controller.registry.ts:79:12)"]
8	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=={{$json[\\"message\\"][\\"chat\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"c6cf457e-94cc-45c1-9fcb-3b87474255ab","name":"Send a text message","webhookId":"a82a5cf7-9834-407d-b59d-0a7a49846ae4","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"a39d823c-fcc3-4ccb-8e4a-ba19909d7662","name":"Telegram Trigger1","webhookId":"21c6d25e-6865-44e8-bcf9-5970371142f1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"14657d84-a974-4796-bbf1-ca97a587697a","leftValue":"={{$json[\\"data\\"]}}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"03eba121-f207-4ca3-97a9-542c251baab8","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=","text":"","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"fa7bfcef-93a7-4a04-b05a-77388ec5c815","name":"Send a text message1","webhookId":"b23d5b70-dc5b-41bf-b3aa-413b6d18fbe2","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Telegram Trigger1":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[{"node":"Send a text message1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6","error":"7"},{"contextData":"8","nodeExecutionStack":"9","waitingExecution":"10"},{"Telegram Trigger":"11","Send a text message":"12"},{},"Send a text message",{"level":"13","tags":"14","description":"15","timestamp":1762833747758,"context":"16","functionality":"17","name":"18","node":"19","messages":"20","httpCode":"21","message":"22","stack":"23"},{},["24"],{},["25"],["26"],"warning",{},"Bad Request: chat not found",{},"regular","NodeApiError",{"parameters":"27","type":"28","typeVersion":1.2,"position":"29","id":"30","name":"6","webhookId":"31","credentials":"32"},["33"],"400","Bad request - please check your parameters","NodeApiError: Bad request - please check your parameters\\n    at ExecuteContext.apiRequest (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Telegram/GenericFunctions.ts:230:9)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at ExecuteContext.execute (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Telegram/Telegram.node.ts:2198:21)\\n    at WorkflowExecute.executeNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1093:8)\\n    at WorkflowExecute.runNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1274:11)\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1708:27\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:2324:11",{"node":"34","data":"35","source":"36"},{"startTime":1762833746970,"executionIndex":0,"source":"37","hints":"38","executionTime":1,"executionStatus":"39","data":"40"},{"startTime":1762833746971,"executionIndex":1,"source":"41","hints":"42","executionTime":787,"executionStatus":"43","error":"44"},{"preBuiltAgentsCalloutTelegram":"45","resource":"46","operation":"47","chatId":"48","text":"49","replyMarkup":"50","inlineKeyboard":"51","additionalFields":"52"},"n8n-nodes-base.telegram",[208,0],"c6cf457e-94cc-45c1-9fcb-3b87474255ab","a82a5cf7-9834-407d-b59d-0a7a49846ae4",{"telegramApi":"53"},"400 - {\\"ok\\":false,\\"error_code\\":400,\\"description\\":\\"Bad Request: chat not found\\"}",{"parameters":"54","type":"28","typeVersion":1.2,"position":"55","id":"30","name":"6","webhookId":"31","credentials":"56"},{"main":"57"},{"main":"41"},[],[],"success",{"main":"58"},["59"],[],"error",{"level":"13","tags":"14","description":"15","timestamp":1762833747758,"context":"16","functionality":"17","name":"18","node":"19","messages":"20","httpCode":"21","message":"22","stack":"23"},"","message","sendMessage","=={{$json[\\"message\\"][\\"chat\\"][\\"id\\"]}}","Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","inlineKeyboard",{"rows":"60"},{},{"id":"61","name":"62"},{"preBuiltAgentsCalloutTelegram":"45","resource":"46","operation":"47","chatId":"48","text":"49","replyMarkup":"50","inlineKeyboard":"63","additionalFields":"64"},[208,0],{"telegramApi":"65"},["66"],["67"],{"previousNode":"68"},["69"],"7x35n8A75QzWftQ2","Telegram account",{"rows":"70"},{},{"id":"61","name":"62"},["71"],["72"],"Telegram Trigger",{"row":"73"},["74"],{"json":"75","pairedItem":"76"},{"json":"75","pairedItem":"77"},{"buttons":"78"},{"row":"79"},{"update_id":483714006,"message":"80"},{"item":0},{"item":0},["81"],{"buttons":"82"},{"message_id":6,"from":"83","chat":"84","date":1762833741,"text":"85","entities":"86"},{"text":"87","additionalFields":"88"},["89"],{"id":1377981370,"is_bot":false,"first_name":"90","username":"91","language_code":"92"},{"id":1377981370,"first_name":"90","username":"91","type":"93"},"/start",["94"],"Get Started",{"callback_data":"95"},{"text":"87","additionalFields":"96"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"97"},"get_started",{"callback_data":"95"},"bot_command"]
9	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=={{$json[\\"message\\"][\\"chat\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"c6cf457e-94cc-45c1-9fcb-3b87474255ab","name":"Send a text message","webhookId":"a82a5cf7-9834-407d-b59d-0a7a49846ae4","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"a39d823c-fcc3-4ccb-8e4a-ba19909d7662","name":"Telegram Trigger1","webhookId":"21c6d25e-6865-44e8-bcf9-5970371142f1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"14657d84-a974-4796-bbf1-ca97a587697a","leftValue":"={{$json[\\"data\\"]}}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"03eba121-f207-4ca3-97a9-542c251baab8","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=","text":"","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"fa7bfcef-93a7-4a04-b05a-77388ec5c815","name":"Send a text message1","webhookId":"b23d5b70-dc5b-41bf-b3aa-413b6d18fbe2","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Telegram Trigger1":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[{"node":"Send a text message1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Telegram Trigger",{"Telegram Trigger":"10"},{},{},[],{},["11"],{"startTime":1762833764449,"executionIndex":0,"source":"12","hints":"13","executionTime":0,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714007,"message":"21"},{"item":0},{"message_id":7,"from":"22","chat":"23","date":1762833762,"text":"24","entities":"25"},{"id":1377981370,"is_bot":false,"first_name":"26","username":"27","language_code":"28"},{"id":1377981370,"first_name":"26","username":"27","type":"29"},"/start",["30"],"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"31"},"bot_command"]
10	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=={{$json[\\"message\\"][\\"chat\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"c6cf457e-94cc-45c1-9fcb-3b87474255ab","name":"Send a text message","webhookId":"a82a5cf7-9834-407d-b59d-0a7a49846ae4","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"a39d823c-fcc3-4ccb-8e4a-ba19909d7662","name":"Telegram Trigger1","webhookId":"21c6d25e-6865-44e8-bcf9-5970371142f1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"14657d84-a974-4796-bbf1-ca97a587697a","leftValue":"={{$json[\\"data\\"]}}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"03eba121-f207-4ca3-97a9-542c251baab8","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=","text":"","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"fa7bfcef-93a7-4a04-b05a-77388ec5c815","name":"Send a text message1","webhookId":"b23d5b70-dc5b-41bf-b3aa-413b6d18fbe2","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Telegram Trigger1":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[{"node":"Send a text message1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Telegram Trigger",{"Telegram Trigger":"10"},{},{},[],{},["11"],{"startTime":1762833779808,"executionIndex":0,"source":"12","hints":"13","executionTime":0,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714008,"message":"21"},{"item":0},{"message_id":8,"from":"22","chat":"23","date":1762833773,"text":"24"},{"id":1377981370,"is_bot":false,"first_name":"25","username":"26","language_code":"27"},{"id":1377981370,"first_name":"25","username":"26","type":"28"},"Hello","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
11	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=={{$json[\\"message\\"][\\"chat\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"c6cf457e-94cc-45c1-9fcb-3b87474255ab","name":"Send a text message","webhookId":"a82a5cf7-9834-407d-b59d-0a7a49846ae4","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"a39d823c-fcc3-4ccb-8e4a-ba19909d7662","name":"Telegram Trigger1","webhookId":"21c6d25e-6865-44e8-bcf9-5970371142f1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"14657d84-a974-4796-bbf1-ca97a587697a","leftValue":"={{$json[\\"data\\"]}}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"03eba121-f207-4ca3-97a9-542c251baab8","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=","text":"","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"fa7bfcef-93a7-4a04-b05a-77388ec5c815","name":"Send a text message1","webhookId":"b23d5b70-dc5b-41bf-b3aa-413b6d18fbe2","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Telegram Trigger1":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[{"node":"Send a text message1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Telegram Trigger",{"Telegram Trigger":"10"},{},{},[],{},["11"],{"startTime":1762833816321,"executionIndex":0,"source":"12","hints":"13","executionTime":0,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714009,"message":"21"},{"item":0},{"message_id":9,"from":"22","chat":"23","date":1762833810,"text":"24","entities":"25"},{"id":1377981370,"is_bot":false,"first_name":"26","username":"27","language_code":"28"},{"id":1377981370,"first_name":"26","username":"27","type":"29"},"/start",["30"],"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"31"},"bot_command"]
42	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"{{ $now.toISOString() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Record coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach a photo by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have attachments, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2704,-96],"id":"0913c635-e6e2-46f5-9342-c601ef0aa704","name":"Ask for description and media","webhookId":"89a47dee-19c9-487a-8cf9-d1511a914824","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Look for user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","latitude":"={{ $('Record coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Record coordinates').item.json.message.location.longitude }}","current_step":"waiting_for_description"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-96],"id":"2012cdca-8dbe-47cf-a295-4f270d06be57","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Record coordinates","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2912,-96],"id":"cf35b9d3-aa1c-46a5-acd7-0fe8c5bcb3b8","name":"Record description and attachments","webhookId":"4ecbebdd-6ced-4bf3-86a7-87a7e5e7fea1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3120,-96],"id":"f13e5719-2eb0-4f41-8de1-bdc4ad76de45","name":"Get user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","description":"={{ $('Record description and attachments').item.json.message.caption }}","media":"={{ $('Record description and attachments').item.json.message.photo \\n    ? $('Record description and attachments').item.json.message.photo[$('Record description and attachments').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-96],"id":"6d3eb12f-335c-471d-8e0d-1e1ccc8f5558","name":"Update row in sheet1","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Look for user":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]},"Update user coordinates":{"main":[[{"node":"Ask for description and media","type":"main","index":0}]]},"Record coordinates":{"main":[[{"node":"Look for user","type":"main","index":0}]]},"Record description and attachments":{"main":[[{"node":"Get user","type":"main","index":0}]]},"Get user":{"main":[[{"node":"Update row in sheet1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Ask for name",["13","14","4"],{"Get Started Trigger":"15","If":"16"},{},{},[],{},{},{},"Get Started Trigger","If",["17"],["18"],{"startTime":1762847045067,"executionIndex":0,"source":"19","hints":"20","executionTime":1,"executionStatus":"21","data":"22"},{"startTime":1762847045070,"executionIndex":1,"source":"23","hints":"24","executionTime":4,"executionStatus":"21","data":"25"},[],[],"success",{"main":"26"},["27"],[],{"main":"28"},["29"],{"previousNode":"13"},["30","31"],["32"],[],["33"],{"json":"34","pairedItem":"35"},{"json":"36","pairedItem":"37"},{},{"item":0},{},{"item":0}]
45	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"{{ $now.toISOString() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Record coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach a photo by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have attachments, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2704,-96],"id":"0913c635-e6e2-46f5-9342-c601ef0aa704","name":"Ask for description and media","webhookId":"89a47dee-19c9-487a-8cf9-d1511a914824","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Look for user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","latitude":"={{ $('Record coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Record coordinates').item.json.message.location.longitude }}","current_step":"waiting_for_description"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-96],"id":"2012cdca-8dbe-47cf-a295-4f270d06be57","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Record coordinates","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2912,-96],"id":"cf35b9d3-aa1c-46a5-acd7-0fe8c5bcb3b8","name":"Record description and attachments","webhookId":"4ecbebdd-6ced-4bf3-86a7-87a7e5e7fea1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3120,-96],"id":"f13e5719-2eb0-4f41-8de1-bdc4ad76de45","name":"Get user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","description":"={{ $('Record description and attachments').item.json.message.caption }}","media":"={{ $('Record description and attachments').item.json.message.photo \\n    ? $('Record description and attachments').item.json.message.photo[$('Record description and attachments').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-96],"id":"6d3eb12f-335c-471d-8e0d-1e1ccc8f5558","name":"Update row in sheet1","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyBFrr8BuLcP6ZhKeLFgLEDalenNlX49pUk","authentication":"predefinedCredentialType","nodeCredentialType":"googlePalmApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"contents\\": [\\n    {\\n      \\"role\\": \\"user\\",\\n      \\"parts\\": [\\n        {\\n          \\"text\\": \\"You are a disaster response assistant for a humanitarian emergency team. Classify citizen reports by urgency (High, Medium, Low), category (food, rescue, medical, power, others), and write a concise, clear summary for field volunteers. Include any safety-critical details.\\\\n\\\\nCitizen name: {{ $('Append Row in Sheet').item.json.name }}\\\\nLocation: {{ $('Append Row in Sheet').item.json.latitude }}, {{ $('Append Row in Sheet').item.json.longitude }}\\\\nReport: {{ $('Append Row in Sheet').item.json.description }}\\\\n\\\\nRespond ONLY in valid JSON (no comments or extra text), in this format:\\\\n{\\\\\\"urgency\\\\\\": <urgency>, \\\\\\"category\\\\\\": <category>, \\\\\\"summary\\\\\\": <summary>}\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[3536,-96],"id":"1533806a-e079-416d-adbf-133e1fa6e49e","name":"Classify and analyze report","credentials":{"googlePalmApi":{"id":"zdDZCTsALNpNUjT8","name":"Google Gemini(PaLM) Api account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Look for user":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]},"Update user coordinates":{"main":[[{"node":"Ask for description and media","type":"main","index":0}]]},"Record coordinates":{"main":[[{"node":"Look for user","type":"main","index":0}]]},"Record description and attachments":{"main":[[{"node":"Get user","type":"main","index":0}]]},"Get user":{"main":[[{"node":"Update row in sheet1","type":"main","index":0}]]},"Update row in sheet1":{"main":[[{"node":"Classify and analyze report","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Get Started Trigger",{"Get Started Trigger":"10"},{},{},[],{},["11"],{"startTime":1762848073774,"executionIndex":0,"source":"12","hints":"13","executionTime":0,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714025,"callback_query":"21"},{"item":0},{"id":"22","from":"23","message":"24","chat_instance":"25","data":"26"},"5918384921269400371",{"id":1377981370,"is_bot":false,"first_name":"27","username":"28","language_code":"29"},{"message_id":27,"from":"30","chat":"31","date":1762848037,"text":"32","entities":"33","link_preview_options":"34","reply_markup":"35"},"1760275626831282877","get_started","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en",{"id":8509425688,"is_bot":true,"first_name":"36","username":"37"},{"id":1377981370,"first_name":"27","username":"28","type":"38"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["39","40"],{"is_disabled":true},{"inline_keyboard":"41"},"CrisisMapper","crisismapper_bot","private",{"offset":209,"length":41,"type":"42"},{"offset":250,"length":3,"type":"43","url":"44"},["45"],"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["46"],{"text":"47","callback_data":"26"},"Get Started"]
12	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=={{$json[\\"message\\"][\\"chat\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"c6cf457e-94cc-45c1-9fcb-3b87474255ab","name":"Send a text message","webhookId":"a82a5cf7-9834-407d-b59d-0a7a49846ae4","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6","error":"7"},{"contextData":"8","nodeExecutionStack":"9","waitingExecution":"10"},{"Telegram Trigger":"11","Send a text message":"12"},{},"Send a text message",{"level":"13","tags":"14","description":"15","timestamp":1762833949510,"context":"16","functionality":"17","name":"18","node":"19","messages":"20","httpCode":"21","message":"22","stack":"23"},{},["24"],{},["25"],["26"],"warning",{},"Bad Request: chat not found",{},"regular","NodeApiError",{"parameters":"27","type":"28","typeVersion":1.2,"position":"29","id":"30","name":"6","webhookId":"31","credentials":"32"},["33"],"400","Bad request - please check your parameters","NodeApiError: Bad request - please check your parameters\\n    at ExecuteContext.apiRequest (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Telegram/GenericFunctions.ts:230:9)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at ExecuteContext.execute (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Telegram/Telegram.node.ts:2198:21)\\n    at WorkflowExecute.executeNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1093:8)\\n    at WorkflowExecute.runNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1274:11)\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1708:27\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:2324:11",{"node":"34","data":"35","source":"36"},{"startTime":1762833948742,"executionIndex":0,"source":"37","hints":"38","executionTime":1,"executionStatus":"39","data":"40"},{"startTime":1762833948743,"executionIndex":1,"source":"41","hints":"42","executionTime":767,"executionStatus":"43","error":"44"},{"preBuiltAgentsCalloutTelegram":"45","resource":"46","operation":"47","chatId":"48","text":"49","replyMarkup":"50","inlineKeyboard":"51","additionalFields":"52"},"n8n-nodes-base.telegram",[208,0],"c6cf457e-94cc-45c1-9fcb-3b87474255ab","a82a5cf7-9834-407d-b59d-0a7a49846ae4",{"telegramApi":"53"},"400 - {\\"ok\\":false,\\"error_code\\":400,\\"description\\":\\"Bad Request: chat not found\\"}",{"parameters":"54","type":"28","typeVersion":1.2,"position":"55","id":"30","name":"6","webhookId":"31","credentials":"56"},{"main":"57"},{"main":"41"},[],[],"success",{"main":"58"},["59"],[],"error",{"level":"13","tags":"14","description":"15","timestamp":1762833949510,"context":"16","functionality":"17","name":"18","node":"19","messages":"20","httpCode":"21","message":"22","stack":"23"},"","message","sendMessage","=={{$json[\\"message\\"][\\"chat\\"][\\"id\\"]}}","Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","inlineKeyboard",{"rows":"60"},{},{"id":"61","name":"62"},{"preBuiltAgentsCalloutTelegram":"45","resource":"46","operation":"47","chatId":"48","text":"49","replyMarkup":"50","inlineKeyboard":"63","additionalFields":"64"},[208,0],{"telegramApi":"65"},["66"],["67"],{"previousNode":"68"},["69"],"7x35n8A75QzWftQ2","Telegram account",{"rows":"70"},{},{"id":"61","name":"62"},["71"],["72"],"Telegram Trigger",{"row":"73"},["74"],{"json":"75","pairedItem":"76"},{"json":"75","pairedItem":"77"},{"buttons":"78"},{"row":"79"},{"update_id":483714010,"message":"80"},{"item":0},{"item":0},["81"],{"buttons":"82"},{"message_id":10,"from":"83","chat":"84","date":1762833945,"text":"85","entities":"86"},{"text":"87","additionalFields":"88"},["89"],{"id":1377981370,"is_bot":false,"first_name":"90","username":"91","language_code":"92"},{"id":1377981370,"first_name":"90","username":"91","type":"93"},"/start",["94"],"Get Started",{"callback_data":"95"},{"text":"87","additionalFields":"96"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"97"},"get_started",{"callback_data":"95"},"bot_command"]
14	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Telegram Trigger",{"Telegram Trigger":"10"},{},{},[],{},["11"],{"startTime":1762835793903,"executionIndex":0,"source":"12","hints":"13","executionTime":0,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714012,"message":"21"},{"item":0},{"message_id":12,"from":"22","chat":"23","date":1762833964,"text":"24"},{"id":1377981370,"is_bot":false,"first_name":"25","username":"26","language_code":"27"},{"id":1377981370,"first_name":"25","username":"26","type":"28"},"Hello","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
16	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Telegram Trigger",{"Telegram Trigger":"10"},{},{},[],{},["11"],{"startTime":1762835860126,"executionIndex":0,"source":"12","hints":"13","executionTime":1,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714014,"message":"21"},{"item":0},{"message_id":14,"from":"22","chat":"23","date":1762835857,"text":"24","entities":"25"},{"id":1377981370,"is_bot":false,"first_name":"26","username":"27","language_code":"28"},{"id":1377981370,"first_name":"26","username":"27","type":"29"},"/start",["30"],"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"31"},"bot_command"]
19	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Send a text message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4","error":"8"},{"contextData":"9","nodeExecutionStack":"10","metadata":"11","waitingExecution":"12","waitingExecutionSource":"13"},"Send a text message",["14","4"],{"Telegram Trigger":"15","Send a text message":"16"},{},{"level":"17","tags":"18","description":"19","timestamp":1762836303395,"context":"20","functionality":"21","name":"22","node":"23","messages":"24","httpCode":"25","message":"26","stack":"27"},{},["28"],{},{},{},"Telegram Trigger",["29"],["30"],"warning",{},"Bad Request: chat not found",{},"regular","NodeApiError",{"parameters":"31","type":"32","typeVersion":1.2,"position":"33","id":"34","name":"4","webhookId":"35","credentials":"36"},["37"],"400","Bad request - please check your parameters","NodeApiError: Bad request - please check your parameters\\n    at ExecuteContext.apiRequest (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Telegram/GenericFunctions.ts:230:9)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at ExecuteContext.execute (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Telegram/Telegram.node.ts:2198:21)\\n    at WorkflowExecute.executeNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1093:8)\\n    at WorkflowExecute.runNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1274:11)\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1708:27\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:2324:11",{"node":"38","data":"39","source":"40"},{"startTime":1762836118878,"executionIndex":0,"source":"41","hints":"42","executionTime":1,"executionStatus":"43","data":"44"},{"startTime":1762836302596,"executionIndex":1,"source":"45","hints":"46","executionTime":799,"executionStatus":"47","error":"48"},{"preBuiltAgentsCalloutTelegram":"49","resource":"50","operation":"51","chatId":"52","text":"53","replyMarkup":"54","inlineKeyboard":"55","additionalFields":"56"},"n8n-nodes-base.telegram",[208,0],"85aa6592-db5f-4d17-a4e0-33575b368c75","860b1154-bc6f-4c6d-bda0-32652b2f985d",{"telegramApi":"57"},"400 - {\\"ok\\":false,\\"error_code\\":400,\\"description\\":\\"Bad Request: chat not found\\"}",{"parameters":"58","type":"32","typeVersion":1.2,"position":"59","id":"34","name":"4","webhookId":"35","credentials":"60"},{"main":"61"},{"main":"45"},[],[],"success",{"main":"62"},["63"],[],"error",{"level":"17","tags":"18","description":"19","timestamp":1762836303395,"context":"20","functionality":"21","name":"22","node":"23","messages":"24","httpCode":"25","message":"26","stack":"27"},"","message","sendMessage","=={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","inlineKeyboard",{"rows":"64"},{},{"id":"65","name":"66"},{"preBuiltAgentsCalloutTelegram":"49","resource":"50","operation":"51","chatId":"52","text":"53","replyMarkup":"54","inlineKeyboard":"67","additionalFields":"68"},[208,0],{"telegramApi":"69"},["70"],["71"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["72"],"7x35n8A75QzWftQ2","Telegram account",{"rows":"73"},{},{"id":"65","name":"66"},["74"],["75"],{"row":"76"},["77"],{"json":"78","pairedItem":"79"},{"json":"78","pairedItem":"80"},{"buttons":"81"},{"row":"82"},{"update_id":483714015,"message":"83"},{"item":0},{"item":0},["84"],{"buttons":"85"},{"message_id":15,"from":"86","chat":"87","date":1762836113,"text":"88","entities":"89"},{"text":"90","additionalFields":"91"},["92"],{"id":1377981370,"is_bot":false,"first_name":"93","username":"94","language_code":"95"},{"id":1377981370,"first_name":"93","username":"94","type":"96"},"/start",["97"],"Get Started",{"callback_data":"98"},{"text":"90","additionalFields":"99"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"100"},"get_started",{"callback_data":"98"},"bot_command"]
13	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Telegram Trigger",{"Telegram Trigger":"10"},{},{},[],{},["11"],{"startTime":1762835793651,"executionIndex":0,"source":"12","hints":"13","executionTime":1,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714011,"message":"21"},{"item":0},{"message_id":11,"from":"22","chat":"23","date":1762833959,"text":"24","entities":"25"},{"id":1377981370,"is_bot":false,"first_name":"26","username":"27","language_code":"28"},{"id":1377981370,"first_name":"26","username":"27","type":"29"},"/start",["30"],"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"31"},"bot_command"]
15	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Telegram Trigger",{"Telegram Trigger":"10"},{},{},[],{},["11"],{"startTime":1762835794917,"executionIndex":0,"source":"12","hints":"13","executionTime":1,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714013,"message":"21"},{"item":0},{"message_id":13,"from":"22","chat":"23","date":1762835788,"text":"24"},{"id":1377981370,"is_bot":false,"first_name":"25","username":"26","language_code":"27"},{"id":1377981370,"first_name":"25","username":"26","type":"28"},"Hello","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
17	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=={{$json[\\"message\\"][\\"chat\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Send a text message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4","error":"8"},{"contextData":"9","nodeExecutionStack":"10","metadata":"11","waitingExecution":"12","waitingExecutionSource":"13"},"Send a text message",["14","4"],{"Telegram Trigger":"15","Send a text message":"16"},{},{"level":"17","tags":"18","description":"19","timestamp":1762836040398,"context":"20","functionality":"21","name":"22","node":"23","messages":"24","httpCode":"25","message":"26","stack":"27"},{},["28"],{},{},{},"Telegram Trigger",["29"],["30"],"warning",{},"Bad Request: chat not found",{},"regular","NodeApiError",{"parameters":"31","type":"32","typeVersion":1.2,"position":"33","id":"34","name":"4","webhookId":"35","credentials":"36"},["37"],"400","Bad request - please check your parameters","NodeApiError: Bad request - please check your parameters\\n    at ExecuteContext.apiRequest (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Telegram/GenericFunctions.ts:230:9)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at ExecuteContext.execute (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Telegram/Telegram.node.ts:2198:21)\\n    at WorkflowExecute.executeNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1093:8)\\n    at WorkflowExecute.runNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1274:11)\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1708:27\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:2324:11",{"node":"38","data":"39","source":"40"},{"startTime":1762835860126,"executionIndex":0,"source":"41","hints":"42","executionTime":1,"executionStatus":"43","data":"44"},{"startTime":1762836038790,"executionIndex":1,"source":"45","hints":"46","executionTime":1610,"executionStatus":"47","error":"48"},{"preBuiltAgentsCalloutTelegram":"49","resource":"50","operation":"51","chatId":"52","text":"53","replyMarkup":"54","inlineKeyboard":"55","additionalFields":"56"},"n8n-nodes-base.telegram",[208,0],"85aa6592-db5f-4d17-a4e0-33575b368c75","860b1154-bc6f-4c6d-bda0-32652b2f985d",{"telegramApi":"57"},"400 - {\\"ok\\":false,\\"error_code\\":400,\\"description\\":\\"Bad Request: chat not found\\"}",{"parameters":"58","type":"32","typeVersion":1.2,"position":"59","id":"34","name":"4","webhookId":"35","credentials":"60"},{"main":"61"},{"main":"45"},[],[],"success",{"main":"62"},["63"],[],"error",{"level":"17","tags":"18","description":"19","timestamp":1762836040398,"context":"20","functionality":"21","name":"22","node":"23","messages":"24","httpCode":"25","message":"26","stack":"27"},"","message","sendMessage","=={{$json[\\"message\\"][\\"chat\\"][\\"id\\"]}}","Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","inlineKeyboard",{"rows":"64"},{},{"id":"65","name":"66"},{"preBuiltAgentsCalloutTelegram":"49","resource":"50","operation":"51","chatId":"52","text":"53","replyMarkup":"54","inlineKeyboard":"67","additionalFields":"68"},[208,0],{"telegramApi":"69"},["70"],["71"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["72"],"7x35n8A75QzWftQ2","Telegram account",{"rows":"73"},{},{"id":"65","name":"66"},["74"],["75"],{"row":"76"},["77"],{"json":"78","pairedItem":"79"},{"json":"78","pairedItem":"80"},{"buttons":"81"},{"row":"82"},{"update_id":483714014,"message":"83"},{"item":0},{"item":0},["84"],{"buttons":"85"},{"message_id":14,"from":"86","chat":"87","date":1762835857,"text":"88","entities":"89"},{"text":"90","additionalFields":"91"},["92"],{"id":1377981370,"is_bot":false,"first_name":"93","username":"94","language_code":"95"},{"id":1377981370,"first_name":"93","username":"94","type":"96"},"/start",["97"],"Get Started",{"callback_data":"98"},{"text":"90","additionalFields":"99"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"100"},"get_started",{"callback_data":"98"},"bot_command"]
18	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=={{$json[\\"message\\"][\\"chat\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Send a text message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6","error":"7"},{"contextData":"8","nodeExecutionStack":"9","waitingExecution":"10"},{"Telegram Trigger":"11","Send a text message":"12"},{},"Send a text message",{"level":"13","tags":"14","description":"15","timestamp":1762836119663,"context":"16","functionality":"17","name":"18","node":"19","messages":"20","httpCode":"21","message":"22","stack":"23"},{},["24"],{},["25"],["26"],"warning",{},"Bad Request: chat not found",{},"regular","NodeApiError",{"parameters":"27","type":"28","typeVersion":1.2,"position":"29","id":"30","name":"6","webhookId":"31","credentials":"32"},["33"],"400","Bad request - please check your parameters","NodeApiError: Bad request - please check your parameters\\n    at ExecuteContext.apiRequest (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Telegram/GenericFunctions.ts:230:9)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at ExecuteContext.execute (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Telegram/Telegram.node.ts:2198:21)\\n    at WorkflowExecute.executeNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1093:8)\\n    at WorkflowExecute.runNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1274:11)\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1708:27\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:2324:11",{"node":"34","data":"35","source":"36"},{"startTime":1762836118878,"executionIndex":0,"source":"37","hints":"38","executionTime":1,"executionStatus":"39","data":"40"},{"startTime":1762836118880,"executionIndex":1,"source":"41","hints":"42","executionTime":784,"executionStatus":"43","error":"44"},{"preBuiltAgentsCalloutTelegram":"45","resource":"46","operation":"47","chatId":"48","text":"49","replyMarkup":"50","inlineKeyboard":"51","additionalFields":"52"},"n8n-nodes-base.telegram",[208,0],"85aa6592-db5f-4d17-a4e0-33575b368c75","860b1154-bc6f-4c6d-bda0-32652b2f985d",{"telegramApi":"53"},"400 - {\\"ok\\":false,\\"error_code\\":400,\\"description\\":\\"Bad Request: chat not found\\"}",{"parameters":"54","type":"28","typeVersion":1.2,"position":"55","id":"30","name":"6","webhookId":"31","credentials":"56"},{"main":"57"},{"main":"41"},[],[],"success",{"main":"58"},["59"],[],"error",{"level":"13","tags":"14","description":"15","timestamp":1762836119663,"context":"16","functionality":"17","name":"18","node":"19","messages":"20","httpCode":"21","message":"22","stack":"23"},"","message","sendMessage","=={{$json[\\"message\\"][\\"chat\\"][\\"id\\"]}}","Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","inlineKeyboard",{"rows":"60"},{},{"id":"61","name":"62"},{"preBuiltAgentsCalloutTelegram":"45","resource":"46","operation":"47","chatId":"48","text":"49","replyMarkup":"50","inlineKeyboard":"63","additionalFields":"64"},[208,0],{"telegramApi":"65"},["66"],["67"],{"previousNode":"68"},["69"],"7x35n8A75QzWftQ2","Telegram account",{"rows":"70"},{},{"id":"61","name":"62"},["71"],["72"],"Telegram Trigger",{"row":"73"},["74"],{"json":"75","pairedItem":"76"},{"json":"75","pairedItem":"77"},{"buttons":"78"},{"row":"79"},{"update_id":483714015,"message":"80"},{"item":0},{"item":0},["81"],{"buttons":"82"},{"message_id":15,"from":"83","chat":"84","date":1762836113,"text":"85","entities":"86"},{"text":"87","additionalFields":"88"},["89"],{"id":1377981370,"is_bot":false,"first_name":"90","username":"91","language_code":"92"},{"id":1377981370,"first_name":"90","username":"91","type":"93"},"/start",["94"],"Get Started",{"callback_data":"95"},{"text":"87","additionalFields":"96"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"97"},"get_started",{"callback_data":"95"},"bot_command"]
20	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Send a text message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6","error":"7"},{"contextData":"8","nodeExecutionStack":"9","waitingExecution":"10"},{"Telegram Trigger":"11","Send a text message":"12"},{},"Send a text message",{"level":"13","tags":"14","description":"15","timestamp":1762836324784,"context":"16","functionality":"17","name":"18","node":"19","messages":"20","httpCode":"21","message":"22","stack":"23"},{},["24"],{},["25"],["26"],"warning",{},"Bad Request: chat not found",{},"regular","NodeApiError",{"parameters":"27","type":"28","typeVersion":1.2,"position":"29","id":"30","name":"6","webhookId":"31","credentials":"32"},["33"],"400","Bad request - please check your parameters","NodeApiError: Bad request - please check your parameters\\n    at ExecuteContext.apiRequest (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Telegram/GenericFunctions.ts:230:9)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at ExecuteContext.execute (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Telegram/Telegram.node.ts:2198:21)\\n    at WorkflowExecute.executeNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1093:8)\\n    at WorkflowExecute.runNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1274:11)\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1708:27\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:2324:11",{"node":"34","data":"35","source":"36"},{"startTime":1762836323996,"executionIndex":0,"source":"37","hints":"38","executionTime":1,"executionStatus":"39","data":"40"},{"startTime":1762836323997,"executionIndex":1,"source":"41","hints":"42","executionTime":789,"executionStatus":"43","error":"44"},{"preBuiltAgentsCalloutTelegram":"45","resource":"46","operation":"47","chatId":"48","text":"49","replyMarkup":"50","inlineKeyboard":"51","additionalFields":"52"},"n8n-nodes-base.telegram",[208,0],"85aa6592-db5f-4d17-a4e0-33575b368c75","860b1154-bc6f-4c6d-bda0-32652b2f985d",{"telegramApi":"53"},"400 - {\\"ok\\":false,\\"error_code\\":400,\\"description\\":\\"Bad Request: chat not found\\"}",{"parameters":"54","type":"28","typeVersion":1.2,"position":"55","id":"30","name":"6","webhookId":"31","credentials":"56"},{"main":"57"},{"main":"41"},[],[],"success",{"main":"58"},["59"],[],"error",{"level":"13","tags":"14","description":"15","timestamp":1762836324784,"context":"16","functionality":"17","name":"18","node":"19","messages":"20","httpCode":"21","message":"22","stack":"23"},"","message","sendMessage","=={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","inlineKeyboard",{"rows":"60"},{},{"id":"61","name":"62"},{"preBuiltAgentsCalloutTelegram":"45","resource":"46","operation":"47","chatId":"48","text":"49","replyMarkup":"50","inlineKeyboard":"63","additionalFields":"64"},[208,0],{"telegramApi":"65"},["66"],["67"],{"previousNode":"68"},["69"],"7x35n8A75QzWftQ2","Telegram account",{"rows":"70"},{},{"id":"61","name":"62"},["71"],["72"],"Telegram Trigger",{"row":"73"},["74"],{"json":"75","pairedItem":"76"},{"json":"75","pairedItem":"77"},{"buttons":"78"},{"row":"79"},{"update_id":483714016,"message":"80"},{"item":0},{"item":0},["81"],{"buttons":"82"},{"message_id":16,"from":"83","chat":"84","date":1762836301,"text":"85","entities":"86"},{"text":"87","additionalFields":"88"},["89"],{"id":1377981370,"is_bot":false,"first_name":"90","username":"91","language_code":"92"},{"id":1377981370,"first_name":"90","username":"91","type":"93"},"/start",["94"],"Get Started",{"callback_data":"95"},{"text":"87","additionalFields":"96"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"97"},"get_started",{"callback_data":"95"},"bot_command"]
21	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Send a text message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4","error":"8"},{"contextData":"9","nodeExecutionStack":"10","metadata":"11","waitingExecution":"12","waitingExecutionSource":"13"},"Send a text message",["14","4"],{"Telegram Trigger":"15","Send a text message":"16"},{},{"level":"17","tags":"18","description":"19","timestamp":1762837320991,"context":"20","functionality":"21","name":"22","node":"23","messages":"24","httpCode":"25","message":"26","stack":"27"},{},["28"],{},{},{},"Telegram Trigger",["29"],["30"],"warning",{},"Bad Request: chat_id is empty",{},"regular","NodeApiError",{"parameters":"31","type":"32","typeVersion":1.2,"position":"33","id":"34","name":"4","webhookId":"35","credentials":"36"},["37"],"400","Bad request - please check your parameters","NodeApiError: Bad request - please check your parameters\\n    at ExecuteContext.apiRequest (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Telegram/GenericFunctions.ts:230:9)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at ExecuteContext.execute (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Telegram/Telegram.node.ts:2198:21)\\n    at WorkflowExecute.executeNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1093:8)\\n    at WorkflowExecute.runNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1274:11)\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1708:27\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:2324:11",{"node":"38","data":"39","source":"40"},{"startTime":1762836323996,"executionIndex":0,"source":"41","hints":"42","executionTime":1,"executionStatus":"43","data":"44"},{"startTime":1762837320218,"executionIndex":1,"source":"45","hints":"46","executionTime":773,"executionStatus":"47","error":"48"},{"preBuiltAgentsCalloutTelegram":"49","resource":"50","operation":"51","chatId":"52","text":"53","replyMarkup":"54","inlineKeyboard":"55","additionalFields":"56"},"n8n-nodes-base.telegram",[208,0],"85aa6592-db5f-4d17-a4e0-33575b368c75","860b1154-bc6f-4c6d-bda0-32652b2f985d",{"telegramApi":"57"},"400 - {\\"ok\\":false,\\"error_code\\":400,\\"description\\":\\"Bad Request: chat_id is empty\\"}",{"parameters":"58","type":"32","typeVersion":1.2,"position":"59","id":"34","name":"4","webhookId":"35","credentials":"60"},{"main":"61"},{"main":"45"},[],[],"success",{"main":"62"},["63"],[],"error",{"level":"17","tags":"18","description":"19","timestamp":1762837320991,"context":"20","functionality":"21","name":"22","node":"23","messages":"24","httpCode":"25","message":"26","stack":"27"},"","message","sendMessage","={{$json[\\"from\\"][\\"id\\"]}}","Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","inlineKeyboard",{"rows":"64"},{},{"id":"65","name":"66"},{"preBuiltAgentsCalloutTelegram":"49","resource":"50","operation":"51","chatId":"52","text":"53","replyMarkup":"54","inlineKeyboard":"67","additionalFields":"68"},[208,0],{"telegramApi":"69"},["70"],["71"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["72"],"7x35n8A75QzWftQ2","Telegram account",{"rows":"73"},{},{"id":"65","name":"66"},["74"],["75"],{"row":"76"},["77"],{"json":"78","pairedItem":"79"},{"json":"78","pairedItem":"80"},{"buttons":"81"},{"row":"82"},{"update_id":483714016,"message":"83"},{"item":0},{"item":0},["84"],{"buttons":"85"},{"message_id":16,"from":"86","chat":"87","date":1762836301,"text":"88","entities":"89"},{"text":"90","additionalFields":"91"},["92"],{"id":1377981370,"is_bot":false,"first_name":"93","username":"94","language_code":"95"},{"id":1377981370,"first_name":"93","username":"94","type":"96"},"/start",["97"],"Get Started",{"callback_data":"98"},{"text":"90","additionalFields":"99"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"100"},"get_started",{"callback_data":"98"},"bot_command"]
22	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Send a text message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Send a text message",["13","4"],{"Telegram Trigger":"14","Send a text message":"15"},{},{},[],{},{},{},"Telegram Trigger",["16"],["17"],{"startTime":1762836323996,"executionIndex":0,"source":"18","hints":"19","executionTime":1,"executionStatus":"20","data":"21"},{"startTime":1762837428773,"executionIndex":1,"source":"22","hints":"23","executionTime":1041,"executionStatus":"20","data":"24"},[],[],"success",{"main":"25"},["26"],[],{"main":"27"},["28"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["29"],["30"],["31"],{"json":"32","pairedItem":"33"},{"json":"34","pairedItem":"35"},{"update_id":483714016,"message":"36"},{"item":0},{"ok":true,"result":"37"},{"item":0},{"message_id":16,"from":"38","chat":"39","date":1762836301,"text":"40","entities":"41"},{"message_id":17,"from":"42","chat":"43","date":1762837429,"text":"44","entities":"45","link_preview_options":"46","reply_markup":"47"},{"id":1377981370,"is_bot":false,"first_name":"48","username":"49","language_code":"50"},{"id":1377981370,"first_name":"48","username":"49","type":"51"},"/start",["52"],{"id":8509425688,"is_bot":true,"first_name":"53","username":"54"},{"id":1377981370,"first_name":"48","username":"49","type":"51"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["55","56"],{"is_disabled":true},{"inline_keyboard":"57"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"58"},"CrisisMapper","crisismapper_bot",{"offset":209,"length":41,"type":"59"},{"offset":250,"length":3,"type":"60","url":"61"},["62"],"bot_command","italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["63"],{"text":"64","callback_data":"65"},"Get Started","get_started"]
34	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Telegram Trigger1","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Telegram Trigger1",{"Telegram Trigger1":"10"},{},{},[],{},["11"],{"startTime":1762843288199,"executionIndex":0,"source":"12","hints":"13","executionTime":1,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714022,"message":"21"},{"item":0},{"message_id":23,"from":"22","chat":"23","date":1762843285,"location":"24"},{"id":1377981370,"is_bot":false,"first_name":"25","username":"26","language_code":"27"},{"id":1377981370,"first_name":"25","username":"26","type":"28"},{"latitude":10.391845,"longitude":123.968693},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
23	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Send a text message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"cf1cb4d7-b161-4aa0-b0c9-1256953bc7c3","name":"Telegram Trigger1","webhookId":"edf1400c-7eac-4cf6-8456-c7cd4acccd11","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Telegram Trigger1",{"Telegram Trigger1":"10"},{},{},[],{},["11"],{"startTime":1762837589257,"executionIndex":0,"source":"12","hints":"13","executionTime":0,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714017,"callback_query":"21"},{"item":0},{"id":"22","from":"23","message":"24","chat_instance":"25","data":"26"},"5918384918972855040",{"id":1377981370,"is_bot":false,"first_name":"27","username":"28","language_code":"29"},{"message_id":17,"from":"30","chat":"31","date":1762837429,"text":"32","entities":"33","link_preview_options":"34","reply_markup":"35"},"1760275626831282877","get_started","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en",{"id":8509425688,"is_bot":true,"first_name":"36","username":"37"},{"id":1377981370,"first_name":"27","username":"28","type":"38"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["39","40"],{"is_disabled":true},{"inline_keyboard":"41"},"CrisisMapper","crisismapper_bot","private",{"offset":209,"length":41,"type":"42"},{"offset":250,"length":3,"type":"43","url":"44"},["45"],"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["46"],{"text":"47","callback_data":"26"},"Get Started"]
24	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Send a text message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"cf1cb4d7-b161-4aa0-b0c9-1256953bc7c3","name":"Telegram Trigger1","webhookId":"edf1400c-7eac-4cf6-8456-c7cd4acccd11","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"339b7168-d643-4733-b3d9-cbe0f29497a5","leftValue":"={{$json[\\"data\\"]}}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"6b43aa30-d832-46be-a536-c77b44acc73a","name":"If"}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Telegram Trigger1":{"main":[[{"node":"If","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"If",["13","4"],{"Telegram Trigger1":"14","If":"15"},{},{},[],{},{},{},"Telegram Trigger1",["16"],["17"],{"startTime":1762837589257,"executionIndex":0,"source":"18","hints":"19","executionTime":0,"executionStatus":"20","data":"21"},{"startTime":1762837651174,"executionIndex":1,"source":"22","hints":"23","executionTime":7,"executionStatus":"20","data":"24"},[],[],"success",{"main":"25"},["26"],[],{"main":"27"},["28"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["29","30"],["31"],[],["32"],{"json":"33","pairedItem":"34"},{"json":"33","pairedItem":"35"},{"update_id":483714017,"callback_query":"36"},{"item":0},{"item":0},{"id":"37","from":"38","message":"39","chat_instance":"40","data":"41"},"5918384918972855040",{"id":1377981370,"is_bot":false,"first_name":"42","username":"43","language_code":"44"},{"message_id":17,"from":"45","chat":"46","date":1762837429,"text":"47","entities":"48","link_preview_options":"49","reply_markup":"50"},"1760275626831282877","get_started","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en",{"id":8509425688,"is_bot":true,"first_name":"51","username":"52"},{"id":1377981370,"first_name":"42","username":"43","type":"53"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["54","55"],{"is_disabled":true},{"inline_keyboard":"56"},"CrisisMapper","crisismapper_bot","private",{"offset":209,"length":41,"type":"57"},{"offset":250,"length":3,"type":"58","url":"59"},["60"],"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["61"],{"text":"62","callback_data":"41"},"Get Started"]
25	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Send a text message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"cf1cb4d7-b161-4aa0-b0c9-1256953bc7c3","name":"Telegram Trigger1","webhookId":"edf1400c-7eac-4cf6-8456-c7cd4acccd11","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"339b7168-d643-4733-b3d9-cbe0f29497a5","leftValue":"={{$json[\\"data\\"]}}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"6b43aa30-d832-46be-a536-c77b44acc73a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"from\\"][\\"id\\"]}}","text":"","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"822ad1b7-b761-40c5-bc2d-ee168a3123ac","name":"Send a text message1","webhookId":"4be0ad2c-3460-4cc8-a285-e15fb715354b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Telegram Trigger1":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[{"node":"Send a text message1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"resultData":"1"},{"error":"2","runData":"3"},{"level":"4","tags":"5","timestamp":1762837796138,"context":"6","functionality":"7","name":"8","message":"9","stack":"10"},{},"warning",{},{},"regular","WorkflowHasIssuesError","The workflow has issues and cannot be executed for that reason. Please fix them first.","WorkflowHasIssuesError: The workflow has issues and cannot be executed for that reason. Please fix them first.\\n    at WorkflowExecute.checkForWorkflowIssues (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1382:10)\\n    at WorkflowExecute.processRunExecutionData (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1461:8)\\n    at WorkflowExecute.runPartialWorkflow2 (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:332:15)\\n    at ManualExecutionService.runManually (/usr/local/lib/node_modules/n8n/src/manual-execution.service.ts:175:27)\\n    at WorkflowRunner.runMainProcess (/usr/local/lib/node_modules/n8n/src/workflow-runner.ts:297:53)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at WorkflowRunner.run (/usr/local/lib/node_modules/n8n/src/workflow-runner.ts:175:4)\\n    at WorkflowExecutionService.executeManually (/usr/local/lib/node_modules/n8n/src/workflows/workflow-execution.service.ts:229:23)\\n    at WorkflowsController.runManually (/usr/local/lib/node_modules/n8n/src/workflows/workflows.controller.ts:465:10)\\n    at handler (/usr/local/lib/node_modules/n8n/src/controller.registry.ts:79:12)"]
26	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Send a text message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Telegram Trigger":"10","Send a text message":"11"},{},"Send a text message",{},[],{},["12"],["13"],{"startTime":1762838336741,"executionIndex":0,"source":"14","hints":"15","executionTime":1,"executionStatus":"16","data":"17"},{"startTime":1762838336742,"executionIndex":1,"source":"18","hints":"19","executionTime":984,"executionStatus":"16","data":"20"},[],[],"success",{"main":"21"},["22"],[],{"main":"23"},["24"],{"previousNode":"25"},["26"],["27"],"Telegram Trigger",["28"],{"json":"29","pairedItem":"30"},{"json":"31","pairedItem":"32"},{"update_id":483714019,"message":"33"},{"item":0},{"ok":true,"result":"34"},{"item":0},{"message_id":18,"from":"35","chat":"36","date":1762838334,"text":"37","entities":"38"},{"message_id":19,"from":"39","chat":"40","date":1762838337,"text":"41","entities":"42","link_preview_options":"43","reply_markup":"44"},{"id":1377981370,"is_bot":false,"first_name":"45","username":"46","language_code":"47"},{"id":1377981370,"first_name":"45","username":"46","type":"48"},"/start",["49"],{"id":8509425688,"is_bot":true,"first_name":"50","username":"51"},{"id":1377981370,"first_name":"45","username":"46","type":"48"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["52","53"],{"is_disabled":true},{"inline_keyboard":"54"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"55"},"CrisisMapper","crisismapper_bot",{"offset":209,"length":41,"type":"56"},{"offset":250,"length":3,"type":"57","url":"58"},["59"],"bot_command","italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["60"],{"text":"61","callback_data":"62"},"Get Started","get_started"]
27	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Send a text message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Telegram Trigger1","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Telegram Trigger1":"10"},{},"Telegram Trigger1",{},[],{},["11"],{"startTime":1762838535557,"executionIndex":0,"source":"12","hints":"13","executionTime":1,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714020,"callback_query":"21"},{"item":0},{"id":"22","from":"23","message":"24","chat_instance":"25","data":"26"},"5918384922499238459",{"id":1377981370,"is_bot":false,"first_name":"27","username":"28","language_code":"29"},{"message_id":19,"from":"30","chat":"31","date":1762838337,"text":"32","entities":"33","link_preview_options":"34","reply_markup":"35"},"1760275626831282877","get_started","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en",{"id":8509425688,"is_bot":true,"first_name":"36","username":"37"},{"id":1377981370,"first_name":"27","username":"28","type":"38"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["39","40"],{"is_disabled":true},{"inline_keyboard":"41"},"CrisisMapper","crisismapper_bot","private",{"offset":209,"length":41,"type":"42"},{"offset":250,"length":3,"type":"43","url":"44"},["45"],"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["46"],{"text":"47","callback_data":"26"},"Get Started"]
28	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Send a text message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Telegram Trigger1","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger1').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Send a text message1","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Telegram Trigger1":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[{"node":"Send a text message1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Send a text message1",["13","14","4"],{"Telegram Trigger1":"15","If":"16","Send a text message1":"17"},{},{},[],{},{},{},"Telegram Trigger1","If",["18"],["19"],["20"],{"startTime":1762838535557,"executionIndex":0,"source":"21","hints":"22","executionTime":1,"executionStatus":"23","data":"24"},{"startTime":1762838735220,"executionIndex":1,"source":"25","hints":"26","executionTime":6,"executionStatus":"23","data":"27"},{"startTime":1762838735227,"executionIndex":2,"source":"28","hints":"29","executionTime":1071,"executionStatus":"23","data":"30"},[],[],"success",{"main":"31"},["32"],[],{"main":"33"},["34"],[],{"main":"35"},["36"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["37","38"],{"previousNode":"14"},["39"],["40"],["41"],[],["42"],{"json":"43","pairedItem":"44"},{"json":"43","pairedItem":"45"},{"json":"46","pairedItem":"47"},{"update_id":483714020,"callback_query":"48"},{"item":0},{"item":0},{"ok":true,"result":"49"},{"item":0},{"id":"50","from":"51","message":"52","chat_instance":"53","data":"54"},{"message_id":20,"from":"55","chat":"56","date":1762838736,"text":"57","entities":"58","link_preview_options":"59"},"5918384922499238459",{"id":1377981370,"is_bot":false,"first_name":"60","username":"61","language_code":"62"},{"message_id":19,"from":"63","chat":"64","date":1762838337,"text":"65","entities":"66","link_preview_options":"67","reply_markup":"68"},"1760275626831282877","get_started",{"id":8509425688,"is_bot":true,"first_name":"69","username":"70"},{"id":1377981370,"first_name":"60","username":"61","type":"71"},"Great! What's your full name?\\n\\nThis message was sent automatically with n8n",["72","73"],{"is_disabled":true},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en",{"id":8509425688,"is_bot":true,"first_name":"69","username":"70"},{"id":1377981370,"first_name":"60","username":"61","type":"71"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["74","75"],{"is_disabled":true},{"inline_keyboard":"76"},"CrisisMapper","crisismapper_bot","private",{"offset":31,"length":41,"type":"77"},{"offset":72,"length":3,"type":"78","url":"79"},{"offset":209,"length":41,"type":"77"},{"offset":250,"length":3,"type":"78","url":"79"},["80"],"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["81"],{"text":"82","callback_data":"54"},"Get Started"]
31	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Append user name",["13","4"],{"Telegram Trigger":"14","Append user name":"15"},{},{},[],{},{},{},"Telegram Trigger",["16"],["17"],{"startTime":1762841973486,"executionIndex":0,"source":"18","hints":"19","executionTime":0,"executionStatus":"20","data":"21"},{"startTime":1762842218742,"executionIndex":1,"source":"22","hints":"23","executionTime":1451,"executionStatus":"20","data":"24"},[],[],"success",{"main":"25"},["26"],[],{"main":"27"},["28"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["29"],["30"],["31"],{"json":"32","pairedItem":"33"},{"json":"34","pairedItem":"35"},{"update_id":483714021,"message":"36"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"37","name":"38","latitude":"38","longitude":"38","description":"38","media":"38"},{"item":0},{"message_id":21,"from":"39","chat":"40","date":1762841970,"text":"41"},"waiting_for_name","",{"id":1377981370,"is_bot":false,"first_name":"42","username":"43","language_code":"44"},{"id":1377981370,"first_name":"42","username":"43","type":"45"},"Francis James A. Lagang","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
40	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Record coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach a photo by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have attachments, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2704,-96],"id":"0913c635-e6e2-46f5-9342-c601ef0aa704","name":"Ask for description and media","webhookId":"89a47dee-19c9-487a-8cf9-d1511a914824","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Look for user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","latitude":"={{ $('Record coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Record coordinates').item.json.message.location.longitude }}","current_step":"waiting_for_description"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-96],"id":"2012cdca-8dbe-47cf-a295-4f270d06be57","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Record coordinates","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2912,-96],"id":"cf35b9d3-aa1c-46a5-acd7-0fe8c5bcb3b8","name":"Record description and attachments","webhookId":"4ecbebdd-6ced-4bf3-86a7-87a7e5e7fea1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3120,-96],"id":"f13e5719-2eb0-4f41-8de1-bdc4ad76de45","name":"Get user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","description":"={{ $('Record description and attachments').item.json.message.caption }}","media":"={{ $('Record description and attachments').item.json.message.photo \\n    ? $('Record description and attachments').item.json.message.photo[$('Record description and attachments').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-96],"id":"6d3eb12f-335c-471d-8e0d-1e1ccc8f5558","name":"Update row in sheet1","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Look for user":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]},"Update user coordinates":{"main":[[{"node":"Ask for description and media","type":"main","index":0}]]},"Record coordinates":{"main":[[{"node":"Look for user","type":"main","index":0}]]},"Record description and attachments":{"main":[[{"node":"Get user","type":"main","index":0}]]},"Get user":{"main":[[{"node":"Update row in sheet1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Update row in sheet1",["13","14","4"],{"Record description and attachments":"15","Get user":"16","Update row in sheet1":"17"},{},{},[],{},{},{},"Record description and attachments","Get user",["18"],["19"],["20"],{"startTime":1762844625241,"executionIndex":0,"source":"21","hints":"22","executionTime":1,"executionStatus":"23","data":"24"},{"startTime":1762844752830,"executionIndex":1,"source":"25","hints":"26","executionTime":1421,"executionStatus":"23","data":"27"},{"startTime":1762845595898,"executionIndex":2,"source":"28","hints":"29","executionTime":2579,"executionStatus":"23","data":"30"},[],[],"success",{"main":"31"},["32"],[],{"main":"33"},["34"],[],{"main":"35"},["36"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["37"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["38"],["39"],["40"],["41"],{"json":"42","pairedItem":"43"},{"json":"44","pairedItem":"45"},{"json":"46","pairedItem":"47"},{"update_id":483714023,"message":"48"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"49","name":"50","latitude":10.391845,"longitude":123.968693,"description":"51","media":"51"},{"item":0},{"row_number":2,"description":"52","media":"53"},{"item":0},{"message_id":25,"from":"54","chat":"55","date":1762844622,"photo":"56","caption":"52"},"waiting_for_description","Francis James A. Lagang","","Power is out. All our gadgets are drained. We need someone to take us to an evacuation center ASAP.","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA",{"id":1377981370,"is_bot":false,"first_name":"57","username":"58","language_code":"59"},{"id":1377981370,"first_name":"57","username":"58","type":"60"},["61","62","63","64"],"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"file_id":"65","file_unique_id":"66","file_size":837,"width":67,"height":90},{"file_id":"67","file_unique_id":"68","file_size":10374,"width":240,"height":320},{"file_id":"69","file_unique_id":"70","file_size":59720,"width":600,"height":800},{"file_id":"53","file_unique_id":"71","file_size":79003,"width":960,"height":1280},"AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANzAAM2BA","AQADVQxrG3KrmFR4","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANtAAM2BA","AQADVQxrG3KrmFRy","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN4AAM2BA","AQADVQxrG3KrmFR9","AQADVQxrG3KrmFR-"]
29	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Append row in sheet",["13","14","4","15"],{"If":"16","Ask for name":"17","Get Started Trigger":"18","Append row in sheet":"19"},{},{},[],{},{},{},"Get Started Trigger","Ask for name","If",["20"],["21"],["22"],["23"],{"startTime":1762838735220,"executionIndex":1,"source":"24","hints":"25","executionTime":6,"executionStatus":"26","data":"27"},{"startTime":1762838735227,"executionIndex":2,"source":"28","hints":"29","executionTime":1071,"executionStatus":"26","data":"30"},{"startTime":1762838535557,"executionIndex":0,"source":"31","hints":"32","executionTime":1,"executionStatus":"26","data":"33"},{"startTime":1762841839179,"executionIndex":3,"source":"34","hints":"35","executionTime":3608,"executionStatus":"26","data":"36"},["37"],[],"success",{"main":"38"},["39"],[],{"main":"40"},[],[],{"main":"41"},["42"],[],{"main":"43"},{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["44","45"],{"previousNode":"15"},["46"],["47"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["48"],["49"],[],["50"],["51"],["52"],{"json":"53","pairedItem":"54"},{"json":"55","pairedItem":"56"},{"json":"57","pairedItem":"58"},{"json":"59","pairedItem":"60"},{"update_id":483714020,"callback_query":"61"},{"item":0},{"ok":true,"result":"62"},{"item":0},{"update_id":483714020,"callback_query":"63"},{"item":0},{"user_id":1377981370,"current_step":"64"},{"item":0},{"id":"65","from":"66","message":"67","chat_instance":"68","data":"69"},{"message_id":20,"from":"70","chat":"71","date":1762838736,"text":"72","entities":"73","link_preview_options":"74"},{"id":"65","from":"75","message":"76","chat_instance":"68","data":"69"},"waiting_for_name","5918384922499238459",{"id":1377981370,"is_bot":false,"first_name":"77","username":"78","language_code":"79"},{"message_id":19,"from":"80","chat":"81","date":1762838337,"text":"82","entities":"83","link_preview_options":"84","reply_markup":"85"},"1760275626831282877","get_started",{"id":8509425688,"is_bot":true,"first_name":"86","username":"87"},{"id":1377981370,"first_name":"77","username":"78","type":"88"},"Great! What's your full name?\\n\\nThis message was sent automatically with n8n",["89","90"],{"is_disabled":true},{"id":1377981370,"is_bot":false,"first_name":"77","username":"78","language_code":"79"},{"message_id":19,"from":"91","chat":"92","date":1762838337,"text":"82","entities":"93","link_preview_options":"94","reply_markup":"95"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en",{"id":8509425688,"is_bot":true,"first_name":"86","username":"87"},{"id":1377981370,"first_name":"77","username":"78","type":"88"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["96","97"],{"is_disabled":true},{"inline_keyboard":"98"},"CrisisMapper","crisismapper_bot","private",{"offset":31,"length":41,"type":"99"},{"offset":72,"length":3,"type":"100","url":"101"},{"id":8509425688,"is_bot":true,"first_name":"86","username":"87"},{"id":1377981370,"first_name":"77","username":"78","type":"88"},["102","103"],{"is_disabled":true},{"inline_keyboard":"104"},{"offset":209,"length":41,"type":"99"},{"offset":250,"length":3,"type":"100","url":"101"},["105"],"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",{"offset":209,"length":41,"type":"99"},{"offset":250,"length":3,"type":"100","url":"101"},["106"],["107"],["108"],{"text":"109","callback_data":"69"},{"text":"109","callback_data":"69"},"Get Started"]
30	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Telegram Trigger",{"Telegram Trigger":"10"},{},{},[],{},["11"],{"startTime":1762841973486,"executionIndex":0,"source":"12","hints":"13","executionTime":0,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714021,"message":"21"},{"item":0},{"message_id":21,"from":"22","chat":"23","date":1762841970,"text":"24"},{"id":1377981370,"is_bot":false,"first_name":"25","username":"26","language_code":"27"},{"id":1377981370,"first_name":"25","username":"26","type":"28"},"Francis James A. Lagang","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
32	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Update row in sheet",["13","14","4"],{"Telegram Trigger":"15","Append user name":"16","Update row in sheet":"17"},{},{},[],{},{},{},"Telegram Trigger","Append user name",["18"],["19"],["20"],{"startTime":1762841973486,"executionIndex":0,"source":"21","hints":"22","executionTime":0,"executionStatus":"23","data":"24"},{"startTime":1762842218742,"executionIndex":1,"source":"25","hints":"26","executionTime":1451,"executionStatus":"23","data":"27"},{"startTime":1762842557948,"executionIndex":2,"source":"28","hints":"29","executionTime":1731,"executionStatus":"23","data":"30"},[],[],"success",{"main":"31"},["32"],[],{"main":"33"},["34"],[],{"main":"35"},["36"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["37"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["38"],["39"],["40"],["41"],{"json":"42","pairedItem":"43"},{"json":"44","pairedItem":"45"},{"json":"46","pairedItem":"47"},{"update_id":483714021,"message":"48"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"49","name":"50","latitude":"50","longitude":"50","description":"50","media":"50"},{"item":0},{"row_number":2,"name":"51","current_step":"52"},{"item":0},{"message_id":21,"from":"53","chat":"54","date":1762841970,"text":"51"},"waiting_for_name","","Francis James A. Lagang","waiting_for_location",{"id":1377981370,"is_bot":false,"first_name":"55","username":"56","language_code":"57"},{"id":1377981370,"first_name":"55","username":"56","type":"58"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
33	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Send a text message","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Send a text message",["13","14","4","15"],{"Telegram Trigger":"16","Append user name":"17","Update row in sheet":"18","Send a text message":"19"},{},{},[],{},{},{},"Telegram Trigger","Update row in sheet","Append user name",["20"],["21"],["22"],["23"],{"startTime":1762841973486,"executionIndex":0,"source":"24","hints":"25","executionTime":0,"executionStatus":"26","data":"27"},{"startTime":1762842218742,"executionIndex":1,"source":"28","hints":"29","executionTime":1451,"executionStatus":"26","data":"30"},{"startTime":1762842557948,"executionIndex":2,"source":"31","hints":"32","executionTime":1731,"executionStatus":"26","data":"33"},{"startTime":1762843138289,"executionIndex":3,"source":"34","hints":"35","executionTime":1266,"executionStatus":"26","data":"36"},[],[],"success",{"main":"37"},["38"],[],{"main":"39"},["40"],[],{"main":"41"},["42"],[],{"main":"43"},["44"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["45"],{"previousNode":"15","previousNodeOutput":0,"previousNodeRun":0},["46"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["47"],["48"],["49"],["50"],["51"],{"json":"52","pairedItem":"53"},{"json":"54","pairedItem":"55"},{"json":"56","pairedItem":"57"},{"json":"58","pairedItem":"59"},{"update_id":483714021,"message":"60"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"61","name":"62","latitude":"62","longitude":"62","description":"62","media":"62"},{"item":0},{"row_number":2,"name":"63","current_step":"64"},{"item":0},{"ok":true,"result":"65"},{"item":0},{"message_id":21,"from":"66","chat":"67","date":1762841970,"text":"63"},"waiting_for_name","","Francis James A. Lagang","waiting_for_location",{"message_id":22,"from":"68","chat":"69","date":1762843139,"text":"70","entities":"71","link_preview_options":"72"},{"id":1377981370,"is_bot":false,"first_name":"73","username":"74","language_code":"75"},{"id":1377981370,"first_name":"73","username":"74","type":"76"},{"id":8509425688,"is_bot":true,"first_name":"77","username":"78"},{"id":1377981370,"first_name":"73","username":"74","type":"76"},"Thank you, Francis James A. Lagang! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.\\n\\nThis message was sent automatically with n8n",["79","80"],{"is_disabled":true},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private","CrisisMapper","crisismapper_bot",{"offset":144,"length":41,"type":"81"},{"offset":185,"length":3,"type":"82","url":"83"},"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999"]
35	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Telegram Trigger1","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Telegram Trigger1":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Update user coordinates",["13","4"],{"Telegram Trigger1":"14","Update user coordinates":"15"},{},{},[],{},{},{},"Telegram Trigger1",["16"],["17"],{"startTime":1762843288199,"executionIndex":0,"source":"18","hints":"19","executionTime":1,"executionStatus":"20","data":"21"},{"startTime":1762843468088,"executionIndex":1,"source":"22","hints":"23","executionTime":1358,"executionStatus":"20","data":"24"},[],[],"success",{"main":"25"},["26"],[],{"main":"27"},["28"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["29"],["30"],["31"],{"json":"32","pairedItem":"33"},{"json":"34","pairedItem":"35"},{"update_id":483714022,"message":"36"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"37","name":"38","latitude":"39","longitude":"39","description":"39","media":"39"},{"item":0},{"message_id":23,"from":"40","chat":"41","date":1762843285,"location":"42"},"waiting_for_location","Francis James A. Lagang","",{"id":1377981370,"is_bot":false,"first_name":"43","username":"44","language_code":"45"},{"id":1377981370,"first_name":"43","username":"44","type":"46"},{"latitude":10.391845,"longitude":123.968693},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
36	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Telegram Trigger1","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","latitude":"={{ $('Telegram Trigger1').item.json.message.location.latitude }}","longitude":"={{ $('Telegram Trigger1').item.json.message.location.longitude }}","current_step":"waiting_for_description"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-96],"id":"2012cdca-8dbe-47cf-a295-4f270d06be57","name":"Update row in sheet1","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Telegram Trigger1":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]},"Update user coordinates":{"main":[[{"node":"Update row in sheet1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Update row in sheet1",["13","14","4"],{"Telegram Trigger1":"15","Update user coordinates":"16","Update row in sheet1":"17"},{},{},[],{},{},{},"Telegram Trigger1","Update user coordinates",["18"],["19"],["20"],{"startTime":1762843288199,"executionIndex":0,"source":"21","hints":"22","executionTime":1,"executionStatus":"23","data":"24"},{"startTime":1762843468088,"executionIndex":1,"source":"25","hints":"26","executionTime":1358,"executionStatus":"23","data":"27"},{"startTime":1762843556372,"executionIndex":2,"source":"28","hints":"29","executionTime":2131,"executionStatus":"23","data":"30"},[],[],"success",{"main":"31"},["32"],[],{"main":"33"},["34"],[],{"main":"35"},["36"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["37"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["38"],["39"],["40"],["41"],{"json":"42","pairedItem":"43"},{"json":"44","pairedItem":"45"},{"json":"46","pairedItem":"47"},{"update_id":483714022,"message":"48"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"49","name":"50","latitude":"51","longitude":"51","description":"51","media":"51"},{"item":0},{"row_number":2,"latitude":10.391845,"longitude":123.968693,"current_step":"52"},{"item":0},{"message_id":23,"from":"53","chat":"54","date":1762843285,"location":"55"},"waiting_for_location","Francis James A. Lagang","","waiting_for_description",{"id":1377981370,"is_bot":false,"first_name":"56","username":"57","language_code":"58"},{"id":1377981370,"first_name":"56","username":"57","type":"59"},{"latitude":10.391845,"longitude":123.968693},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
37	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Telegram Trigger1","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","latitude":"={{ $('Telegram Trigger1').item.json.message.location.latitude }}","longitude":"={{ $('Telegram Trigger1').item.json.message.location.longitude }}","current_step":"waiting_for_description"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-96],"id":"2012cdca-8dbe-47cf-a295-4f270d06be57","name":"Update row in sheet1","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger1').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach a photo by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have attachments, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2704,-96],"id":"0913c635-e6e2-46f5-9342-c601ef0aa704","name":"Ask for description and media","webhookId":"89a47dee-19c9-487a-8cf9-d1511a914824","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Telegram Trigger1":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]},"Update user coordinates":{"main":[[{"node":"Update row in sheet1","type":"main","index":0}]]},"Update row in sheet1":{"main":[[{"node":"Ask for description and media","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Ask for description and media",["13","14","4","15"],{"Telegram Trigger1":"16","Update user coordinates":"17","Update row in sheet1":"18","Ask for description and media":"19"},{},{},[],{},{},{},"Telegram Trigger1","Update row in sheet1","Update user coordinates",["20"],["21"],["22"],["23"],{"startTime":1762843288199,"executionIndex":0,"source":"24","hints":"25","executionTime":1,"executionStatus":"26","data":"27"},{"startTime":1762843468088,"executionIndex":1,"source":"28","hints":"29","executionTime":1358,"executionStatus":"26","data":"30"},{"startTime":1762843556372,"executionIndex":2,"source":"31","hints":"32","executionTime":2131,"executionStatus":"26","data":"33"},{"startTime":1762843990550,"executionIndex":3,"source":"34","hints":"35","executionTime":1006,"executionStatus":"26","data":"36"},[],[],"success",{"main":"37"},["38"],[],{"main":"39"},["40"],[],{"main":"41"},["42"],[],{"main":"43"},["44"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["45"],{"previousNode":"15","previousNodeOutput":0,"previousNodeRun":0},["46"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["47"],["48"],["49"],["50"],["51"],{"json":"52","pairedItem":"53"},{"json":"54","pairedItem":"55"},{"json":"56","pairedItem":"57"},{"json":"58","pairedItem":"59"},{"update_id":483714022,"message":"60"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"61","name":"62","latitude":"63","longitude":"63","description":"63","media":"63"},{"item":0},{"row_number":2,"latitude":10.391845,"longitude":123.968693,"current_step":"64"},{"item":0},{"ok":true,"result":"65"},{"item":0},{"message_id":23,"from":"66","chat":"67","date":1762843285,"location":"68"},"waiting_for_location","Francis James A. Lagang","","waiting_for_description",{"message_id":24,"from":"69","chat":"70","date":1762843991,"text":"71","entities":"72","link_preview_options":"73"},{"id":1377981370,"is_bot":false,"first_name":"74","username":"75","language_code":"76"},{"id":1377981370,"first_name":"74","username":"75","type":"77"},{"latitude":10.391845,"longitude":123.968693},{"id":8509425688,"is_bot":true,"first_name":"78","username":"79"},{"id":1377981370,"first_name":"74","username":"75","type":"77"},"Please describe your situation in detail and, if possible, attach a photo by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have attachments, send both your description and photos together in one message.\\n\\nThis message was sent automatically with n8n",["80","81"],{"is_disabled":true},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private","CrisisMapper","crisismapper_bot",{"offset":215,"length":41,"type":"82"},{"offset":256,"length":3,"type":"83","url":"84"},"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999"]
38	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Record coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach a photo by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have attachments, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2704,-96],"id":"0913c635-e6e2-46f5-9342-c601ef0aa704","name":"Ask for description and media","webhookId":"89a47dee-19c9-487a-8cf9-d1511a914824","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Look for user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","latitude":"={{ $('Record coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Record coordinates').item.json.message.location.longitude }}","current_step":"waiting_for_description"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-96],"id":"2012cdca-8dbe-47cf-a295-4f270d06be57","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Record coordinates","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2912,-96],"id":"cf35b9d3-aa1c-46a5-acd7-0fe8c5bcb3b8","name":"Record description and attachments","webhookId":"4ecbebdd-6ced-4bf3-86a7-87a7e5e7fea1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Look for user":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]},"Update user coordinates":{"main":[[{"node":"Ask for description and media","type":"main","index":0}]]},"Record coordinates":{"main":[[{"node":"Look for user","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Record description and attachments",{"Record description and attachments":"10"},{},{},[],{},["11"],{"startTime":1762844625241,"executionIndex":0,"source":"12","hints":"13","executionTime":1,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714023,"message":"21"},{"item":0},{"message_id":25,"from":"22","chat":"23","date":1762844622,"photo":"24","caption":"25"},{"id":1377981370,"is_bot":false,"first_name":"26","username":"27","language_code":"28"},{"id":1377981370,"first_name":"26","username":"27","type":"29"},["30","31","32","33"],"Power is out. All our gadgets are drained. We need someone to take us to an evacuation center ASAP.","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"file_id":"34","file_unique_id":"35","file_size":837,"width":67,"height":90},{"file_id":"36","file_unique_id":"37","file_size":10374,"width":240,"height":320},{"file_id":"38","file_unique_id":"39","file_size":59720,"width":600,"height":800},{"file_id":"40","file_unique_id":"41","file_size":79003,"width":960,"height":1280},"AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANzAAM2BA","AQADVQxrG3KrmFR4","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANtAAM2BA","AQADVQxrG3KrmFRy","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN4AAM2BA","AQADVQxrG3KrmFR9","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA","AQADVQxrG3KrmFR-"]
39	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Record coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach a photo by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have attachments, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2704,-96],"id":"0913c635-e6e2-46f5-9342-c601ef0aa704","name":"Ask for description and media","webhookId":"89a47dee-19c9-487a-8cf9-d1511a914824","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Look for user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","latitude":"={{ $('Record coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Record coordinates').item.json.message.location.longitude }}","current_step":"waiting_for_description"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-96],"id":"2012cdca-8dbe-47cf-a295-4f270d06be57","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Record coordinates","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2912,-96],"id":"cf35b9d3-aa1c-46a5-acd7-0fe8c5bcb3b8","name":"Record description and attachments","webhookId":"4ecbebdd-6ced-4bf3-86a7-87a7e5e7fea1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3120,-96],"id":"f13e5719-2eb0-4f41-8de1-bdc4ad76de45","name":"Get user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Look for user":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]},"Update user coordinates":{"main":[[{"node":"Ask for description and media","type":"main","index":0}]]},"Record coordinates":{"main":[[{"node":"Look for user","type":"main","index":0}]]},"Record description and attachments":{"main":[[{"node":"Get user","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Get user",["13","4"],{"Record description and attachments":"14","Get user":"15"},{},{},[],{},{},{},"Record description and attachments",["16"],["17"],{"startTime":1762844625241,"executionIndex":0,"source":"18","hints":"19","executionTime":1,"executionStatus":"20","data":"21"},{"startTime":1762844752830,"executionIndex":1,"source":"22","hints":"23","executionTime":1421,"executionStatus":"20","data":"24"},[],[],"success",{"main":"25"},["26"],[],{"main":"27"},["28"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["29"],["30"],["31"],{"json":"32","pairedItem":"33"},{"json":"34","pairedItem":"35"},{"update_id":483714023,"message":"36"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"37","name":"38","latitude":10.391845,"longitude":123.968693,"description":"39","media":"39"},{"item":0},{"message_id":25,"from":"40","chat":"41","date":1762844622,"photo":"42","caption":"43"},"waiting_for_description","Francis James A. Lagang","",{"id":1377981370,"is_bot":false,"first_name":"44","username":"45","language_code":"46"},{"id":1377981370,"first_name":"44","username":"45","type":"47"},["48","49","50","51"],"Power is out. All our gadgets are drained. We need someone to take us to an evacuation center ASAP.","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"file_id":"52","file_unique_id":"53","file_size":837,"width":67,"height":90},{"file_id":"54","file_unique_id":"55","file_size":10374,"width":240,"height":320},{"file_id":"56","file_unique_id":"57","file_size":59720,"width":600,"height":800},{"file_id":"58","file_unique_id":"59","file_size":79003,"width":960,"height":1280},"AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANzAAM2BA","AQADVQxrG3KrmFR4","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANtAAM2BA","AQADVQxrG3KrmFRy","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN4AAM2BA","AQADVQxrG3KrmFR9","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA","AQADVQxrG3KrmFR-"]
41	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"{{ $now.toISOString() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Record coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach a photo by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have attachments, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2704,-96],"id":"0913c635-e6e2-46f5-9342-c601ef0aa704","name":"Ask for description and media","webhookId":"89a47dee-19c9-487a-8cf9-d1511a914824","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Look for user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","latitude":"={{ $('Record coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Record coordinates').item.json.message.location.longitude }}","current_step":"waiting_for_description"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-96],"id":"2012cdca-8dbe-47cf-a295-4f270d06be57","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Record coordinates","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2912,-96],"id":"cf35b9d3-aa1c-46a5-acd7-0fe8c5bcb3b8","name":"Record description and attachments","webhookId":"4ecbebdd-6ced-4bf3-86a7-87a7e5e7fea1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3120,-96],"id":"f13e5719-2eb0-4f41-8de1-bdc4ad76de45","name":"Get user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","description":"={{ $('Record description and attachments').item.json.message.caption }}","media":"={{ $('Record description and attachments').item.json.message.photo \\n    ? $('Record description and attachments').item.json.message.photo[$('Record description and attachments').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-96],"id":"6d3eb12f-335c-471d-8e0d-1e1ccc8f5558","name":"Update row in sheet1","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Look for user":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]},"Update user coordinates":{"main":[[{"node":"Ask for description and media","type":"main","index":0}]]},"Record coordinates":{"main":[[{"node":"Look for user","type":"main","index":0}]]},"Record description and attachments":{"main":[[{"node":"Get user","type":"main","index":0}]]},"Get user":{"main":[[{"node":"Update row in sheet1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"8"},{"contextData":"9","nodeExecutionStack":"10","metadata":"11","waitingExecution":"12","waitingExecutionSource":"13"},"Append row in sheet",["14","15","4","8"],{"Get Started Trigger":"16","If":"17"},{},"If",{},[],{},{},{},"Get Started Trigger","Ask for name",["18"],["19"],{"startTime":1762847045067,"executionIndex":0,"source":"20","hints":"21","executionTime":1,"executionStatus":"22","data":"23"},{"startTime":1762847045070,"executionIndex":1,"source":"24","hints":"25","executionTime":4,"executionStatus":"22","data":"26"},[],[],"success",{"main":"27"},["28"],[],{"main":"29"},["30"],{"previousNode":"14"},["31","32"],["33"],[],["34"],{"json":"35","pairedItem":"36"},{"json":"35","pairedItem":"37"},{},{"item":0},{"item":0}]
43	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"{{ $now.toISOString() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Record coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach a photo by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have attachments, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2704,-96],"id":"0913c635-e6e2-46f5-9342-c601ef0aa704","name":"Ask for description and media","webhookId":"89a47dee-19c9-487a-8cf9-d1511a914824","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Look for user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","latitude":"={{ $('Record coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Record coordinates').item.json.message.location.longitude }}","current_step":"waiting_for_description"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-96],"id":"2012cdca-8dbe-47cf-a295-4f270d06be57","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Record coordinates","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2912,-96],"id":"cf35b9d3-aa1c-46a5-acd7-0fe8c5bcb3b8","name":"Record description and attachments","webhookId":"4ecbebdd-6ced-4bf3-86a7-87a7e5e7fea1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3120,-96],"id":"f13e5719-2eb0-4f41-8de1-bdc4ad76de45","name":"Get user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","description":"={{ $('Record description and attachments').item.json.message.caption }}","media":"={{ $('Record description and attachments').item.json.message.photo \\n    ? $('Record description and attachments').item.json.message.photo[$('Record description and attachments').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-96],"id":"6d3eb12f-335c-471d-8e0d-1e1ccc8f5558","name":"Update row in sheet1","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyBFrr8BuLcP6ZhKeLFgLEDalenNlX49pUk","authentication":"predefinedCredentialType","nodeCredentialType":"googlePalmApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"contents\\": [\\n    {\\n      \\"role\\": \\"user\\",\\n      \\"parts\\": [\\n        {\\n          \\"text\\": \\"You are a disaster response assistant for a humanitarian emergency team. Classify citizen reports by urgency (High, Medium, Low), category (food, rescue, medical, power, others), and write a concise, clear summary for field volunteers. Include any safety-critical details.\\\\n\\\\nCitizen name: \\\\nLocation: {{ $('Append Row in Sheet').item.json.latitude }}, {{ $('Append Row in Sheet').item.json.longitude }}\\\\nReport: {{ $('Append Row in Sheet').item.json.description }}\\\\n\\\\nRespond ONLY in valid JSON (no comments or extra text), in this format:\\\\n{\\\\\\"urgency\\\\\\": <urgency>, \\\\\\"category\\\\\\": <category>, \\\\\\"summary\\\\\\": <summary>}\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[3536,-96],"id":"1533806a-e079-416d-adbf-133e1fa6e49e","name":"Classify and analyze report","credentials":{"googlePalmApi":{"id":"zdDZCTsALNpNUjT8","name":"Google Gemini(PaLM) Api account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Look for user":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]},"Update user coordinates":{"main":[[{"node":"Ask for description and media","type":"main","index":0}]]},"Record coordinates":{"main":[[{"node":"Look for user","type":"main","index":0}]]},"Record description and attachments":{"main":[[{"node":"Get user","type":"main","index":0}]]},"Get user":{"main":[[{"node":"Update row in sheet1","type":"main","index":0}]]},"Update row in sheet1":{"main":[[{"node":"Classify and analyze report","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"8","error":"9"},{"contextData":"10","nodeExecutionStack":"11","metadata":"12","waitingExecution":"13","waitingExecutionSource":"14"},"Classify and analyze report",["15","16","4","8"],{"Record description and attachments":"17","Get user":"18"},{},"Get user",{"message":"19","stack":"20"},{},["21"],{},{},{},"Record description and attachments","Update row in sheet1",["22"],["23"],"Cannot read properties of undefined (reading 'toString')","TypeError: Cannot read properties of undefined (reading 'toString')\\n    at GoogleSheet.lookupValues (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Google/Sheet/v2/helpers/GoogleSheet.ts:760:31)\\n    at ExecuteContext.readSheet (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Google/Sheet/v2/actions/utils/readOperation.ts:91:30)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at ExecuteContext.execute (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Google/Sheet/v2/actions/sheet/read.operation.ts:186:16)\\n    at ExecuteContext.router (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Google/Sheet/v2/actions/router.ts:64:14)\\n    at ExecuteContext.execute (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/Google/Sheet/v2/GoogleSheetsV2.node.ts:30:10)\\n    at WorkflowExecute.executeNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1093:8)\\n    at WorkflowExecute.runNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1274:11)\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1708:27\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:2324:11",{"node":"24","data":"25","source":"26"},{"startTime":1762847820940,"executionIndex":0,"source":"27","hints":"28","executionTime":1,"executionStatus":"29","data":"30"},{"startTime":1762847820941,"executionIndex":1,"source":"31","hints":"32","executionTime":1651,"executionStatus":"33","error":"34"},{"parameters":"35","type":"36","typeVersion":4.7,"position":"37","id":"38","name":"8","credentials":"39"},{"main":"40"},{"main":"31"},[],[],"success",{"main":"41"},["42"],[],"error",{"message":"19","stack":"20"},{"preBuiltAgentsCalloutGoogleSheets":"43","authentication":"44","resource":"45","operation":"46","documentId":"47","sheetName":"48","filtersUI":"49","combineFilters":"50","options":"51"},"n8n-nodes-base.googleSheets",[3120,-96],"f13e5719-2eb0-4f41-8de1-bdc4ad76de45",{"googleSheetsOAuth2Api":"52"},["53"],["54"],{"previousNode":"15"},"","oAuth2","sheet","read",{"__rl":true,"value":"55","mode":"56","cachedResultName":"57","cachedResultUrl":"58"},{"__rl":true,"value":"59","mode":"56","cachedResultName":"60","cachedResultUrl":"61"},{"values":"62"},"AND",{},{"id":"63","name":"64"},["65"],["66"],"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","list","CrisisMapper - Responses","https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk","gid=0","Sheet1","https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0",["67","68"],"bMdngHKZ99tCKomj","Google Sheets account",{"json":"69","pairedItem":"70"},{"json":"69","pairedItem":"71"},{"lookupColumn":"72","lookupValue":"73"},{"lookupColumn":"74","lookupValue":"75"},{},{"item":0},{"item":0},"user_id","={{ $json.message.chat.id }}","current_step","waiting_for_description"]
44	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"{{ $now.toISOString() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Record coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach a photo by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have attachments, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2704,-96],"id":"0913c635-e6e2-46f5-9342-c601ef0aa704","name":"Ask for description and media","webhookId":"89a47dee-19c9-487a-8cf9-d1511a914824","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Look for user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","latitude":"={{ $('Record coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Record coordinates').item.json.message.location.longitude }}","current_step":"waiting_for_description"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-96],"id":"2012cdca-8dbe-47cf-a295-4f270d06be57","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Record coordinates","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2912,-96],"id":"cf35b9d3-aa1c-46a5-acd7-0fe8c5bcb3b8","name":"Record description and attachments","webhookId":"4ecbebdd-6ced-4bf3-86a7-87a7e5e7fea1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3120,-96],"id":"f13e5719-2eb0-4f41-8de1-bdc4ad76de45","name":"Get user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","description":"={{ $('Record description and attachments').item.json.message.caption }}","media":"={{ $('Record description and attachments').item.json.message.photo \\n    ? $('Record description and attachments').item.json.message.photo[$('Record description and attachments').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-96],"id":"6d3eb12f-335c-471d-8e0d-1e1ccc8f5558","name":"Update row in sheet1","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyBFrr8BuLcP6ZhKeLFgLEDalenNlX49pUk","authentication":"predefinedCredentialType","nodeCredentialType":"googlePalmApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"contents\\": [\\n    {\\n      \\"role\\": \\"user\\",\\n      \\"parts\\": [\\n        {\\n          \\"text\\": \\"You are a disaster response assistant for a humanitarian emergency team. Classify citizen reports by urgency (High, Medium, Low), category (food, rescue, medical, power, others), and write a concise, clear summary for field volunteers. Include any safety-critical details.\\\\n\\\\nCitizen name: {{ $('Append Row in Sheet').item.json.name }}\\\\nLocation: {{ $('Append Row in Sheet').item.json.latitude }}, {{ $('Append Row in Sheet').item.json.longitude }}\\\\nReport: {{ $('Append Row in Sheet').item.json.description }}\\\\n\\\\nRespond ONLY in valid JSON (no comments or extra text), in this format:\\\\n{\\\\\\"urgency\\\\\\": <urgency>, \\\\\\"category\\\\\\": <category>, \\\\\\"summary\\\\\\": <summary>}\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[3536,-96],"id":"1533806a-e079-416d-adbf-133e1fa6e49e","name":"Classify and analyze report","credentials":{"googlePalmApi":{"id":"zdDZCTsALNpNUjT8","name":"Google Gemini(PaLM) Api account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Look for user":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]},"Update user coordinates":{"main":[[{"node":"Ask for description and media","type":"main","index":0}]]},"Record coordinates":{"main":[[{"node":"Look for user","type":"main","index":0}]]},"Record description and attachments":{"main":[[{"node":"Get user","type":"main","index":0}]]},"Get user":{"main":[[{"node":"Update row in sheet1","type":"main","index":0}]]},"Update row in sheet1":{"main":[[{"node":"Classify and analyze report","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Start":"10","Welcome Message":"11"},{},"Welcome Message",{},[],{},["12"],["13"],{"startTime":1762848036648,"executionIndex":0,"source":"14","hints":"15","executionTime":1,"executionStatus":"16","data":"17"},{"startTime":1762848036650,"executionIndex":1,"source":"18","hints":"19","executionTime":1036,"executionStatus":"16","data":"20"},[],[],"success",{"main":"21"},["22"],[],{"main":"23"},["24"],{"previousNode":"25"},["26"],["27"],"Start",["28"],{"json":"29","pairedItem":"30"},{"json":"31","pairedItem":"32"},{"update_id":483714024,"message":"33"},{"item":0},{"ok":true,"result":"34"},{"item":0},{"message_id":26,"from":"35","chat":"36","date":1762848034,"text":"37","entities":"38"},{"message_id":27,"from":"39","chat":"40","date":1762848037,"text":"41","entities":"42","link_preview_options":"43","reply_markup":"44"},{"id":1377981370,"is_bot":false,"first_name":"45","username":"46","language_code":"47"},{"id":1377981370,"first_name":"45","username":"46","type":"48"},"/start",["49"],{"id":8509425688,"is_bot":true,"first_name":"50","username":"51"},{"id":1377981370,"first_name":"45","username":"46","type":"48"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["52","53"],{"is_disabled":true},{"inline_keyboard":"54"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"55"},"CrisisMapper","crisismapper_bot",{"offset":209,"length":41,"type":"56"},{"offset":250,"length":3,"type":"57","url":"58"},["59"],"bot_command","italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["60"],{"text":"61","callback_data":"62"},"Get Started","get_started"]
46	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"{{ $now.toISOString() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Record coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach a photo by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have attachments, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2704,-96],"id":"0913c635-e6e2-46f5-9342-c601ef0aa704","name":"Ask for description and media","webhookId":"89a47dee-19c9-487a-8cf9-d1511a914824","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Look for user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","latitude":"={{ $('Record coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Record coordinates').item.json.message.location.longitude }}","current_step":"waiting_for_description"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-96],"id":"2012cdca-8dbe-47cf-a295-4f270d06be57","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Record coordinates","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2912,-96],"id":"cf35b9d3-aa1c-46a5-acd7-0fe8c5bcb3b8","name":"Record description and attachments","webhookId":"4ecbebdd-6ced-4bf3-86a7-87a7e5e7fea1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3120,-96],"id":"f13e5719-2eb0-4f41-8de1-bdc4ad76de45","name":"Get user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","description":"={{ $('Record description and attachments').item.json.message.caption }}","media":"={{ $('Record description and attachments').item.json.message.photo \\n    ? $('Record description and attachments').item.json.message.photo[$('Record description and attachments').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-96],"id":"6d3eb12f-335c-471d-8e0d-1e1ccc8f5558","name":"Update row in sheet1","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyBFrr8BuLcP6ZhKeLFgLEDalenNlX49pUk","authentication":"predefinedCredentialType","nodeCredentialType":"googlePalmApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"contents\\": [\\n    {\\n      \\"role\\": \\"user\\",\\n      \\"parts\\": [\\n        {\\n          \\"text\\": \\"You are a disaster response assistant for a humanitarian emergency team. Classify citizen reports by urgency (High, Medium, Low), category (food, rescue, medical, power, others), and write a concise, clear summary for field volunteers. Include any safety-critical details.\\\\n\\\\nCitizen name: {{ $('Append Row in Sheet').item.json.name }}\\\\nLocation: {{ $('Append Row in Sheet').item.json.latitude }}, {{ $('Append Row in Sheet').item.json.longitude }}\\\\nReport: {{ $('Append Row in Sheet').item.json.description }}\\\\n\\\\nRespond ONLY in valid JSON (no comments or extra text), in this format:\\\\n{\\\\\\"urgency\\\\\\": <urgency>, \\\\\\"category\\\\\\": <category>, \\\\\\"summary\\\\\\": <summary>}\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[3536,-96],"id":"1533806a-e079-416d-adbf-133e1fa6e49e","name":"Classify and analyze report","credentials":{"googlePalmApi":{"id":"zdDZCTsALNpNUjT8","name":"Google Gemini(PaLM) Api account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Look for user":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]},"Update user coordinates":{"main":[[{"node":"Ask for description and media","type":"main","index":0}]]},"Record coordinates":{"main":[[{"node":"Look for user","type":"main","index":0}]]},"Record description and attachments":{"main":[[{"node":"Get user","type":"main","index":0}]]},"Get user":{"main":[[{"node":"Update row in sheet1","type":"main","index":0}]]},"Update row in sheet1":{"main":[[{"node":"Classify and analyze report","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"If",["13","4"],{"Get Started Trigger":"14","If":"15"},{},{},[],{},{},{},"Get Started Trigger",["16"],["17"],{"startTime":1762848073774,"executionIndex":0,"source":"18","hints":"19","executionTime":0,"executionStatus":"20","data":"21"},{"startTime":1762848104411,"executionIndex":1,"source":"22","hints":"23","executionTime":3,"executionStatus":"20","data":"24"},[],[],"success",{"main":"25"},["26"],[],{"main":"27"},["28"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["29","30"],["31"],["32"],[],{"json":"33","pairedItem":"34"},{"json":"33","pairedItem":"35"},{"update_id":483714025,"callback_query":"36"},{"item":0},{"item":0},{"id":"37","from":"38","message":"39","chat_instance":"40","data":"41"},"5918384921269400371",{"id":1377981370,"is_bot":false,"first_name":"42","username":"43","language_code":"44"},{"message_id":27,"from":"45","chat":"46","date":1762848037,"text":"47","entities":"48","link_preview_options":"49","reply_markup":"50"},"1760275626831282877","get_started","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en",{"id":8509425688,"is_bot":true,"first_name":"51","username":"52"},{"id":1377981370,"first_name":"42","username":"43","type":"53"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["54","55"],{"is_disabled":true},{"inline_keyboard":"56"},"CrisisMapper","crisismapper_bot","private",{"offset":209,"length":41,"type":"57"},{"offset":250,"length":3,"type":"58","url":"59"},["60"],"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["61"],{"text":"62","callback_data":"41"},"Get Started"]
51	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Record coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach a photo by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have attachments, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2704,-96],"id":"0913c635-e6e2-46f5-9342-c601ef0aa704","name":"Ask for description and media","webhookId":"89a47dee-19c9-487a-8cf9-d1511a914824","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Look for user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","latitude":"={{ $('Record coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Record coordinates').item.json.message.location.longitude }}","current_step":"waiting_for_description"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-96],"id":"2012cdca-8dbe-47cf-a295-4f270d06be57","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Record coordinates","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2912,-96],"id":"cf35b9d3-aa1c-46a5-acd7-0fe8c5bcb3b8","name":"Record description and attachments","webhookId":"4ecbebdd-6ced-4bf3-86a7-87a7e5e7fea1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3120,-96],"id":"f13e5719-2eb0-4f41-8de1-bdc4ad76de45","name":"Get user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","description":"={{ $('Record description and attachments').item.json.message.caption }}","media":"={{ $('Record description and attachments').item.json.message.photo \\n    ? $('Record description and attachments').item.json.message.photo[$('Record description and attachments').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-96],"id":"6d3eb12f-335c-471d-8e0d-1e1ccc8f5558","name":"Update row in sheet1","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyBFrr8BuLcP6ZhKeLFgLEDalenNlX49pUk","authentication":"predefinedCredentialType","nodeCredentialType":"googlePalmApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"contents\\": [\\n    {\\n      \\"role\\": \\"user\\",\\n      \\"parts\\": [\\n        {\\n          \\"text\\": \\"You are a disaster response assistant for a humanitarian emergency team. Classify citizen reports by urgency (High, Medium, Low), category (food, rescue, medical, power, others), and write a concise, clear summary for field volunteers. Include any safety-critical details.\\\\n\\\\nCitizen name: {{ $('Append Row in Sheet').item.json.name }}\\\\nLocation: {{ $('Append Row in Sheet').item.json.latitude }}, {{ $('Append Row in Sheet').item.json.longitude }}\\\\nReport: {{ $('Append Row in Sheet').item.json.description }}\\\\n\\\\nRespond ONLY in valid JSON (no comments or extra text), in this format:\\\\n{\\\\\\"urgency\\\\\\": <urgency>, \\\\\\"category\\\\\\": <category>, \\\\\\"summary\\\\\\": <summary>}\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[3536,-96],"id":"1533806a-e079-416d-adbf-133e1fa6e49e","name":"Classify and analyze report","credentials":{"googlePalmApi":{"id":"zdDZCTsALNpNUjT8","name":"Google Gemini(PaLM) Api account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Look for user":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]},"Update user coordinates":{"main":[[{"node":"Ask for description and media","type":"main","index":0}]]},"Record coordinates":{"main":[[{"node":"Look for user","type":"main","index":0}]]},"Record description and attachments":{"main":[[{"node":"Get user","type":"main","index":0}]]},"Get user":{"main":[[{"node":"Update row in sheet1","type":"main","index":0}]]},"Update row in sheet1":{"main":[[{"node":"Classify and analyze report","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Start":"10","Welcome Message":"11"},{},"Welcome Message",{},[],{},["12"],["13"],{"startTime":1762848396935,"executionIndex":0,"source":"14","hints":"15","executionTime":1,"executionStatus":"16","data":"17"},{"startTime":1762848396936,"executionIndex":1,"source":"18","hints":"19","executionTime":1136,"executionStatus":"16","data":"20"},[],[],"success",{"main":"21"},["22"],[],{"main":"23"},["24"],{"previousNode":"25"},["26"],["27"],"Start",["28"],{"json":"29","pairedItem":"30"},{"json":"31","pairedItem":"32"},{"update_id":483714027,"message":"33"},{"item":0},{"ok":true,"result":"34"},{"item":0},{"message_id":30,"from":"35","chat":"36","date":1762848394,"text":"37","entities":"38"},{"message_id":31,"from":"39","chat":"40","date":1762848397,"text":"41","entities":"42","link_preview_options":"43","reply_markup":"44"},{"id":1377981370,"is_bot":false,"first_name":"45","username":"46","language_code":"47"},{"id":1377981370,"first_name":"45","username":"46","type":"48"},"/start",["49"],{"id":8509425688,"is_bot":true,"first_name":"50","username":"51"},{"id":1377981370,"first_name":"45","username":"46","type":"48"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["52","53"],{"is_disabled":true},{"inline_keyboard":"54"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"55"},"CrisisMapper","crisismapper_bot",{"offset":209,"length":41,"type":"56"},{"offset":250,"length":3,"type":"57","url":"58"},["59"],"bot_command","italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["60"],{"text":"61","callback_data":"62"},"Get Started","get_started"]
77	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.result.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"={{ $('Record Name').item.json.current_step }}"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-192],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2288,-192],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Receive Coordinates",{"Receive Coordinates":"10"},{},{},[],{},["11"],{"startTime":1762865799306,"executionIndex":0,"source":"12","hints":"13","executionTime":0,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714044,"message":"21"},{"item":0},{"message_id":55,"from":"22","chat":"23","date":1762865794,"location":"24"},{"id":1377981370,"is_bot":false,"first_name":"25","username":"26","language_code":"27"},{"id":1377981370,"first_name":"25","username":"26","type":"28"},{"latitude":10.391746,"longitude":123.968725},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
78	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.result.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"={{ $('Record Name').item.json.current_step }}"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-192],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2288,-192],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4","error":"8"},{"contextData":"9","nodeExecutionStack":"10","metadata":"11","waitingExecution":"12","waitingExecutionSource":"13"},"Find User - Location",["14","4"],{"Receive Coordinates":"15","Find User - Location":"16"},{},{"cause":"17","level":"18","tags":"19","timestamp":1762865814013,"context":"20","functionality":"21","name":"22","message":"23","stack":"24"},{},["25"],{},{},{},"Receive Coordinates",["26"],["27"],["28","29"],"warning",{},{"runIndex":0,"itemIndex":0,"messageTemplate":"30","descriptionKey":"31","type":"32","nodeCause":"33","parameter":"34"},"pairedItem","ExpressionError","Invalid expression","ExpressionError: Invalid expression\\n    at createExpressionError (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-workflow@file+packages+workflow/node_modules/n8n-workflow/src/workflow-data-proxy.ts:790:11)\\n    at createNoConnectionError (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-workflow@file+packages+workflow/node_modules/n8n-workflow/src/workflow-data-proxy.ts:833:11)\\n    at Object.get (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-workflow@file+packages+workflow/node_modules/n8n-workflow/src/workflow-data-proxy.ts:1154:17)\\n    at Proxy.eval (eval at getFunction (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/@n8n+tournament@1.0.6/node_modules/@n8n/tournament/src/FunctionEvaluator.ts:13:16), <anonymous>:6:58)\\n    at FunctionEvaluator.evaluate (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/@n8n+tournament@1.0.6/node_modules/@n8n/tournament/src/FunctionEvaluator.ts:20:13)\\n    at Tournament.execute (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/@n8n+tournament@1.0.6/node_modules/@n8n/tournament/src/index.ts:45:25)\\n    at evaluateExpression (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-workflow@file+packages+workflow/node_modules/n8n-workflow/src/expression-evaluator-proxy.ts:20:9)\\n    at Expression.renderExpression (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-workflow@file+packages+workflow/node_modules/n8n-workflow/src/expression.ts:334:29)\\n    at Expression.resolveSimpleParameterValue (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-workflow@file+packages+workflow/node_modules/n8n-workflow/src/expression.ts:315:28)\\n    at resolveParameterValue (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-workflow@file+packages+workflow/node_modules/n8n-workflow/src/expression.ts:505:16)",{"node":"35","data":"36","source":"37"},{"startTime":1762865799306,"executionIndex":0,"source":"38","hints":"39","executionTime":0,"executionStatus":"40","data":"41"},{"startTime":1762865812467,"executionIndex":1,"source":"42","hints":"43","executionTime":1826,"executionStatus":"44","error":"45"},{"lookupColumn":"46","lookupValue":"47"},{"lookupColumn":"48","lookupValue":"49"},"No path back to referenced node","pairedItemNoConnection","paired_item_no_connection","Record Name","filtersUI.values",{"parameters":"50","type":"51","typeVersion":4.7,"position":"52","id":"53","name":"4","credentials":"54"},{"main":"55"},{"main":"42"},[],[],"success",{"main":"56"},["57"],[],"error",{"cause":"17","level":"18","tags":"19","timestamp":1762865814013,"context":"20","functionality":"21","name":"22","message":"23","stack":"24"},"user_id","={{ $json.result.chat.id }}","current_step","={{ $('Record Name').item.json.current_step }}",{"preBuiltAgentsCalloutGoogleSheets":"58","authentication":"59","resource":"60","operation":"61","documentId":"62","sheetName":"63","filtersUI":"64","combineFilters":"65","options":"66"},"n8n-nodes-base.googleSheets",[2496,-192],"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d",{"googleSheetsOAuth2Api":"67"},["68"],["69"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},"","oAuth2","sheet","read",{"__rl":true,"value":"70","mode":"71","cachedResultName":"72","cachedResultUrl":"73"},{"__rl":true,"value":"74","mode":"71","cachedResultName":"75","cachedResultUrl":"76"},{"values":"17"},"AND",{},{"id":"77","name":"78"},["79"],["80"],"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","list","CrisisMapper - Responses","https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk","gid=0","Sheet1","https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0","bMdngHKZ99tCKomj","Google Sheets account",{"json":"81","pairedItem":"82"},{"json":"81","pairedItem":"83"},{"update_id":483714044,"message":"84"},{"item":0},{"item":0},{"message_id":55,"from":"85","chat":"86","date":1762865794,"location":"87"},{"id":1377981370,"is_bot":false,"first_name":"88","username":"89","language_code":"90"},{"id":1377981370,"first_name":"88","username":"89","type":"91"},{"latitude":10.391746,"longitude":123.968725},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
89	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-400],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[224,-400],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-224],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-224],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[448,-224],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,-48],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-48],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[896,-48],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[224,-224],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-48],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[448,-48],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,144],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,144],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,144],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[672,144],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,368],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,368],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"current_step":"end_of_form","row_number":"={{ $json.row_number }}","media":"={{ $('Description and Media Trigger').item.json.message.photo \\n    ? $('Description and Media Trigger').item.json.message.photo[$('Description and Media Trigger').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}\\n","description":"={{ $('Description and Media Trigger').item.json.message.caption || $('Description and Media Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,368],"id":"ed64d4df-b84d-4265-b123-ba6a51997cc6","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://api.openai.com/v1/chat/completions","authentication":"predefinedCredentialType","nodeCredentialType":"openAiApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"model\\": \\"gpt-3.5-turbo\\",\\n  \\"messages\\": [\\n    {\\"role\\": \\"system\\", \\"content\\": \\"Classify the disaster report as one of: food, rescue, medical, power, others. Also assign urgency: Low, Medium, or High. Respond with JSON like {\\\\\\"type\\\\\\":\\\\\\"...\\\\\\",\\\\\\"urgency\\\\\\":\\\\\\"...\\\\\\"}\\"},\\n    {\\"role\\": \\"user\\", \\"content\\": \\"\\"}\\n  ],\\n  \\"max_tokens\\": 30,\\n  \\"temperature\\": 0\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[656,368],"id":"258520d4-3fa9-46a0-be60-770aeea04f62","name":"HTTP Request","credentials":{"openAiApi":{"id":"p2T40GsW7EeHqQhv","name":"OpenAi account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]},"Find User - Desc & Media":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Update row in sheet",["13","14","4"],{"Description and Media Trigger":"15","Find User - Desc & Media":"16"},{},{},[],{},{},{},"Description and Media Trigger","Find User - Desc & Media",["17"],["18"],{"startTime":1762902512629,"executionIndex":0,"source":"19","hints":"20","executionTime":1,"executionStatus":"21","data":"22"},{"startTime":1762902512631,"executionIndex":1,"source":"23","hints":"24","executionTime":2478,"executionStatus":"21","data":"25"},[],[],"success",{"main":"26"},["27"],[],{"main":"28"},["29"],{"previousNode":"13"},["30"],["31"],[],{"json":"32","pairedItem":"33"},{"update_id":483714048,"message":"34"},{"item":0},{"message_id":61,"from":"35","chat":"36","date":1762902509,"photo":"37","caption":"38"},{"id":1377981370,"is_bot":false,"first_name":"39","username":"40","language_code":"41"},{"id":1377981370,"first_name":"39","username":"40","type":"42"},["43","44","45","46"],"Power is out. All our gadgets are drained. We need someone to take us to an evacuation center ASAP.","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"file_id":"47","file_unique_id":"48","file_size":837,"width":67,"height":90},{"file_id":"49","file_unique_id":"50","file_size":10374,"width":240,"height":320},{"file_id":"51","file_unique_id":"52","file_size":59720,"width":600,"height":800},{"file_id":"53","file_unique_id":"54","file_size":79003,"width":960,"height":1280},"AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANzAAM2BA","AQADVQxrG3KrmFR4","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANtAAM2BA","AQADVQxrG3KrmFRy","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN4AAM2BA","AQADVQxrG3KrmFR9","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA","AQADVQxrG3KrmFR-"]
90	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-400],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[224,-400],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-224],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-224],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[448,-224],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,-48],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-48],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[896,-48],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[224,-224],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-48],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[448,-48],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,144],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,144],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,144],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[672,144],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,368],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,368],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"current_step":"end_of_form","row_number":"={{ $json.row_number }}","media":"={{ $('Description and Media Trigger').item.json.message.photo \\n    ? $('Description and Media Trigger').item.json.message.photo[$('Description and Media Trigger').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}\\n","description":"={{ $('Description and Media Trigger').item.json.message.caption || $('Description and Media Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,368],"id":"ed64d4df-b84d-4265-b123-ba6a51997cc6","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://api.openai.com/v1/chat/completions","authentication":"predefinedCredentialType","nodeCredentialType":"openAiApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"model\\": \\"gpt-3.5-turbo\\",\\n  \\"messages\\": [\\n    {\\"role\\": \\"system\\", \\"content\\": \\"Classify the disaster report as one of: food, rescue, medical, power, others. Also assign urgency: Low, Medium, or High. Respond with JSON like {\\\\\\"type\\\\\\":\\\\\\"...\\\\\\",\\\\\\"urgency\\\\\\":\\\\\\"...\\\\\\"}\\"},\\n    {\\"role\\": \\"user\\", \\"content\\": \\"\\"}\\n  ],\\n  \\"max_tokens\\": 30,\\n  \\"temperature\\": 0\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[656,368],"id":"258520d4-3fa9-46a0-be60-770aeea04f62","name":"HTTP Request","credentials":{"openAiApi":{"id":"p2T40GsW7EeHqQhv","name":"OpenAi account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]},"Find User - Desc & Media":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"HTTP Request",["13","14","4","15"],{"Description and Media Trigger":"16","Find User - Desc & Media":"17"},{},{},[],{},{},{},"Description and Media Trigger","Update row in sheet","Find User - Desc & Media",["18"],["19"],{"startTime":1762902512629,"executionIndex":0,"source":"20","hints":"21","executionTime":1,"executionStatus":"22","data":"23"},{"startTime":1762902512631,"executionIndex":1,"source":"24","hints":"25","executionTime":2478,"executionStatus":"22","data":"26"},[],[],"success",{"main":"27"},["28"],[],{"main":"29"},["30"],{"previousNode":"13"},["31"],["32"],[],{"json":"33","pairedItem":"34"},{"update_id":483714048,"message":"35"},{"item":0},{"message_id":61,"from":"36","chat":"37","date":1762902509,"photo":"38","caption":"39"},{"id":1377981370,"is_bot":false,"first_name":"40","username":"41","language_code":"42"},{"id":1377981370,"first_name":"40","username":"41","type":"43"},["44","45","46","47"],"Power is out. All our gadgets are drained. We need someone to take us to an evacuation center ASAP.","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"file_id":"48","file_unique_id":"49","file_size":837,"width":67,"height":90},{"file_id":"50","file_unique_id":"51","file_size":10374,"width":240,"height":320},{"file_id":"52","file_unique_id":"53","file_size":59720,"width":600,"height":800},{"file_id":"54","file_unique_id":"55","file_size":79003,"width":960,"height":1280},"AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANzAAM2BA","AQADVQxrG3KrmFR4","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANtAAM2BA","AQADVQxrG3KrmFRy","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN4AAM2BA","AQADVQxrG3KrmFR9","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA","AQADVQxrG3KrmFR-"]
47	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"{{ $now.toISOString() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Record coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach a photo by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have attachments, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2704,-96],"id":"0913c635-e6e2-46f5-9342-c601ef0aa704","name":"Ask for description and media","webhookId":"89a47dee-19c9-487a-8cf9-d1511a914824","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Look for user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","latitude":"={{ $('Record coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Record coordinates').item.json.message.location.longitude }}","current_step":"waiting_for_description"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-96],"id":"2012cdca-8dbe-47cf-a295-4f270d06be57","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Record coordinates","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2912,-96],"id":"cf35b9d3-aa1c-46a5-acd7-0fe8c5bcb3b8","name":"Record description and attachments","webhookId":"4ecbebdd-6ced-4bf3-86a7-87a7e5e7fea1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3120,-96],"id":"f13e5719-2eb0-4f41-8de1-bdc4ad76de45","name":"Get user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","description":"={{ $('Record description and attachments').item.json.message.caption }}","media":"={{ $('Record description and attachments').item.json.message.photo \\n    ? $('Record description and attachments').item.json.message.photo[$('Record description and attachments').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-96],"id":"6d3eb12f-335c-471d-8e0d-1e1ccc8f5558","name":"Update row in sheet1","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyBFrr8BuLcP6ZhKeLFgLEDalenNlX49pUk","authentication":"predefinedCredentialType","nodeCredentialType":"googlePalmApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"contents\\": [\\n    {\\n      \\"role\\": \\"user\\",\\n      \\"parts\\": [\\n        {\\n          \\"text\\": \\"You are a disaster response assistant for a humanitarian emergency team. Classify citizen reports by urgency (High, Medium, Low), category (food, rescue, medical, power, others), and write a concise, clear summary for field volunteers. Include any safety-critical details.\\\\n\\\\nCitizen name: {{ $('Append Row in Sheet').item.json.name }}\\\\nLocation: {{ $('Append Row in Sheet').item.json.latitude }}, {{ $('Append Row in Sheet').item.json.longitude }}\\\\nReport: {{ $('Append Row in Sheet').item.json.description }}\\\\n\\\\nRespond ONLY in valid JSON (no comments or extra text), in this format:\\\\n{\\\\\\"urgency\\\\\\": <urgency>, \\\\\\"category\\\\\\": <category>, \\\\\\"summary\\\\\\": <summary>}\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[3536,-96],"id":"1533806a-e079-416d-adbf-133e1fa6e49e","name":"Classify and analyze report","credentials":{"googlePalmApi":{"id":"zdDZCTsALNpNUjT8","name":"Google Gemini(PaLM) Api account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Look for user":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]},"Update user coordinates":{"main":[[{"node":"Ask for description and media","type":"main","index":0}]]},"Record coordinates":{"main":[[{"node":"Look for user","type":"main","index":0}]]},"Record description and attachments":{"main":[[{"node":"Get user","type":"main","index":0}]]},"Get user":{"main":[[{"node":"Update row in sheet1","type":"main","index":0}]]},"Update row in sheet1":{"main":[[{"node":"Classify and analyze report","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Ask for name",["13","14","4"],{"Get Started Trigger":"15","If":"16","Ask for name":"17"},{},{},[],{},{},{},"Get Started Trigger","If",["18"],["19"],["20"],{"startTime":1762848073774,"executionIndex":0,"source":"21","hints":"22","executionTime":0,"executionStatus":"23","data":"24"},{"startTime":1762848104411,"executionIndex":1,"source":"25","hints":"26","executionTime":3,"executionStatus":"23","data":"27"},{"startTime":1762848115232,"executionIndex":2,"source":"28","hints":"29","executionTime":1107,"executionStatus":"23","data":"30"},[],[],"success",{"main":"31"},["32"],[],{"main":"33"},["34"],[],{"main":"35"},["36"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["37","38"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["39"],["40"],["41"],[],["42"],{"json":"43","pairedItem":"44"},{"json":"45","pairedItem":"46"},{"json":"47","pairedItem":"48"},{"update_id":483714025,"callback_query":"49"},{"item":0},{"update_id":483714025,"callback_query":"50"},{"item":0},{"ok":true,"result":"51"},{"item":0},{"id":"52","from":"53","message":"54","chat_instance":"55","data":"56"},{"id":"52","from":"57","message":"58","chat_instance":"55","data":"56"},{"message_id":28,"from":"59","chat":"60","date":1762848116,"text":"61","entities":"62","link_preview_options":"63"},"5918384921269400371",{"id":1377981370,"is_bot":false,"first_name":"64","username":"65","language_code":"66"},{"message_id":27,"from":"67","chat":"68","date":1762848037,"text":"69","entities":"70","link_preview_options":"71","reply_markup":"72"},"1760275626831282877","get_started",{"id":1377981370,"is_bot":false,"first_name":"64","username":"65","language_code":"66"},{"message_id":27,"from":"73","chat":"74","date":1762848037,"text":"69","entities":"75","link_preview_options":"76","reply_markup":"77"},{"id":8509425688,"is_bot":true,"first_name":"78","username":"79"},{"id":1377981370,"first_name":"64","username":"65","type":"80"},"Great! What's your full name?\\n\\nThis message was sent automatically with n8n",["81","82"],{"is_disabled":true},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en",{"id":8509425688,"is_bot":true,"first_name":"78","username":"79"},{"id":1377981370,"first_name":"64","username":"65","type":"80"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["83","84"],{"is_disabled":true},{"inline_keyboard":"85"},{"id":8509425688,"is_bot":true,"first_name":"78","username":"79"},{"id":1377981370,"first_name":"64","username":"65","type":"80"},["86","87"],{"is_disabled":true},{"inline_keyboard":"88"},"CrisisMapper","crisismapper_bot","private",{"offset":31,"length":41,"type":"89"},{"offset":72,"length":3,"type":"90","url":"91"},{"offset":209,"length":41,"type":"89"},{"offset":250,"length":3,"type":"90","url":"91"},["92"],{"offset":209,"length":41,"type":"89"},{"offset":250,"length":3,"type":"90","url":"91"},["93"],"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["94"],["95"],{"text":"96","callback_data":"56"},{"text":"96","callback_data":"56"},"Get Started"]
48	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"{{ $now.toISOString() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Record coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach a photo by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have attachments, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2704,-96],"id":"0913c635-e6e2-46f5-9342-c601ef0aa704","name":"Ask for description and media","webhookId":"89a47dee-19c9-487a-8cf9-d1511a914824","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Look for user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","latitude":"={{ $('Record coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Record coordinates').item.json.message.location.longitude }}","current_step":"waiting_for_description"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-96],"id":"2012cdca-8dbe-47cf-a295-4f270d06be57","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Record coordinates","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2912,-96],"id":"cf35b9d3-aa1c-46a5-acd7-0fe8c5bcb3b8","name":"Record description and attachments","webhookId":"4ecbebdd-6ced-4bf3-86a7-87a7e5e7fea1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3120,-96],"id":"f13e5719-2eb0-4f41-8de1-bdc4ad76de45","name":"Get user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","description":"={{ $('Record description and attachments').item.json.message.caption }}","media":"={{ $('Record description and attachments').item.json.message.photo \\n    ? $('Record description and attachments').item.json.message.photo[$('Record description and attachments').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-96],"id":"6d3eb12f-335c-471d-8e0d-1e1ccc8f5558","name":"Update row in sheet1","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyBFrr8BuLcP6ZhKeLFgLEDalenNlX49pUk","authentication":"predefinedCredentialType","nodeCredentialType":"googlePalmApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"contents\\": [\\n    {\\n      \\"role\\": \\"user\\",\\n      \\"parts\\": [\\n        {\\n          \\"text\\": \\"You are a disaster response assistant for a humanitarian emergency team. Classify citizen reports by urgency (High, Medium, Low), category (food, rescue, medical, power, others), and write a concise, clear summary for field volunteers. Include any safety-critical details.\\\\n\\\\nCitizen name: {{ $('Append Row in Sheet').item.json.name }}\\\\nLocation: {{ $('Append Row in Sheet').item.json.latitude }}, {{ $('Append Row in Sheet').item.json.longitude }}\\\\nReport: {{ $('Append Row in Sheet').item.json.description }}\\\\n\\\\nRespond ONLY in valid JSON (no comments or extra text), in this format:\\\\n{\\\\\\"urgency\\\\\\": <urgency>, \\\\\\"category\\\\\\": <category>, \\\\\\"summary\\\\\\": <summary>}\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[3536,-96],"id":"1533806a-e079-416d-adbf-133e1fa6e49e","name":"Classify and analyze report","credentials":{"googlePalmApi":{"id":"zdDZCTsALNpNUjT8","name":"Google Gemini(PaLM) Api account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Look for user":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]},"Update user coordinates":{"main":[[{"node":"Ask for description and media","type":"main","index":0}]]},"Record coordinates":{"main":[[{"node":"Look for user","type":"main","index":0}]]},"Record description and attachments":{"main":[[{"node":"Get user","type":"main","index":0}]]},"Get user":{"main":[[{"node":"Update row in sheet1","type":"main","index":0}]]},"Update row in sheet1":{"main":[[{"node":"Classify and analyze report","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Append row in sheet",["13","14","4","15"],{"Get Started Trigger":"16","If":"17","Ask for name":"18","Append row in sheet":"19"},{},{},[],{},{},{},"Get Started Trigger","Ask for name","If",["20"],["21"],["22"],["23"],{"startTime":1762848073774,"executionIndex":0,"source":"24","hints":"25","executionTime":0,"executionStatus":"26","data":"27"},{"startTime":1762848104411,"executionIndex":1,"source":"28","hints":"29","executionTime":3,"executionStatus":"26","data":"30"},{"startTime":1762848115232,"executionIndex":2,"source":"31","hints":"32","executionTime":1107,"executionStatus":"26","data":"33"},{"startTime":1762848136937,"executionIndex":3,"source":"34","hints":"35","executionTime":3805,"executionStatus":"26","data":"36"},[],[],"success",{"main":"37"},["38"],[],{"main":"39"},["40"],[],{"main":"41"},["42"],[],{"main":"43"},["44"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["45","46"],{"previousNode":"15","previousNodeOutput":0,"previousNodeRun":0},["47"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["48"],["49"],["50"],[],["51"],["52"],{"json":"53","pairedItem":"54"},{"json":"55","pairedItem":"56"},{"json":"57","pairedItem":"58"},{"json":"59","pairedItem":"60"},{"update_id":483714025,"callback_query":"61"},{"item":0},{"update_id":483714025,"callback_query":"62"},{"item":0},{"ok":true,"result":"63"},{"item":0},{"user_id":1377981370,"current_step":"64","timestamp":"65"},{"item":0},{"id":"66","from":"67","message":"68","chat_instance":"69","data":"70"},{"id":"66","from":"71","message":"72","chat_instance":"69","data":"70"},{"message_id":28,"from":"73","chat":"74","date":1762848116,"text":"75","entities":"76","link_preview_options":"77"},"waiting_for_name","{{ $now.toISOString() }}","5918384921269400371",{"id":1377981370,"is_bot":false,"first_name":"78","username":"79","language_code":"80"},{"message_id":27,"from":"81","chat":"82","date":1762848037,"text":"83","entities":"84","link_preview_options":"85","reply_markup":"86"},"1760275626831282877","get_started",{"id":1377981370,"is_bot":false,"first_name":"78","username":"79","language_code":"80"},{"message_id":27,"from":"87","chat":"88","date":1762848037,"text":"83","entities":"89","link_preview_options":"90","reply_markup":"91"},{"id":8509425688,"is_bot":true,"first_name":"92","username":"93"},{"id":1377981370,"first_name":"78","username":"79","type":"94"},"Great! What's your full name?\\n\\nThis message was sent automatically with n8n",["95","96"],{"is_disabled":true},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en",{"id":8509425688,"is_bot":true,"first_name":"92","username":"93"},{"id":1377981370,"first_name":"78","username":"79","type":"94"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["97","98"],{"is_disabled":true},{"inline_keyboard":"99"},{"id":8509425688,"is_bot":true,"first_name":"92","username":"93"},{"id":1377981370,"first_name":"78","username":"79","type":"94"},["100","101"],{"is_disabled":true},{"inline_keyboard":"102"},"CrisisMapper","crisismapper_bot","private",{"offset":31,"length":41,"type":"103"},{"offset":72,"length":3,"type":"104","url":"105"},{"offset":209,"length":41,"type":"103"},{"offset":250,"length":3,"type":"104","url":"105"},["106"],{"offset":209,"length":41,"type":"103"},{"offset":250,"length":3,"type":"104","url":"105"},["107"],"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["108"],["109"],{"text":"110","callback_data":"70"},{"text":"110","callback_data":"70"},"Get Started"]
49	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Record coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach a photo by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have attachments, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2704,-96],"id":"0913c635-e6e2-46f5-9342-c601ef0aa704","name":"Ask for description and media","webhookId":"89a47dee-19c9-487a-8cf9-d1511a914824","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Look for user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","latitude":"={{ $('Record coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Record coordinates').item.json.message.location.longitude }}","current_step":"waiting_for_description"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-96],"id":"2012cdca-8dbe-47cf-a295-4f270d06be57","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Record coordinates","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2912,-96],"id":"cf35b9d3-aa1c-46a5-acd7-0fe8c5bcb3b8","name":"Record description and attachments","webhookId":"4ecbebdd-6ced-4bf3-86a7-87a7e5e7fea1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3120,-96],"id":"f13e5719-2eb0-4f41-8de1-bdc4ad76de45","name":"Get user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","description":"={{ $('Record description and attachments').item.json.message.caption }}","media":"={{ $('Record description and attachments').item.json.message.photo \\n    ? $('Record description and attachments').item.json.message.photo[$('Record description and attachments').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-96],"id":"6d3eb12f-335c-471d-8e0d-1e1ccc8f5558","name":"Update row in sheet1","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyBFrr8BuLcP6ZhKeLFgLEDalenNlX49pUk","authentication":"predefinedCredentialType","nodeCredentialType":"googlePalmApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"contents\\": [\\n    {\\n      \\"role\\": \\"user\\",\\n      \\"parts\\": [\\n        {\\n          \\"text\\": \\"You are a disaster response assistant for a humanitarian emergency team. Classify citizen reports by urgency (High, Medium, Low), category (food, rescue, medical, power, others), and write a concise, clear summary for field volunteers. Include any safety-critical details.\\\\n\\\\nCitizen name: {{ $('Append Row in Sheet').item.json.name }}\\\\nLocation: {{ $('Append Row in Sheet').item.json.latitude }}, {{ $('Append Row in Sheet').item.json.longitude }}\\\\nReport: {{ $('Append Row in Sheet').item.json.description }}\\\\n\\\\nRespond ONLY in valid JSON (no comments or extra text), in this format:\\\\n{\\\\\\"urgency\\\\\\": <urgency>, \\\\\\"category\\\\\\": <category>, \\\\\\"summary\\\\\\": <summary>}\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[3536,-96],"id":"1533806a-e079-416d-adbf-133e1fa6e49e","name":"Classify and analyze report","credentials":{"googlePalmApi":{"id":"zdDZCTsALNpNUjT8","name":"Google Gemini(PaLM) Api account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Look for user":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]},"Update user coordinates":{"main":[[{"node":"Ask for description and media","type":"main","index":0}]]},"Record coordinates":{"main":[[{"node":"Look for user","type":"main","index":0}]]},"Record description and attachments":{"main":[[{"node":"Get user","type":"main","index":0}]]},"Get user":{"main":[[{"node":"Update row in sheet1","type":"main","index":0}]]},"Update row in sheet1":{"main":[[{"node":"Classify and analyze report","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Append row in sheet",["13","14","4","15"],{"Get Started Trigger":"16","If":"17","Ask for name":"18","Append row in sheet":"19"},{},{},[],{},{},{},"Get Started Trigger","Ask for name","If",["20"],["21"],["22"],["23"],{"startTime":1762848073774,"executionIndex":0,"source":"24","hints":"25","executionTime":0,"executionStatus":"26","data":"27"},{"startTime":1762848104411,"executionIndex":1,"source":"28","hints":"29","executionTime":3,"executionStatus":"26","data":"30"},{"startTime":1762848115232,"executionIndex":2,"source":"31","hints":"32","executionTime":1107,"executionStatus":"26","data":"33"},{"startTime":1762848338087,"executionIndex":3,"source":"34","hints":"35","executionTime":3951,"executionStatus":"26","data":"36"},[],[],"success",{"main":"37"},["38"],[],{"main":"39"},["40"],[],{"main":"41"},["42"],[],{"main":"43"},["44"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["45","46"],{"previousNode":"15","previousNodeOutput":0,"previousNodeRun":0},["47"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["48"],["49"],["50"],[],["51"],["52"],{"json":"53","pairedItem":"54"},{"json":"55","pairedItem":"56"},{"json":"57","pairedItem":"58"},{"json":"59","pairedItem":"60"},{"update_id":483714025,"callback_query":"61"},{"item":0},{"update_id":483714025,"callback_query":"62"},{"item":0},{"ok":true,"result":"63"},{"item":0},{"user_id":1377981370,"current_step":"64","timestamp":"65"},{"item":0},{"id":"66","from":"67","message":"68","chat_instance":"69","data":"70"},{"id":"66","from":"71","message":"72","chat_instance":"69","data":"70"},{"message_id":28,"from":"73","chat":"74","date":1762848116,"text":"75","entities":"76","link_preview_options":"77"},"waiting_for_name","2025-11-11T03:05:39.622-05:00","5918384921269400371",{"id":1377981370,"is_bot":false,"first_name":"78","username":"79","language_code":"80"},{"message_id":27,"from":"81","chat":"82","date":1762848037,"text":"83","entities":"84","link_preview_options":"85","reply_markup":"86"},"1760275626831282877","get_started",{"id":1377981370,"is_bot":false,"first_name":"78","username":"79","language_code":"80"},{"message_id":27,"from":"87","chat":"88","date":1762848037,"text":"83","entities":"89","link_preview_options":"90","reply_markup":"91"},{"id":8509425688,"is_bot":true,"first_name":"92","username":"93"},{"id":1377981370,"first_name":"78","username":"79","type":"94"},"Great! What's your full name?\\n\\nThis message was sent automatically with n8n",["95","96"],{"is_disabled":true},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en",{"id":8509425688,"is_bot":true,"first_name":"92","username":"93"},{"id":1377981370,"first_name":"78","username":"79","type":"94"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["97","98"],{"is_disabled":true},{"inline_keyboard":"99"},{"id":8509425688,"is_bot":true,"first_name":"92","username":"93"},{"id":1377981370,"first_name":"78","username":"79","type":"94"},["100","101"],{"is_disabled":true},{"inline_keyboard":"102"},"CrisisMapper","crisismapper_bot","private",{"offset":31,"length":41,"type":"103"},{"offset":72,"length":3,"type":"104","url":"105"},{"offset":209,"length":41,"type":"103"},{"offset":250,"length":3,"type":"104","url":"105"},["106"],{"offset":209,"length":41,"type":"103"},{"offset":250,"length":3,"type":"104","url":"105"},["107"],"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["108"],["109"],{"text":"110","callback_data":"70"},{"text":"110","callback_data":"70"},"Get Started"]
50	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Record coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach a photo by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have attachments, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2704,-96],"id":"0913c635-e6e2-46f5-9342-c601ef0aa704","name":"Ask for description and media","webhookId":"89a47dee-19c9-487a-8cf9-d1511a914824","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Look for user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","latitude":"={{ $('Record coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Record coordinates').item.json.message.location.longitude }}","current_step":"waiting_for_description"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-96],"id":"2012cdca-8dbe-47cf-a295-4f270d06be57","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Record coordinates","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2912,-96],"id":"cf35b9d3-aa1c-46a5-acd7-0fe8c5bcb3b8","name":"Record description and attachments","webhookId":"4ecbebdd-6ced-4bf3-86a7-87a7e5e7fea1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3120,-96],"id":"f13e5719-2eb0-4f41-8de1-bdc4ad76de45","name":"Get user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","description":"={{ $('Record description and attachments').item.json.message.caption }}","media":"={{ $('Record description and attachments').item.json.message.photo \\n    ? $('Record description and attachments').item.json.message.photo[$('Record description and attachments').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-96],"id":"6d3eb12f-335c-471d-8e0d-1e1ccc8f5558","name":"Update row in sheet1","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyBFrr8BuLcP6ZhKeLFgLEDalenNlX49pUk","authentication":"predefinedCredentialType","nodeCredentialType":"googlePalmApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"contents\\": [\\n    {\\n      \\"role\\": \\"user\\",\\n      \\"parts\\": [\\n        {\\n          \\"text\\": \\"You are a disaster response assistant for a humanitarian emergency team. Classify citizen reports by urgency (High, Medium, Low), category (food, rescue, medical, power, others), and write a concise, clear summary for field volunteers. Include any safety-critical details.\\\\n\\\\nCitizen name: {{ $('Append Row in Sheet').item.json.name }}\\\\nLocation: {{ $('Append Row in Sheet').item.json.latitude }}, {{ $('Append Row in Sheet').item.json.longitude }}\\\\nReport: {{ $('Append Row in Sheet').item.json.description }}\\\\n\\\\nRespond ONLY in valid JSON (no comments or extra text), in this format:\\\\n{\\\\\\"urgency\\\\\\": <urgency>, \\\\\\"category\\\\\\": <category>, \\\\\\"summary\\\\\\": <summary>}\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[3536,-96],"id":"1533806a-e079-416d-adbf-133e1fa6e49e","name":"Classify and analyze report","credentials":{"googlePalmApi":{"id":"zdDZCTsALNpNUjT8","name":"Google Gemini(PaLM) Api account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Look for user":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]},"Update user coordinates":{"main":[[{"node":"Ask for description and media","type":"main","index":0}]]},"Record coordinates":{"main":[[{"node":"Look for user","type":"main","index":0}]]},"Record description and attachments":{"main":[[{"node":"Get user","type":"main","index":0}]]},"Get user":{"main":[[{"node":"Update row in sheet1","type":"main","index":0}]]},"Update row in sheet1":{"main":[[{"node":"Classify and analyze report","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Append row in sheet",["13","14","4","15"],{"Get Started Trigger":"16","If":"17","Ask for name":"18","Append row in sheet":"19"},{},{},[],{},{},{},"Get Started Trigger","Ask for name","If",["20"],["21"],["22"],["23"],{"startTime":1762848073774,"executionIndex":0,"source":"24","hints":"25","executionTime":0,"executionStatus":"26","data":"27"},{"startTime":1762848104411,"executionIndex":1,"source":"28","hints":"29","executionTime":3,"executionStatus":"26","data":"30"},{"startTime":1762848115232,"executionIndex":2,"source":"31","hints":"32","executionTime":1107,"executionStatus":"26","data":"33"},{"startTime":1762848363015,"executionIndex":3,"source":"34","hints":"35","executionTime":3453,"executionStatus":"26","data":"36"},[],[],"success",{"main":"37"},["38"],[],{"main":"39"},["40"],[],{"main":"41"},["42"],[],{"main":"43"},["44"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["45","46"],{"previousNode":"15","previousNodeOutput":0,"previousNodeRun":0},["47"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["48"],["49"],["50"],[],["51"],["52"],{"json":"53","pairedItem":"54"},{"json":"55","pairedItem":"56"},{"json":"57","pairedItem":"58"},{"json":"59","pairedItem":"60"},{"update_id":483714025,"callback_query":"61"},{"item":0},{"update_id":483714025,"callback_query":"62"},{"item":0},{"ok":true,"result":"63"},{"item":0},{"user_id":1377981370,"current_step":"64","timestamp":"65"},{"item":0},{"id":"66","from":"67","message":"68","chat_instance":"69","data":"70"},{"id":"66","from":"71","message":"72","chat_instance":"69","data":"70"},{"message_id":28,"from":"73","chat":"74","date":1762848116,"text":"75","entities":"76","link_preview_options":"77"},"waiting_for_name","2025-11-11T03:06:04.344-05:00","5918384921269400371",{"id":1377981370,"is_bot":false,"first_name":"78","username":"79","language_code":"80"},{"message_id":27,"from":"81","chat":"82","date":1762848037,"text":"83","entities":"84","link_preview_options":"85","reply_markup":"86"},"1760275626831282877","get_started",{"id":1377981370,"is_bot":false,"first_name":"78","username":"79","language_code":"80"},{"message_id":27,"from":"87","chat":"88","date":1762848037,"text":"83","entities":"89","link_preview_options":"90","reply_markup":"91"},{"id":8509425688,"is_bot":true,"first_name":"92","username":"93"},{"id":1377981370,"first_name":"78","username":"79","type":"94"},"Great! What's your full name?\\n\\nThis message was sent automatically with n8n",["95","96"],{"is_disabled":true},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en",{"id":8509425688,"is_bot":true,"first_name":"92","username":"93"},{"id":1377981370,"first_name":"78","username":"79","type":"94"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["97","98"],{"is_disabled":true},{"inline_keyboard":"99"},{"id":8509425688,"is_bot":true,"first_name":"92","username":"93"},{"id":1377981370,"first_name":"78","username":"79","type":"94"},["100","101"],{"is_disabled":true},{"inline_keyboard":"102"},"CrisisMapper","crisismapper_bot","private",{"offset":31,"length":41,"type":"103"},{"offset":72,"length":3,"type":"104","url":"105"},{"offset":209,"length":41,"type":"103"},{"offset":250,"length":3,"type":"104","url":"105"},["106"],{"offset":209,"length":41,"type":"103"},{"offset":250,"length":3,"type":"104","url":"105"},["107"],"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["108"],["109"],{"text":"110","callback_data":"70"},{"text":"110","callback_data":"70"},"Get Started"]
52	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Record coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach a photo by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have attachments, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2704,-96],"id":"0913c635-e6e2-46f5-9342-c601ef0aa704","name":"Ask for description and media","webhookId":"89a47dee-19c9-487a-8cf9-d1511a914824","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Look for user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","latitude":"={{ $('Record coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Record coordinates').item.json.message.location.longitude }}","current_step":"waiting_for_description"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-96],"id":"2012cdca-8dbe-47cf-a295-4f270d06be57","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Record coordinates","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2912,-96],"id":"cf35b9d3-aa1c-46a5-acd7-0fe8c5bcb3b8","name":"Record description and attachments","webhookId":"4ecbebdd-6ced-4bf3-86a7-87a7e5e7fea1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3120,-96],"id":"f13e5719-2eb0-4f41-8de1-bdc4ad76de45","name":"Get user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","description":"={{ $('Record description and attachments').item.json.message.caption }}","media":"={{ $('Record description and attachments').item.json.message.photo \\n    ? $('Record description and attachments').item.json.message.photo[$('Record description and attachments').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-96],"id":"6d3eb12f-335c-471d-8e0d-1e1ccc8f5558","name":"Update row in sheet1","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyBFrr8BuLcP6ZhKeLFgLEDalenNlX49pUk","authentication":"predefinedCredentialType","nodeCredentialType":"googlePalmApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"contents\\": [\\n    {\\n      \\"role\\": \\"user\\",\\n      \\"parts\\": [\\n        {\\n          \\"text\\": \\"You are a disaster response assistant for a humanitarian emergency team. Classify citizen reports by urgency (High, Medium, Low), category (food, rescue, medical, power, others), and write a concise, clear summary for field volunteers. Include any safety-critical details.\\\\n\\\\nCitizen name: {{ $('Append Row in Sheet').item.json.name }}\\\\nLocation: {{ $('Append Row in Sheet').item.json.latitude }}, {{ $('Append Row in Sheet').item.json.longitude }}\\\\nReport: {{ $('Append Row in Sheet').item.json.description }}\\\\n\\\\nRespond ONLY in valid JSON (no comments or extra text), in this format:\\\\n{\\\\\\"urgency\\\\\\": <urgency>, \\\\\\"category\\\\\\": <category>, \\\\\\"summary\\\\\\": <summary>}\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[3536,-96],"id":"1533806a-e079-416d-adbf-133e1fa6e49e","name":"Classify and analyze report","credentials":{"googlePalmApi":{"id":"zdDZCTsALNpNUjT8","name":"Google Gemini(PaLM) Api account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Look for user":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]},"Update user coordinates":{"main":[[{"node":"Ask for description and media","type":"main","index":0}]]},"Record coordinates":{"main":[[{"node":"Look for user","type":"main","index":0}]]},"Record description and attachments":{"main":[[{"node":"Get user","type":"main","index":0}]]},"Get user":{"main":[[{"node":"Update row in sheet1","type":"main","index":0}]]},"Update row in sheet1":{"main":[[{"node":"Classify and analyze report","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Get Started Trigger":"10","If":"11","Ask for name":"12","Append row in sheet":"13"},{},"Append row in sheet",{},[],{},["14"],["15"],["16"],["17"],{"startTime":1762848474681,"executionIndex":0,"source":"18","hints":"19","executionTime":1,"executionStatus":"20","data":"21"},{"startTime":1762848474682,"executionIndex":1,"source":"22","hints":"23","executionTime":1,"executionStatus":"20","data":"24"},{"startTime":1762848474684,"executionIndex":2,"source":"25","hints":"26","executionTime":1005,"executionStatus":"20","data":"27"},{"startTime":1762848475690,"executionIndex":3,"source":"28","hints":"29","executionTime":3882,"executionStatus":"20","data":"30"},[],[],"success",{"main":"31"},["32"],[],{"main":"33"},["34"],[],{"main":"35"},["36"],[],{"main":"37"},["38"],{"previousNode":"39"},["40","41"],{"previousNode":"42"},["43"],{"previousNode":"44"},["45"],["46"],"Get Started Trigger",["47"],[],"If",["48"],"Ask for name",["49"],{"json":"50","pairedItem":"51"},{"json":"50","pairedItem":"52"},{"json":"53","pairedItem":"54"},{"json":"55","pairedItem":"56"},{"update_id":483714028,"callback_query":"57"},{"item":0},{"item":0},{"ok":true,"result":"58"},{"item":0},{"user_id":1377981370,"current_step":"59","timestamp":"60"},{"item":0},{"id":"61","from":"62","message":"63","chat_instance":"64","data":"65"},{"message_id":32,"from":"66","chat":"67","date":1762848475,"text":"68","entities":"69","link_preview_options":"70"},"waiting_for_name","2025-11-11T03:07:56.934-05:00","5918384921960867903",{"id":1377981370,"is_bot":false,"first_name":"71","username":"72","language_code":"73"},{"message_id":31,"from":"74","chat":"75","date":1762848397,"text":"76","entities":"77","link_preview_options":"78","reply_markup":"79"},"1760275626831282877","get_started",{"id":8509425688,"is_bot":true,"first_name":"80","username":"81"},{"id":1377981370,"first_name":"71","username":"72","type":"82"},"Great! What's your full name?\\n\\nThis message was sent automatically with n8n",["83","84"],{"is_disabled":true},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en",{"id":8509425688,"is_bot":true,"first_name":"80","username":"81"},{"id":1377981370,"first_name":"71","username":"72","type":"82"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["85","86"],{"is_disabled":true},{"inline_keyboard":"87"},"CrisisMapper","crisismapper_bot","private",{"offset":31,"length":41,"type":"88"},{"offset":72,"length":3,"type":"89","url":"90"},{"offset":209,"length":41,"type":"88"},{"offset":250,"length":3,"type":"89","url":"90"},["91"],"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["92"],{"text":"93","callback_data":"65"},"Get Started"]
53	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Record coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach a photo by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have attachments, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2704,-96],"id":"0913c635-e6e2-46f5-9342-c601ef0aa704","name":"Ask for description and media","webhookId":"89a47dee-19c9-487a-8cf9-d1511a914824","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Look for user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","latitude":"={{ $('Record coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Record coordinates').item.json.message.location.longitude }}","current_step":"waiting_for_description"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-96],"id":"2012cdca-8dbe-47cf-a295-4f270d06be57","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Record coordinates","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2912,-96],"id":"cf35b9d3-aa1c-46a5-acd7-0fe8c5bcb3b8","name":"Record description and attachments","webhookId":"4ecbebdd-6ced-4bf3-86a7-87a7e5e7fea1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3120,-96],"id":"f13e5719-2eb0-4f41-8de1-bdc4ad76de45","name":"Get user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","description":"={{ $('Record description and attachments').item.json.message.caption }}","media":"={{ $('Record description and attachments').item.json.message.photo \\n    ? $('Record description and attachments').item.json.message.photo[$('Record description and attachments').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-96],"id":"6d3eb12f-335c-471d-8e0d-1e1ccc8f5558","name":"Update row in sheet1","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyBFrr8BuLcP6ZhKeLFgLEDalenNlX49pUk","authentication":"predefinedCredentialType","nodeCredentialType":"googlePalmApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"contents\\": [\\n    {\\n      \\"role\\": \\"user\\",\\n      \\"parts\\": [\\n        {\\n          \\"text\\": \\"You are a disaster response assistant for a humanitarian emergency team. Classify citizen reports by urgency (High, Medium, Low), category (food, rescue, medical, power, others), and write a concise, clear summary for field volunteers. Include any safety-critical details.\\\\n\\\\nCitizen name: {{ $('Append Row in Sheet').item.json.name }}\\\\nLocation: {{ $('Append Row in Sheet').item.json.latitude }}, {{ $('Append Row in Sheet').item.json.longitude }}\\\\nReport: {{ $('Append Row in Sheet').item.json.description }}\\\\n\\\\nRespond ONLY in valid JSON (no comments or extra text), in this format:\\\\n{\\\\\\"urgency\\\\\\": <urgency>, \\\\\\"category\\\\\\": <category>, \\\\\\"summary\\\\\\": <summary>}\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[3536,-96],"id":"1533806a-e079-416d-adbf-133e1fa6e49e","name":"Classify and analyze report","credentials":{"googlePalmApi":{"id":"zdDZCTsALNpNUjT8","name":"Google Gemini(PaLM) Api account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Look for user":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]},"Update user coordinates":{"main":[[{"node":"Ask for description and media","type":"main","index":0}]]},"Record coordinates":{"main":[[{"node":"Look for user","type":"main","index":0}]]},"Record description and attachments":{"main":[[{"node":"Get user","type":"main","index":0}]]},"Get user":{"main":[[{"node":"Update row in sheet1","type":"main","index":0}]]},"Update row in sheet1":{"main":[[{"node":"Classify and analyze report","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Append row in sheet",["13","14","4","15"],{"Get Started Trigger":"16","If":"17","Ask for name":"18","Append row in sheet":"19"},{},{},[],{},{},{},"Get Started Trigger","Ask for name","If",["20"],["21"],["22"],["23"],{"startTime":1762848474681,"executionIndex":0,"source":"24","hints":"25","executionTime":1,"executionStatus":"26","data":"27"},{"startTime":1762848474682,"executionIndex":1,"source":"28","hints":"29","executionTime":1,"executionStatus":"26","data":"30"},{"startTime":1762848474684,"executionIndex":2,"source":"31","hints":"32","executionTime":1005,"executionStatus":"26","data":"33"},{"startTime":1762848513276,"executionIndex":3,"source":"34","hints":"35","executionTime":3870,"executionStatus":"26","data":"36"},[],[],"success",{"main":"37"},["38"],[],{"main":"39"},["40"],[],{"main":"41"},["42"],[],{"main":"43"},["44"],{"previousNode":"13"},["45","46"],{"previousNode":"15"},["47"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["48"],["49"],["50"],[],["51"],["52"],{"json":"53","pairedItem":"54"},{"json":"55","pairedItem":"56"},{"json":"57","pairedItem":"58"},{"json":"59","pairedItem":"60"},{"update_id":483714028,"callback_query":"61"},{"item":0},{"update_id":483714028,"callback_query":"62"},{"item":0},{"ok":true,"result":"63"},{"item":0},{"user_id":1377981370,"current_step":"64","timestamp":"65"},{"item":0},{"id":"66","from":"67","message":"68","chat_instance":"69","data":"70"},{"id":"66","from":"71","message":"72","chat_instance":"69","data":"70"},{"message_id":32,"from":"73","chat":"74","date":1762848475,"text":"75","entities":"76","link_preview_options":"77"},"waiting_for_name","2025-11-11T03:08:35.161-05:00","5918384921960867903",{"id":1377981370,"is_bot":false,"first_name":"78","username":"79","language_code":"80"},{"message_id":31,"from":"81","chat":"82","date":1762848397,"text":"83","entities":"84","link_preview_options":"85","reply_markup":"86"},"1760275626831282877","get_started",{"id":1377981370,"is_bot":false,"first_name":"78","username":"79","language_code":"80"},{"message_id":31,"from":"87","chat":"88","date":1762848397,"text":"83","entities":"89","link_preview_options":"90","reply_markup":"91"},{"id":8509425688,"is_bot":true,"first_name":"92","username":"93"},{"id":1377981370,"first_name":"78","username":"79","type":"94"},"Great! What's your full name?\\n\\nThis message was sent automatically with n8n",["95","96"],{"is_disabled":true},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en",{"id":8509425688,"is_bot":true,"first_name":"92","username":"93"},{"id":1377981370,"first_name":"78","username":"79","type":"94"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["97","98"],{"is_disabled":true},{"inline_keyboard":"99"},{"id":8509425688,"is_bot":true,"first_name":"92","username":"93"},{"id":1377981370,"first_name":"78","username":"79","type":"94"},["100","101"],{"is_disabled":true},{"inline_keyboard":"102"},"CrisisMapper","crisismapper_bot","private",{"offset":31,"length":41,"type":"103"},{"offset":72,"length":3,"type":"104","url":"105"},{"offset":209,"length":41,"type":"103"},{"offset":250,"length":3,"type":"104","url":"105"},["106"],{"offset":209,"length":41,"type":"103"},{"offset":250,"length":3,"type":"104","url":"105"},["107"],"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["108"],["109"],{"text":"110","callback_data":"70"},{"text":"110","callback_data":"70"},"Get Started"]
54	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"70ea5326-d600-4392-ba44-fbd49bb800fc","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"3d60760c-717a-4017-820a-229823e26e3a","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Get Started Trigger').item.json.callback_query.from.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"e424c67d-03e0-472b-a97b-9ff4734ef412","name":"Ask for name","webhookId":"53fe793b-9884-4ad5-89b4-675d6602f9be","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"249b81eb-cc14-4e02-a81a-4f753c09f5f8","name":"Get Started Trigger","webhookId":"5e19ed0d-be92-4938-a757-9a76de71856c","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{$json[\\"message\\"][\\"chat\\"][\\"id\\"] || $json[\\"from\\"][\\"id\\"]}}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"85aa6592-db5f-4d17-a4e0-33575b368c75","name":"Welcome Message","webhookId":"860b1154-bc6f-4c6d-bda0-32652b2f985d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"4861133e-9b8c-4a20-a406-f16c6fa84447","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"2395ee0f-b195-4c95-b2ed-eff9740bc538","name":"Telegram Trigger","webhookId":"88d79364-046d-4359-bcdd-4c86e1b976aa","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"eb20790f-ce3e-43ba-b755-4c7c93c21a22","name":"Append user name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","name":"={{ $('Telegram Trigger').item.json.message.text }}","current_step":"waiting_for_location"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1664,-96],"id":"155d6fb7-f8eb-4957-9dd9-44b11664712a","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $('Telegram Trigger').item.json.message.text }}! Now, please tap the paperclip or map pin and send your current location using Telegram's location feature.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1872,-96],"id":"227cef35-6ac1-4164-96dc-4c94a18d9eb3","name":"Ask for location","webhookId":"85185893-e2d2-4cf9-9ab1-2a4ea7e92b56","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Record coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach a photo by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have attachments, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2704,-96],"id":"0913c635-e6e2-46f5-9342-c601ef0aa704","name":"Ask for description and media","webhookId":"89a47dee-19c9-487a-8cf9-d1511a914824","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-96],"id":"942cefb3-4be6-4ccd-9153-09b9100761c8","name":"Look for user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","latitude":"={{ $('Record coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Record coordinates').item.json.message.location.longitude }}","current_step":"waiting_for_description"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-96],"id":"2012cdca-8dbe-47cf-a295-4f270d06be57","name":"Update user coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2080,-96],"id":"6ac5d273-42d8-4e55-b986-5dc14b81351a","name":"Record coordinates","webhookId":"8398d144-4e9c-4080-8d1f-4834ad82d78b","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2912,-96],"id":"cf35b9d3-aa1c-46a5-acd7-0fe8c5bcb3b8","name":"Record description and attachments","webhookId":"4ecbebdd-6ced-4bf3-86a7-87a7e5e7fea1","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3120,-96],"id":"f13e5719-2eb0-4f41-8de1-bdc4ad76de45","name":"Get user","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","description":"={{ $('Record description and attachments').item.json.message.caption }}","media":"={{ $('Record description and attachments').item.json.message.photo \\n    ? $('Record description and attachments').item.json.message.photo[$('Record description and attachments').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-96],"id":"6d3eb12f-335c-471d-8e0d-1e1ccc8f5558","name":"Update row in sheet1","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyBFrr8BuLcP6ZhKeLFgLEDalenNlX49pUk","authentication":"predefinedCredentialType","nodeCredentialType":"googlePalmApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"contents\\": [\\n    {\\n      \\"role\\": \\"user\\",\\n      \\"parts\\": [\\n        {\\n          \\"text\\": \\"You are a disaster response assistant for a humanitarian emergency team. Classify citizen reports by urgency (High, Medium, Low), category (food, rescue, medical, power, others), and write a concise, clear summary for field volunteers. Include any safety-critical details.\\\\n\\\\nCitizen name: {{ $('Append Row in Sheet').item.json.name }}\\\\nLocation: {{ $('Append Row in Sheet').item.json.latitude }}, {{ $('Append Row in Sheet').item.json.longitude }}\\\\nReport: {{ $('Append Row in Sheet').item.json.description }}\\\\n\\\\nRespond ONLY in valid JSON (no comments or extra text), in this format:\\\\n{\\\\\\"urgency\\\\\\": <urgency>, \\\\\\"category\\\\\\": <category>, \\\\\\"summary\\\\\\": <summary>}\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[3536,-96],"id":"1533806a-e079-416d-adbf-133e1fa6e49e","name":"Classify and analyze report","credentials":{"googlePalmApi":{"id":"zdDZCTsALNpNUjT8","name":"Google Gemini(PaLM) Api account"}}}],"connections":{"If":{"main":[[{"node":"Ask for name","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Start":{"main":[[{"node":"Welcome Message","type":"main","index":0}]]},"Ask for name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Append user name","type":"main","index":0}]]},"Append user name":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"Ask for location","type":"main","index":0}]]},"Look for user":{"main":[[{"node":"Update user coordinates","type":"main","index":0}]]},"Update user coordinates":{"main":[[{"node":"Ask for description and media","type":"main","index":0}]]},"Record coordinates":{"main":[[{"node":"Look for user","type":"main","index":0}]]},"Record description and attachments":{"main":[[{"node":"Get user","type":"main","index":0}]]},"Get user":{"main":[[{"node":"Update row in sheet1","type":"main","index":0}]]},"Update row in sheet1":{"main":[[{"node":"Classify and analyze report","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Start":"10","Welcome Message":"11"},{},"Welcome Message",{},[],{},["12"],["13"],{"startTime":1762848541151,"executionIndex":0,"source":"14","hints":"15","executionTime":1,"executionStatus":"16","data":"17"},{"startTime":1762848541153,"executionIndex":1,"source":"18","hints":"19","executionTime":1146,"executionStatus":"16","data":"20"},[],[],"success",{"main":"21"},["22"],[],{"main":"23"},["24"],{"previousNode":"25"},["26"],["27"],"Start",["28"],{"json":"29","pairedItem":"30"},{"json":"31","pairedItem":"32"},{"update_id":483714029,"message":"33"},{"item":0},{"ok":true,"result":"34"},{"item":0},{"message_id":34,"from":"35","chat":"36","date":1762848536,"text":"37","entities":"38"},{"message_id":35,"from":"39","chat":"40","date":1762848542,"text":"41","entities":"42","link_preview_options":"43","reply_markup":"44"},{"id":1377981370,"is_bot":false,"first_name":"45","username":"46","language_code":"47"},{"id":1377981370,"first_name":"45","username":"46","type":"48"},"/start",["49"],{"id":8509425688,"is_bot":true,"first_name":"50","username":"51"},{"id":1377981370,"first_name":"45","username":"46","type":"48"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["52","53"],{"is_disabled":true},{"inline_keyboard":"54"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"55"},"CrisisMapper","crisismapper_bot",{"offset":209,"length":41,"type":"56"},{"offset":250,"length":3,"type":"57","url":"58"},["59"],"bot_command","italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["60"],{"text":"61","callback_data":"62"},"Get Started","get_started"]
58	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send a text message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Send a text message",["13","4"],{"Telegram Trigger":"14","Send a text message":"15"},{},{},[],{},{},{},"Telegram Trigger",["16"],["17"],{"startTime":1762858995531,"executionIndex":0,"source":"18","hints":"19","executionTime":1,"executionStatus":"20","data":"21"},{"startTime":1762859077189,"executionIndex":1,"source":"22","hints":"23","executionTime":1003,"executionStatus":"20","data":"24"},[],[],"success",{"main":"25"},["26"],[],{"main":"27"},["28"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["29"],["30"],["31"],{"json":"32","pairedItem":"33"},{"json":"34","pairedItem":"35"},{"update_id":483714032,"message":"36"},{"item":0},{"ok":true,"result":"37"},{"item":0},{"message_id":38,"from":"38","chat":"39","date":1762858992,"text":"40","entities":"41"},{"message_id":39,"from":"42","chat":"43","date":1762859077,"text":"44","entities":"45","link_preview_options":"46","reply_markup":"47"},{"id":1377981370,"is_bot":false,"first_name":"48","username":"49","language_code":"50"},{"id":1377981370,"first_name":"48","username":"49","type":"51"},"/start",["52"],{"id":8509425688,"is_bot":true,"first_name":"53","username":"54"},{"id":1377981370,"first_name":"48","username":"49","type":"51"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["55","56"],{"is_disabled":true},{"inline_keyboard":"57"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"58"},"CrisisMapper","crisismapper_bot",{"offset":209,"length":41,"type":"59"},{"offset":250,"length":3,"type":"60","url":"61"},["62"],"bot_command","italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["63"],{"text":"64","callback_data":"65"},"Get Started","get_started"]
65	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"If"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"If":{"main":[[]]},"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Get Started Trigger":"10","If":"11"},{},"If",{},[],{},["12"],["13"],{"startTime":1762862853142,"executionIndex":0,"source":"14","hints":"15","executionTime":0,"executionStatus":"16","data":"17"},{"startTime":1762862853142,"executionIndex":1,"source":"18","hints":"19","executionTime":2,"executionStatus":"16","data":"20"},[],[],"success",{"main":"21"},["22"],[],{"main":"23"},["24"],{"previousNode":"25"},["26","27"],["28"],"Get Started Trigger",["29"],[],{"json":"30","pairedItem":"31"},{"json":"30","pairedItem":"32"},{"update_id":483714039,"callback_query":"33"},{"item":0},{"item":0},{"id":"34","from":"35","message":"36","chat_instance":"37","data":"38"},"5918384921937550203",{"id":1377981370,"is_bot":false,"first_name":"39","username":"40","language_code":"41"},{"message_id":45,"from":"42","chat":"43","date":1762862817,"text":"44","entities":"45","link_preview_options":"46","reply_markup":"47"},"1760275626831282877","get_started","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en",{"id":8509425688,"is_bot":true,"first_name":"48","username":"49"},{"id":1377981370,"first_name":"39","username":"40","type":"50"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["51","52"],{"is_disabled":true},{"inline_keyboard":"53"},"CrisisMapper","crisismapper_bot","private",{"offset":209,"length":41,"type":"54"},{"offset":250,"length":3,"type":"55","url":"56"},["57"],"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["58"],{"text":"59","callback_data":"38"},"Get Started"]
69	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"If"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Telegram Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}],"connections":{"If":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Telegram Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Find User",["13","4"],{"Telegram Trigger":"14","Find User":"15"},{},{},[],{},{},{},"Telegram Trigger",["16"],["17"],{"startTime":1762863811485,"executionIndex":0,"source":"18","hints":"19","executionTime":1,"executionStatus":"20","data":"21"},{"startTime":1762863951002,"executionIndex":1,"source":"22","hints":"23","executionTime":984,"executionStatus":"20","data":"24"},[],[],"success",{"main":"25"},["26"],[],{"main":"27"},["28"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["29"],["30"],["31"],{"json":"32","pairedItem":"33"},{"json":"34","pairedItem":"35"},{"update_id":483714040,"message":"36"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"37","name":"38","latitude":"38","longitude":"38","description":"38","media":"38","timestamp":"39"},{"item":0},{"message_id":48,"from":"40","chat":"41","date":1762863809,"text":"42"},"waiting_for_name","","2025-11-11T07:21:01.406-05:00",{"id":1377981370,"is_bot":false,"first_name":"43","username":"44","language_code":"45"},{"id":1377981370,"first_name":"43","username":"44","type":"46"},"Francis James A. Lagang","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
55	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"","text":"","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"afccb652-0129-4dbc-a60b-cde796685c01","name":"Send a text message","webhookId":"3a9b3538-e456-4830-bfe2-f3250fde569a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"resultData":"1"},{"error":"2","runData":"3"},{"level":"4","tags":"5","timestamp":1762858712538,"context":"6","functionality":"7","name":"8","message":"9","stack":"10"},{},"warning",{},{},"regular","WorkflowHasIssuesError","The workflow has issues and cannot be executed for that reason. Please fix them first.","WorkflowHasIssuesError: The workflow has issues and cannot be executed for that reason. Please fix them first.\\n    at WorkflowExecute.checkForWorkflowIssues (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1382:10)\\n    at WorkflowExecute.processRunExecutionData (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1461:8)\\n    at WorkflowRunner.runMainProcess (/usr/local/lib/node_modules/n8n/src/workflow-runner.ts:295:41)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at WorkflowRunner.run (/usr/local/lib/node_modules/n8n/src/workflow-runner.ts:175:4)\\n    at Object.executeWebhook (/usr/local/lib/node_modules/n8n/src/webhooks/webhook-helpers.ts:626:17)\\n    at /usr/local/lib/node_modules/n8n/src/webhooks/test-webhooks.ts:126:25"]
56	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"","text":"","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"afccb652-0129-4dbc-a60b-cde796685c01","name":"Send a text message","webhookId":"3a9b3538-e456-4830-bfe2-f3250fde569a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Telegram Trigger",{"Telegram Trigger":"10"},{},{},[],{},["11"],{"startTime":1762858736227,"executionIndex":0,"source":"12","hints":"13","executionTime":1,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714031,"message":"21"},{"item":0},{"message_id":37,"from":"22","chat":"23","date":1762858733,"text":"24","entities":"25"},{"id":1377981370,"is_bot":false,"first_name":"26","username":"27","language_code":"28"},{"id":1377981370,"first_name":"26","username":"27","type":"29"},"/start",["30"],"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"31"},"bot_command"]
57	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Telegram Trigger",{"Telegram Trigger":"10"},{},{},[],{},["11"],{"startTime":1762858995531,"executionIndex":0,"source":"12","hints":"13","executionTime":1,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714032,"message":"21"},{"item":0},{"message_id":38,"from":"22","chat":"23","date":1762858992,"text":"24","entities":"25"},{"id":1377981370,"is_bot":false,"first_name":"26","username":"27","language_code":"28"},{"id":1377981370,"first_name":"26","username":"27","type":"29"},"/start",["30"],"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"31"},"bot_command"]
59	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send a text message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Telegram Trigger":"10","Send a text message":"11"},{},"Send a text message",{},[],{},["12"],["13"],{"startTime":1762860938311,"executionIndex":0,"source":"14","hints":"15","executionTime":1,"executionStatus":"16","data":"17"},{"startTime":1762860938312,"executionIndex":1,"source":"18","hints":"19","executionTime":1719,"executionStatus":"16","data":"20"},[],[],"success",{"main":"21"},["22"],[],{"main":"23"},["24"],{"previousNode":"25"},["26"],["27"],"Telegram Trigger",["28"],{"json":"29","pairedItem":"30"},{"json":"31","pairedItem":"32"},{"update_id":483714033,"message":"33"},{"item":0},{"ok":true,"result":"34"},{"item":0},{"message_id":40,"from":"35","chat":"36","date":1762860933,"text":"37","entities":"38"},{"message_id":41,"from":"39","chat":"40","date":1762860939,"text":"41","entities":"42","link_preview_options":"43","reply_markup":"44"},{"id":1377981370,"is_bot":false,"first_name":"45","username":"46","language_code":"47"},{"id":1377981370,"first_name":"45","username":"46","type":"48"},"/start",["49"],{"id":8509425688,"is_bot":true,"first_name":"50","username":"51"},{"id":1377981370,"first_name":"45","username":"46","type":"48"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["52","53"],{"is_disabled":true},{"inline_keyboard":"54"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"55"},"CrisisMapper","crisismapper_bot",{"offset":209,"length":41,"type":"56"},{"offset":250,"length":3,"type":"57","url":"58"},["59"],"bot_command","italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["60"],{"text":"61","callback_data":"62"},"Get Started","get_started"]
60	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send a text message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Telegram Trigger1","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Telegram Trigger1",{"Telegram Trigger1":"10"},{},{},[],{},["11"],{"startTime":1762861299846,"executionIndex":0,"source":"12","hints":"13","executionTime":2,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714034,"callback_query":"21"},{"item":0},{"id":"22","from":"23","message":"24","chat_instance":"25","data":"26"},"5918384920241591491",{"id":1377981370,"is_bot":false,"first_name":"27","username":"28","language_code":"29"},{"message_id":41,"from":"30","chat":"31","date":1762860939,"text":"32","entities":"33","link_preview_options":"34","reply_markup":"35"},"1760275626831282877","get_started","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en",{"id":8509425688,"is_bot":true,"first_name":"36","username":"37"},{"id":1377981370,"first_name":"27","username":"28","type":"38"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["39","40"],{"is_disabled":true},{"inline_keyboard":"41"},"CrisisMapper","crisismapper_bot","private",{"offset":209,"length":41,"type":"42"},{"offset":250,"length":3,"type":"43","url":"44"},["45"],"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["46"],{"text":"47","callback_data":"26"},"Get Started"]
61	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send a text message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Telegram Trigger1","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=","text":"","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"1de0d934-a7e3-48dc-97f1-0669babc5720","name":"Send a text message1","webhookId":"308e6fb3-3f64-4d67-aec8-90637a50a5c7","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Telegram Trigger1":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[{"node":"Send a text message1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"resultData":"1"},{"error":"2","runData":"3"},{"level":"4","tags":"5","timestamp":1762861504835,"context":"6","functionality":"7","name":"8","message":"9","stack":"10"},{},"warning",{},{},"regular","WorkflowHasIssuesError","The workflow has issues and cannot be executed for that reason. Please fix them first.","WorkflowHasIssuesError: The workflow has issues and cannot be executed for that reason. Please fix them first.\\n    at WorkflowExecute.checkForWorkflowIssues (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1382:10)\\n    at WorkflowExecute.processRunExecutionData (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1461:8)\\n    at WorkflowExecute.runPartialWorkflow2 (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:332:15)\\n    at ManualExecutionService.runManually (/usr/local/lib/node_modules/n8n/src/manual-execution.service.ts:175:27)\\n    at WorkflowRunner.runMainProcess (/usr/local/lib/node_modules/n8n/src/workflow-runner.ts:297:53)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at WorkflowRunner.run (/usr/local/lib/node_modules/n8n/src/workflow-runner.ts:175:4)\\n    at WorkflowExecutionService.executeManually (/usr/local/lib/node_modules/n8n/src/workflows/workflow-execution.service.ts:229:23)\\n    at WorkflowsController.runManually (/usr/local/lib/node_modules/n8n/src/workflows/workflows.controller.ts:465:10)\\n    at handler (/usr/local/lib/node_modules/n8n/src/controller.registry.ts:79:12)"]
62	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send a text message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Telegram Trigger1","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=","text":"","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"1de0d934-a7e3-48dc-97f1-0669babc5720","name":"Send a text message1","webhookId":"308e6fb3-3f64-4d67-aec8-90637a50a5c7","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Telegram Trigger1":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[{"node":"Send a text message1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Telegram Trigger":"10","Send a text message":"11"},{},"Send a text message",{},[],{},["12"],["13"],{"startTime":1762862442627,"executionIndex":0,"source":"14","hints":"15","executionTime":1,"executionStatus":"16","data":"17"},{"startTime":1762862442628,"executionIndex":1,"source":"18","hints":"19","executionTime":995,"executionStatus":"16","data":"20"},[],[],"success",{"main":"21"},["22"],[],{"main":"23"},["24"],{"previousNode":"25"},["26"],["27"],"Telegram Trigger",["28"],{"json":"29","pairedItem":"30"},{"json":"31","pairedItem":"32"},{"update_id":483714036,"message":"33"},{"item":0},{"ok":true,"result":"34"},{"item":0},{"message_id":42,"from":"35","chat":"36","date":1762862439,"text":"37","entities":"38"},{"message_id":43,"from":"39","chat":"40","date":1762862443,"text":"41","entities":"42","link_preview_options":"43","reply_markup":"44"},{"id":1377981370,"is_bot":false,"first_name":"45","username":"46","language_code":"47"},{"id":1377981370,"first_name":"45","username":"46","type":"48"},"/start",["49"],{"id":8509425688,"is_bot":true,"first_name":"50","username":"51"},{"id":1377981370,"first_name":"45","username":"46","type":"48"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["52","53"],{"is_disabled":true},{"inline_keyboard":"54"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"55"},"CrisisMapper","crisismapper_bot",{"offset":209,"length":41,"type":"56"},{"offset":250,"length":3,"type":"57","url":"58"},["59"],"bot_command","italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["60"],{"text":"61","callback_data":"62"},"Get Started","get_started"]
63	{"id":"EXVIlWqfZ2MPIEOk","name":"My workflow","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send a text message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Telegram Trigger1","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"If"},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"=","text":"","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"1de0d934-a7e3-48dc-97f1-0669babc5720","name":"Send a text message1","webhookId":"308e6fb3-3f64-4d67-aec8-90637a50a5c7","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Telegram Trigger1":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[{"node":"Send a text message1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"resultData":"1"},{"error":"2","runData":"3"},{"level":"4","tags":"5","timestamp":1762862466287,"context":"6","functionality":"7","name":"8","message":"9","stack":"10"},{},"warning",{},{},"regular","WorkflowHasIssuesError","The workflow has issues and cannot be executed for that reason. Please fix them first.","WorkflowHasIssuesError: The workflow has issues and cannot be executed for that reason. Please fix them first.\\n    at WorkflowExecute.checkForWorkflowIssues (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1382:10)\\n    at WorkflowExecute.processRunExecutionData (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1461:8)\\n    at WorkflowRunner.runMainProcess (/usr/local/lib/node_modules/n8n/src/workflow-runner.ts:295:41)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at WorkflowRunner.run (/usr/local/lib/node_modules/n8n/src/workflow-runner.ts:175:4)\\n    at Object.executeWebhook (/usr/local/lib/node_modules/n8n/src/webhooks/webhook-helpers.ts:626:17)\\n    at /usr/local/lib/node_modules/n8n/src/webhooks/test-webhooks.ts:126:25"]
64	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"If"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"If":{"main":[[]]},"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Start":"10","Send Welcome Message":"11"},{},"Send Welcome Message",{},[],{},["12"],["13"],{"startTime":1762862816365,"executionIndex":0,"source":"14","hints":"15","executionTime":1,"executionStatus":"16","data":"17"},{"startTime":1762862816366,"executionIndex":1,"source":"18","hints":"19","executionTime":1002,"executionStatus":"16","data":"20"},[],[],"success",{"main":"21"},["22"],[],{"main":"23"},["24"],{"previousNode":"25"},["26"],["27"],"Start",["28"],{"json":"29","pairedItem":"30"},{"json":"31","pairedItem":"32"},{"update_id":483714038,"message":"33"},{"item":0},{"ok":true,"result":"34"},{"item":0},{"message_id":44,"from":"35","chat":"36","date":1762862814,"text":"37","entities":"38"},{"message_id":45,"from":"39","chat":"40","date":1762862817,"text":"41","entities":"42","link_preview_options":"43","reply_markup":"44"},{"id":1377981370,"is_bot":false,"first_name":"45","username":"46","language_code":"47"},{"id":1377981370,"first_name":"45","username":"46","type":"48"},"/start",["49"],{"id":8509425688,"is_bot":true,"first_name":"50","username":"51"},{"id":1377981370,"first_name":"45","username":"46","type":"48"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["52","53"],{"is_disabled":true},{"inline_keyboard":"54"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"55"},"CrisisMapper","crisismapper_bot",{"offset":209,"length":41,"type":"56"},{"offset":250,"length":3,"type":"57","url":"58"},["59"],"bot_command","italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["60"],{"text":"61","callback_data":"62"},"Get Started","get_started"]
66	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"If"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Send a text message","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"If":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Send a text message",["13","14","4"],{"Get Started Trigger":"15","If":"16","Send a text message":"17"},{},{},[],{},{},{},"Get Started Trigger","If",["18"],["19"],["20"],{"startTime":1762862853142,"executionIndex":0,"source":"21","hints":"22","executionTime":0,"executionStatus":"23","data":"24"},{"startTime":1762862853142,"executionIndex":1,"source":"25","hints":"26","executionTime":2,"executionStatus":"23","data":"27"},{"startTime":1762863361624,"executionIndex":2,"source":"28","hints":"29","executionTime":1036,"executionStatus":"23","data":"30"},[],[],"success",{"main":"31"},["32"],[],{"main":"33"},["34"],[],{"main":"35"},["36"],{"previousNode":"13"},["37","38"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["39"],["40"],["41"],[],["42"],{"json":"43","pairedItem":"44"},{"json":"45","pairedItem":"46"},{"json":"47","pairedItem":"48"},{"update_id":483714039,"callback_query":"49"},{"item":0},{"update_id":483714039,"callback_query":"50"},{"item":0},{"ok":true,"result":"51"},{"item":0},{"id":"52","from":"53","message":"54","chat_instance":"55","data":"56"},{"id":"52","from":"57","message":"58","chat_instance":"55","data":"56"},{"message_id":46,"from":"59","chat":"60","date":1762863362,"text":"61","entities":"62","link_preview_options":"63"},"5918384921937550203",{"id":1377981370,"is_bot":false,"first_name":"64","username":"65","language_code":"66"},{"message_id":45,"from":"67","chat":"68","date":1762862817,"text":"69","entities":"70","link_preview_options":"71","reply_markup":"72"},"1760275626831282877","get_started",{"id":1377981370,"is_bot":false,"first_name":"64","username":"65","language_code":"66"},{"message_id":45,"from":"73","chat":"74","date":1762862817,"text":"69","entities":"75","link_preview_options":"76","reply_markup":"77"},{"id":8509425688,"is_bot":true,"first_name":"78","username":"79"},{"id":1377981370,"first_name":"64","username":"65","type":"80"},"Great! What's your full name?\\n\\nThis message was sent automatically with n8n",["81","82"],{"is_disabled":true},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en",{"id":8509425688,"is_bot":true,"first_name":"78","username":"79"},{"id":1377981370,"first_name":"64","username":"65","type":"80"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["83","84"],{"is_disabled":true},{"inline_keyboard":"85"},{"id":8509425688,"is_bot":true,"first_name":"78","username":"79"},{"id":1377981370,"first_name":"64","username":"65","type":"80"},["86","87"],{"is_disabled":true},{"inline_keyboard":"88"},"CrisisMapper","crisismapper_bot","private",{"offset":31,"length":41,"type":"89"},{"offset":72,"length":3,"type":"90","url":"91"},{"offset":209,"length":41,"type":"89"},{"offset":250,"length":3,"type":"90","url":"91"},["92"],{"offset":209,"length":41,"type":"89"},{"offset":250,"length":3,"type":"90","url":"91"},["93"],"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["94"],["95"],{"text":"96","callback_data":"56"},{"text":"96","callback_data":"56"},"Get Started"]
67	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"If"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Send a text message","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}],"connections":{"If":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Send a text message":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Append row in sheet",["13","14","4","15"],{"Get Started Trigger":"16","If":"17","Send a text message":"18","Append row in sheet":"19"},{},{},[],{},{},{},"Get Started Trigger","Send a text message","If",["20"],["21"],["22"],["23"],{"startTime":1762862853142,"executionIndex":0,"source":"24","hints":"25","executionTime":0,"executionStatus":"26","data":"27"},{"startTime":1762862853142,"executionIndex":1,"source":"28","hints":"29","executionTime":2,"executionStatus":"26","data":"30"},{"startTime":1762863361624,"executionIndex":2,"source":"31","hints":"32","executionTime":1036,"executionStatus":"26","data":"33"},{"startTime":1762863660393,"executionIndex":3,"source":"34","hints":"35","executionTime":2815,"executionStatus":"26","data":"36"},[],[],"success",{"main":"37"},["38"],[],{"main":"39"},["40"],[],{"main":"41"},["42"],[],{"main":"43"},["44"],{"previousNode":"13"},["45","46"],{"previousNode":"15","previousNodeOutput":0,"previousNodeRun":0},["47"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["48"],["49"],["50"],[],["51"],["52"],{"json":"53","pairedItem":"54"},{"json":"55","pairedItem":"56"},{"json":"57","pairedItem":"58"},{"json":"59","pairedItem":"60"},{"update_id":483714039,"callback_query":"61"},{"item":0},{"update_id":483714039,"callback_query":"62"},{"item":0},{"ok":true,"result":"63"},{"item":0},{"user_id":1377981370,"current_step":"64","timestamp":"65"},{"item":0},{"id":"66","from":"67","message":"68","chat_instance":"69","data":"70"},{"id":"66","from":"71","message":"72","chat_instance":"69","data":"70"},{"message_id":46,"from":"73","chat":"74","date":1762863362,"text":"75","entities":"76","link_preview_options":"77"},"waiting_for_name","2025-11-11T07:21:01.406-05:00","5918384921937550203",{"id":1377981370,"is_bot":false,"first_name":"78","username":"79","language_code":"80"},{"message_id":45,"from":"81","chat":"82","date":1762862817,"text":"83","entities":"84","link_preview_options":"85","reply_markup":"86"},"1760275626831282877","get_started",{"id":1377981370,"is_bot":false,"first_name":"78","username":"79","language_code":"80"},{"message_id":45,"from":"87","chat":"88","date":1762862817,"text":"83","entities":"89","link_preview_options":"90","reply_markup":"91"},{"id":8509425688,"is_bot":true,"first_name":"92","username":"93"},{"id":1377981370,"first_name":"78","username":"79","type":"94"},"Great! What's your full name?\\n\\nThis message was sent automatically with n8n",["95","96"],{"is_disabled":true},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en",{"id":8509425688,"is_bot":true,"first_name":"92","username":"93"},{"id":1377981370,"first_name":"78","username":"79","type":"94"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["97","98"],{"is_disabled":true},{"inline_keyboard":"99"},{"id":8509425688,"is_bot":true,"first_name":"92","username":"93"},{"id":1377981370,"first_name":"78","username":"79","type":"94"},["100","101"],{"is_disabled":true},{"inline_keyboard":"102"},"CrisisMapper","crisismapper_bot","private",{"offset":31,"length":41,"type":"103"},{"offset":72,"length":3,"type":"104","url":"105"},{"offset":209,"length":41,"type":"103"},{"offset":250,"length":3,"type":"104","url":"105"},["106"],{"offset":209,"length":41,"type":"103"},{"offset":250,"length":3,"type":"104","url":"105"},["107"],"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["108"],["109"],{"text":"110","callback_data":"70"},{"text":"110","callback_data":"70"},"Get Started"]
68	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"If"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Telegram Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"If":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"4"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},"Telegram Trigger",{"Telegram Trigger":"10"},{},{},[],{},["11"],{"startTime":1762863811485,"executionIndex":0,"source":"12","hints":"13","executionTime":1,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714040,"message":"21"},{"item":0},{"message_id":48,"from":"22","chat":"23","date":1762863809,"text":"24"},{"id":1377981370,"is_bot":false,"first_name":"25","username":"26","language_code":"27"},{"id":1377981370,"first_name":"25","username":"26","type":"28"},"Francis James A. Lagang","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
70	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"If"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Telegram Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If1"}],"connections":{"If":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Telegram Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"Find User":{"main":[[{"node":"If1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"If1",["13","14","4"],{"Telegram Trigger":"15","Find User":"16","If1":"17"},{},{},[],{},{},{},"Telegram Trigger","Find User",["18"],["19"],["20"],{"startTime":1762863811485,"executionIndex":0,"source":"21","hints":"22","executionTime":1,"executionStatus":"23","data":"24"},{"startTime":1762863951002,"executionIndex":1,"source":"25","hints":"26","executionTime":984,"executionStatus":"23","data":"27"},{"startTime":1762864012102,"executionIndex":2,"source":"28","hints":"29","executionTime":5,"executionStatus":"23","data":"30"},[],[],"success",{"main":"31"},["32"],[],{"main":"33"},["34"],[],{"main":"35"},["36"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["37"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["38","39"],["40"],["41"],["42"],[],{"json":"43","pairedItem":"44"},{"json":"45","pairedItem":"46"},{"json":"45","pairedItem":"47"},{"update_id":483714040,"message":"48"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"49","name":"50","latitude":"50","longitude":"50","description":"50","media":"50","timestamp":"51"},{"item":0},{"item":0},{"message_id":48,"from":"52","chat":"53","date":1762863809,"text":"54"},"waiting_for_name","","2025-11-11T07:21:01.406-05:00",{"id":1377981370,"is_bot":false,"first_name":"55","username":"56","language_code":"57"},{"id":1377981370,"first_name":"55","username":"56","type":"58"},"Francis James A. Lagang","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
71	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"If"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Telegram Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If1"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Telegram Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}],"connections":{"If":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Telegram Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"Find User":{"main":[[{"node":"If1","type":"main","index":0}]]},"If1":{"main":[[{"node":"Record Name","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Record Name",["13","14","4","15"],{"Telegram Trigger":"16","Find User":"17","If1":"18","Record Name":"19"},{},{},[],{},{},{},"Telegram Trigger","If1","Find User",["20"],["21"],["22"],["23"],{"startTime":1762863811485,"executionIndex":0,"source":"24","hints":"25","executionTime":1,"executionStatus":"26","data":"27"},{"startTime":1762863951002,"executionIndex":1,"source":"28","hints":"29","executionTime":984,"executionStatus":"26","data":"30"},{"startTime":1762864012102,"executionIndex":2,"source":"31","hints":"32","executionTime":5,"executionStatus":"26","data":"33"},{"startTime":1762864109425,"executionIndex":3,"source":"34","hints":"35","executionTime":1825,"executionStatus":"26","data":"36"},[],[],"success",{"main":"37"},["38"],[],{"main":"39"},["40"],[],{"main":"41"},["42"],[],{"main":"43"},["44"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["45"],{"previousNode":"15","previousNodeOutput":0,"previousNodeRun":0},["46","47"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["48"],["49"],["50"],["51"],[],["52"],{"json":"53","pairedItem":"54"},{"json":"55","pairedItem":"56"},{"json":"57","pairedItem":"58"},{"json":"59","pairedItem":"60"},{"update_id":483714040,"message":"61"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"62","name":"63","latitude":"63","longitude":"63","description":"63","media":"63","timestamp":"64"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"62","name":"63","latitude":"63","longitude":"63","description":"63","media":"63","timestamp":"64"},{"item":0},{"row_number":2,"current_step":"65","name":"66"},{"item":0},{"message_id":48,"from":"67","chat":"68","date":1762863809,"text":"66"},"waiting_for_name","","2025-11-11T07:21:01.406-05:00","waiting_for_location","Francis James A. Lagang",{"id":1377981370,"is_bot":false,"first_name":"69","username":"70","language_code":"71"},{"id":1377981370,"first_name":"69","username":"70","type":"72"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
72	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"If"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Telegram Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If1"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Telegram Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Send a text message","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"If":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Telegram Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"Find User":{"main":[[{"node":"If1","type":"main","index":0}]]},"If1":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Send a text message",["13","14","4","15","16"],{"Telegram Trigger":"17","Find User":"18","If1":"19","Record Name":"20","Send a text message":"21"},{},{},[],{},{},{},"Telegram Trigger","Record Name","If1","Find User",["22"],["23"],["24"],["25"],["26"],{"startTime":1762863811485,"executionIndex":0,"source":"27","hints":"28","executionTime":1,"executionStatus":"29","data":"30"},{"startTime":1762863951002,"executionIndex":1,"source":"31","hints":"32","executionTime":984,"executionStatus":"29","data":"33"},{"startTime":1762864012102,"executionIndex":2,"source":"34","hints":"35","executionTime":5,"executionStatus":"29","data":"36"},{"startTime":1762864109425,"executionIndex":3,"source":"37","hints":"38","executionTime":1825,"executionStatus":"29","data":"39"},{"startTime":1762864518134,"executionIndex":4,"source":"40","hints":"41","executionTime":1068,"executionStatus":"29","data":"42"},[],[],"success",{"main":"43"},["44"],[],{"main":"45"},["46"],[],{"main":"47"},["48"],[],{"main":"49"},["50"],[],{"main":"51"},["52"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["53"],{"previousNode":"16","previousNodeOutput":0,"previousNodeRun":0},["54","55"],{"previousNode":"15","previousNodeOutput":0,"previousNodeRun":0},["56"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["57"],["58"],["59"],["60"],[],["61"],["62"],{"json":"63","pairedItem":"64"},{"json":"65","pairedItem":"66"},{"json":"67","pairedItem":"68"},{"json":"69","pairedItem":"70"},{"json":"71","pairedItem":"72"},{"update_id":483714040,"message":"73"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"74","name":"75","latitude":"75","longitude":"75","description":"75","media":"75","timestamp":"76"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"74","name":"75","latitude":"75","longitude":"75","description":"75","media":"75","timestamp":"76"},{"item":0},{"row_number":2,"current_step":"77","name":"78"},{"item":0},{"ok":true,"result":"79"},{"item":0},{"message_id":48,"from":"80","chat":"81","date":1762863809,"text":"78"},"waiting_for_name","","2025-11-11T07:21:01.406-05:00","waiting_for_location","Francis James A. Lagang",{"message_id":49,"from":"82","chat":"83","date":1762864518,"text":"84","entities":"85","link_preview_options":"86"},{"id":1377981370,"is_bot":false,"first_name":"87","username":"88","language_code":"89"},{"id":1377981370,"first_name":"87","username":"88","type":"90"},{"id":8509425688,"is_bot":true,"first_name":"91","username":"92"},{"id":1377981370,"first_name":"87","username":"88","type":"90"},"Thank you, Francis James A. Lagang! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.\\n\\nThis message was sent automatically with n8n",["93","94"],{"is_disabled":true},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private","CrisisMapper","crisismapper_bot",{"offset":173,"length":41,"type":"95"},{"offset":214,"length":3,"type":"96","url":"97"},"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999"]
73	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Telegram Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If1"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Telegram Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Telegram Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"Find User":{"main":[[{"node":"If1","type":"main","index":0}]]},"If1":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Start":"10","Send Welcome Message":"11"},{},"Send Welcome Message",{},[],{},["12"],["13"],{"startTime":1762865317052,"executionIndex":0,"source":"14","hints":"15","executionTime":1,"executionStatus":"16","data":"17"},{"startTime":1762865317054,"executionIndex":1,"source":"18","hints":"19","executionTime":997,"executionStatus":"16","data":"20"},[],[],"success",{"main":"21"},["22"],[],{"main":"23"},["24"],{"previousNode":"25"},["26"],["27"],"Start",["28"],{"json":"29","pairedItem":"30"},{"json":"31","pairedItem":"32"},{"update_id":483714041,"message":"33"},{"item":0},{"ok":true,"result":"34"},{"item":0},{"message_id":50,"from":"35","chat":"36","date":1762865314,"text":"37","entities":"38"},{"message_id":51,"from":"39","chat":"40","date":1762865317,"text":"41","entities":"42","link_preview_options":"43","reply_markup":"44"},{"id":1377981370,"is_bot":false,"first_name":"45","username":"46","language_code":"47"},{"id":1377981370,"first_name":"45","username":"46","type":"48"},"/start",["49"],{"id":8509425688,"is_bot":true,"first_name":"50","username":"51"},{"id":1377981370,"first_name":"45","username":"46","type":"48"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["52","53"],{"is_disabled":true},{"inline_keyboard":"54"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"55"},"CrisisMapper","crisismapper_bot",{"offset":209,"length":41,"type":"56"},{"offset":250,"length":3,"type":"57","url":"58"},["59"],"bot_command","italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["60"],{"text":"61","callback_data":"62"},"Get Started","get_started"]
74	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Telegram Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If1"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Telegram Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Telegram Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"Find User":{"main":[[{"node":"If1","type":"main","index":0}]]},"If1":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Get Started Trigger":"10","Check if Callback is Get Started":"11","Ask User's Name":"12","Append row in sheet":"13"},{},"Append row in sheet",{},[],{},["14"],["15"],["16"],["17"],{"startTime":1762865346971,"executionIndex":0,"source":"18","hints":"19","executionTime":0,"executionStatus":"20","data":"21"},{"startTime":1762865346972,"executionIndex":1,"source":"22","hints":"23","executionTime":1,"executionStatus":"20","data":"24"},{"startTime":1762865346973,"executionIndex":2,"source":"25","hints":"26","executionTime":1053,"executionStatus":"20","data":"27"},{"startTime":1762865348026,"executionIndex":3,"source":"28","hints":"29","executionTime":2850,"executionStatus":"20","data":"30"},[],[],"success",{"main":"31"},["32"],[],{"main":"33"},["34"],[],{"main":"35"},["36"],[],{"main":"37"},["38"],{"previousNode":"39"},["40","41"],{"previousNode":"42"},["43"],{"previousNode":"44"},["45"],["46"],"Get Started Trigger",["47"],[],"Check if Callback is Get Started",["48"],"Ask User's Name",["49"],{"json":"50","pairedItem":"51"},{"json":"50","pairedItem":"52"},{"json":"53","pairedItem":"54"},{"json":"55","pairedItem":"56"},{"update_id":483714042,"callback_query":"57"},{"item":0},{"item":0},{"ok":true,"result":"58"},{"item":0},{"user_id":1377981370,"current_step":"59","timestamp":"60"},{"item":0},{"id":"61","from":"62","message":"63","chat_instance":"64","data":"65"},{"message_id":52,"from":"66","chat":"67","date":1762865347,"text":"68","entities":"69","link_preview_options":"70"},"waiting_for_name","2025-11-11T07:49:09.175-05:00","5918384918793429433",{"id":1377981370,"is_bot":false,"first_name":"71","username":"72","language_code":"73"},{"message_id":51,"from":"74","chat":"75","date":1762865317,"text":"76","entities":"77","link_preview_options":"78","reply_markup":"79"},"1760275626831282877","get_started",{"id":8509425688,"is_bot":true,"first_name":"80","username":"81"},{"id":1377981370,"first_name":"71","username":"72","type":"82"},"Great! What's your full name?\\n\\nThis message was sent automatically with n8n",["83","84"],{"is_disabled":true},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en",{"id":8509425688,"is_bot":true,"first_name":"80","username":"81"},{"id":1377981370,"first_name":"71","username":"72","type":"82"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["85","86"],{"is_disabled":true},{"inline_keyboard":"87"},"CrisisMapper","crisismapper_bot","private",{"offset":31,"length":41,"type":"88"},{"offset":72,"length":3,"type":"89","url":"90"},{"offset":209,"length":41,"type":"88"},{"offset":250,"length":3,"type":"89","url":"90"},["91"],"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["92"],{"text":"93","callback_data":"65"},"Get Started"]
75	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If1"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If1","type":"main","index":0}]]},"If1":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Name Trigger":"10","Find User":"11","If1":"12","Record Name":"13","Ask User Location":"14"},{},"Ask User Location",{},[],{},["15"],["16"],["17"],["18"],["19"],{"startTime":1762865391412,"executionIndex":0,"source":"20","hints":"21","executionTime":0,"executionStatus":"22","data":"23"},{"startTime":1762865391413,"executionIndex":1,"source":"24","hints":"25","executionTime":1062,"executionStatus":"22","data":"26"},{"startTime":1762865392475,"executionIndex":2,"source":"27","hints":"28","executionTime":1,"executionStatus":"22","data":"29"},{"startTime":1762865392477,"executionIndex":3,"source":"30","hints":"31","executionTime":1536,"executionStatus":"22","data":"32"},{"startTime":1762865394013,"executionIndex":4,"source":"33","hints":"34","executionTime":1263,"executionStatus":"22","data":"35"},[],[],"success",{"main":"36"},["37"],[],{"main":"38"},["39"],[],{"main":"40"},["41"],[],{"main":"42"},["43"],[],{"main":"44"},["45"],{"previousNode":"46"},["47"],{"previousNode":"48"},["49","50"],{"previousNode":"51"},["52"],{"previousNode":"53"},["54"],["55"],"Name Trigger",["56"],"Find User",["57"],[],"If1",["58"],"Record Name",["59"],{"json":"60","pairedItem":"61"},{"json":"62","pairedItem":"63"},{"json":"62","pairedItem":"64"},{"json":"65","pairedItem":"66"},{"json":"67","pairedItem":"68"},{"update_id":483714043,"message":"69"},{"item":0},{"row_number":3,"user_id":1377981370,"current_step":"70","name":"71","latitude":"71","longitude":"71","description":"71","media":"71","timestamp":"72"},{"item":0},{"item":0},{"row_number":3,"current_step":"73","name":"74"},{"item":0},{"ok":true,"result":"75"},{"item":0},{"message_id":53,"from":"76","chat":"77","date":1762865388,"text":"74"},"waiting_for_name","","2025-11-11T07:49:09.175-05:00","waiting_for_location","Francis James A. Lagang",{"message_id":54,"from":"78","chat":"79","date":1762865395,"text":"80","entities":"81","link_preview_options":"82"},{"id":1377981370,"is_bot":false,"first_name":"83","username":"84","language_code":"85"},{"id":1377981370,"first_name":"83","username":"84","type":"86"},{"id":8509425688,"is_bot":true,"first_name":"87","username":"88"},{"id":1377981370,"first_name":"83","username":"84","type":"86"},"Thank you, Francis James A. Lagang! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.\\n\\nThis message was sent automatically with n8n",["89","90"],{"is_disabled":true},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private","CrisisMapper","crisismapper_bot",{"offset":173,"length":41,"type":"91"},{"offset":214,"length":3,"type":"92","url":"93"},"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999"]
76	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.result.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"={{ $('Record Name').item.json.current_step }}"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2288,-192],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User1","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[{"node":"Find User1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Find User1",["13","14","4","15","16","17"],{"Name Trigger":"18","Find User":"19","Record Name":"20","Ask User Location":"21","If Callback Received Name":"22","Find User1":"23"},{},{},[],{},{},{},"Name Trigger","Ask User Location","Record Name","If Callback Received Name","Find User",["24"],["25"],["26"],["27"],["28"],["29"],{"startTime":1762865391412,"executionIndex":0,"source":"30","hints":"31","executionTime":0,"executionStatus":"32","data":"33"},{"startTime":1762865391413,"executionIndex":1,"source":"34","hints":"35","executionTime":1062,"executionStatus":"32","data":"36"},{"startTime":1762865392477,"executionIndex":3,"source":"37","hints":"38","executionTime":1536,"executionStatus":"32","data":"39"},{"startTime":1762865394013,"executionIndex":4,"source":"40","hints":"41","executionTime":1263,"executionStatus":"32","data":"42"},{"startTime":1762865392475,"executionIndex":2,"source":"43","hints":"44","executionTime":1,"executionStatus":"32","data":"45"},{"startTime":1762865675844,"executionIndex":5,"source":"46","hints":"47","executionTime":1049,"executionStatus":"32","data":"48"},[],[],"success",{"main":"49"},["50"],[],{"main":"51"},["52"],[],{"main":"53"},["54"],[],{"main":"55"},["56"],[],{"main":"57"},["58"],[],{"main":"59"},["60"],{"previousNode":"13"},["61"],{"previousNode":"16"},["62"],{"previousNode":"15"},["63"],{"previousNode":"17"},["64","65"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["66"],["67"],["68"],["69"],["70"],["71"],[],["72","73"],{"json":"74","pairedItem":"75"},{"json":"76","pairedItem":"77"},{"json":"78","pairedItem":"79"},{"json":"80","pairedItem":"81"},{"json":"82","pairedItem":"83"},{"json":"84","pairedItem":"85"},{"json":"86","pairedItem":"87"},{"update_id":483714043,"message":"88"},{"item":0},{"row_number":3,"user_id":1377981370,"current_step":"89","name":"90","latitude":"90","longitude":"90","description":"90","media":"90","timestamp":"91"},{"item":0},{"row_number":3,"current_step":"92","name":"93"},{"item":0},{"ok":true,"result":"94"},{"item":0},{"row_number":3,"user_id":1377981370,"current_step":"89","name":"90","latitude":"90","longitude":"90","description":"90","media":"90","timestamp":"91"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"92","name":"93","latitude":"90","longitude":"90","description":"90","media":"90","timestamp":"95"},{"item":0},{"row_number":3,"user_id":1377981370,"current_step":"92","name":"93","latitude":"90","longitude":"90","description":"90","media":"90","timestamp":"91"},{"item":0},{"message_id":53,"from":"96","chat":"97","date":1762865388,"text":"93"},"waiting_for_name","","2025-11-11T07:49:09.175-05:00","waiting_for_location","Francis James A. Lagang",{"message_id":54,"from":"98","chat":"99","date":1762865395,"text":"100","entities":"101","link_preview_options":"102"},"2025-11-11T07:21:01.406-05:00",{"id":1377981370,"is_bot":false,"first_name":"103","username":"104","language_code":"105"},{"id":1377981370,"first_name":"103","username":"104","type":"106"},{"id":8509425688,"is_bot":true,"first_name":"107","username":"108"},{"id":1377981370,"first_name":"103","username":"104","type":"106"},"Thank you, Francis James A. Lagang! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.\\n\\nThis message was sent automatically with n8n",["109","110"],{"is_disabled":true},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private","CrisisMapper","crisismapper_bot",{"offset":173,"length":41,"type":"111"},{"offset":214,"length":3,"type":"112","url":"113"},"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999"]
79	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-192],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2288,-192],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Find User - Location",["13","4"],{"Receive Coordinates":"14","Find User - Location":"15"},{},{},[],{},{},{},"Receive Coordinates",["16"],["17"],{"startTime":1762865799306,"executionIndex":0,"source":"18","hints":"19","executionTime":0,"executionStatus":"20","data":"21"},{"startTime":1762865925886,"executionIndex":1,"source":"22","hints":"23","executionTime":1037,"executionStatus":"20","data":"24"},[],[],"success",{"main":"25"},["26"],[],{"main":"27"},["28"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["29"],["30"],["31","32"],{"json":"33","pairedItem":"34"},{"json":"35","pairedItem":"36"},{"json":"37","pairedItem":"38"},{"update_id":483714044,"message":"39"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"40","name":"41","latitude":"42","longitude":"42","description":"42","media":"42","timestamp":"43"},{"item":0},{"row_number":3,"user_id":1377981370,"current_step":"40","name":"41","latitude":"42","longitude":"42","description":"42","media":"42","timestamp":"44"},{"item":0},{"message_id":55,"from":"45","chat":"46","date":1762865794,"location":"47"},"waiting_for_location","Francis James A. Lagang","","2025-11-11T07:21:01.406-05:00","2025-11-11T07:49:09.175-05:00",{"id":1377981370,"is_bot":false,"first_name":"48","username":"49","language_code":"50"},{"id":1377981370,"first_name":"48","username":"49","type":"51"},{"latitude":10.391746,"longitude":123.968725},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
80	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-192],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2288,-192],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2704,-192],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Record User Coordinates",["13","14","4"],{"Receive Coordinates":"15","Find User - Location":"16","Record User Coordinates":"17"},{},{},[],{},{},{},"Receive Coordinates","Find User - Location",["18"],["19"],["20"],{"startTime":1762865799306,"executionIndex":0,"source":"21","hints":"22","executionTime":0,"executionStatus":"23","data":"24"},{"startTime":1762865925886,"executionIndex":1,"source":"25","hints":"26","executionTime":1037,"executionStatus":"23","data":"27"},{"startTime":1762866184511,"executionIndex":2,"source":"28","hints":"29","executionTime":1771,"executionStatus":"23","data":"30"},[],[],"success",{"main":"31"},["32"],[],{"main":"33"},["34"],[],{"main":"35"},["36"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["37"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["38"],["39"],["40","41"],["42","43"],{"json":"44","pairedItem":"45"},{"json":"46","pairedItem":"47"},{"json":"48","pairedItem":"49"},{"json":"50","pairedItem":"51"},{"json":"52","pairedItem":"53"},{"update_id":483714044,"message":"54"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"55","name":"56","latitude":"57","longitude":"57","description":"57","media":"57","timestamp":"58"},{"item":0},{"row_number":3,"user_id":1377981370,"current_step":"55","name":"56","latitude":"57","longitude":"57","description":"57","media":"57","timestamp":"59"},{"item":0},{"row_number":2,"current_step":"60","latitude":10.391746,"longitude":123.968725},{"item":0},{"row_number":3,"current_step":"60","latitude":10.391746,"longitude":123.968725},{"item":1},{"message_id":55,"from":"61","chat":"62","date":1762865794,"location":"63"},"waiting_for_location","Francis James A. Lagang","","2025-11-11T07:21:01.406-05:00","2025-11-11T07:49:09.175-05:00","waiting_for_description",{"id":1377981370,"is_bot":false,"first_name":"64","username":"65","language_code":"66"},{"id":1377981370,"first_name":"64","username":"65","type":"67"},{"latitude":10.391746,"longitude":123.968725},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private"]
81	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-192],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2288,-192],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2704,-192],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2912,-192],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Send a text message",["13","14","4","15"],{"Receive Coordinates":"16","Find User - Location":"17","Record User Coordinates":"18","Send a text message":"19"},{},{},[],{},{},{},"Receive Coordinates","Record User Coordinates","Find User - Location",["20"],["21"],["22"],["23"],{"startTime":1762865799306,"executionIndex":0,"source":"24","hints":"25","executionTime":0,"executionStatus":"26","data":"27"},{"startTime":1762865925886,"executionIndex":1,"source":"28","hints":"29","executionTime":1037,"executionStatus":"26","data":"30"},{"startTime":1762866184511,"executionIndex":2,"source":"31","hints":"32","executionTime":1771,"executionStatus":"26","data":"33"},{"startTime":1762866513629,"executionIndex":3,"source":"34","hints":"35","executionTime":2541,"executionStatus":"26","data":"36"},[],[],"success",{"main":"37"},["38"],[],{"main":"39"},["40"],[],{"main":"41"},["42"],[],{"main":"43"},["44"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["45"],{"previousNode":"15","previousNodeOutput":0,"previousNodeRun":0},["46"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["47"],["48"],["49","50"],["51","52"],["53","54"],{"json":"55","pairedItem":"56"},{"json":"57","pairedItem":"58"},{"json":"59","pairedItem":"60"},{"json":"61","pairedItem":"62"},{"json":"63","pairedItem":"64"},{"json":"65","pairedItem":"66"},{"json":"67","pairedItem":"68"},{"update_id":483714044,"message":"69"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"70","name":"71","latitude":"72","longitude":"72","description":"72","media":"72","timestamp":"73"},{"item":0},{"row_number":3,"user_id":1377981370,"current_step":"70","name":"71","latitude":"72","longitude":"72","description":"72","media":"72","timestamp":"74"},{"item":0},{"row_number":2,"current_step":"75","latitude":10.391746,"longitude":123.968725},{"item":0},{"row_number":3,"current_step":"75","latitude":10.391746,"longitude":123.968725},{"item":1},{"ok":true,"result":"76"},{"item":0},{"ok":true,"result":"77"},{"item":1},{"message_id":55,"from":"78","chat":"79","date":1762865794,"location":"80"},"waiting_for_location","Francis James A. Lagang","","2025-11-11T07:21:01.406-05:00","2025-11-11T07:49:09.175-05:00","waiting_for_description",{"message_id":56,"from":"81","chat":"82","date":1762866514,"text":"83","entities":"84","link_preview_options":"85"},{"message_id":57,"from":"86","chat":"87","date":1762866515,"text":"83","entities":"88","link_preview_options":"89"},{"id":1377981370,"is_bot":false,"first_name":"90","username":"91","language_code":"92"},{"id":1377981370,"first_name":"90","username":"91","type":"93"},{"latitude":10.391746,"longitude":123.968725},{"id":8509425688,"is_bot":true,"first_name":"94","username":"95"},{"id":1377981370,"first_name":"90","username":"91","type":"93"},"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.\\n\\nThis message was sent automatically with n8n",["96","97"],{"is_disabled":true},{"id":8509425688,"is_bot":true,"first_name":"94","username":"95"},{"id":1377981370,"first_name":"90","username":"91","type":"93"},["98","99"],{"is_disabled":true},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private","CrisisMapper","crisismapper_bot",{"offset":230,"length":41,"type":"100"},{"offset":271,"length":3,"type":"101","url":"102"},{"offset":230,"length":41,"type":"100"},{"offset":271,"length":3,"type":"101","url":"102"},"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999"]
82	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-192],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2288,-192],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2704,-192],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2912,-192],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[3120,-192],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Description and Media Trigger":"10"},{},"Description and Media Trigger",{},[],{},["11"],{"startTime":1762867856753,"executionIndex":0,"source":"12","hints":"13","executionTime":0,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714045,"message":"21"},{"item":0},{"message_id":58,"from":"22","chat":"23","date":1762867852,"photo":"24","caption":"25"},{"id":1377981370,"is_bot":false,"first_name":"26","username":"27","language_code":"28"},{"id":1377981370,"first_name":"26","username":"27","type":"29"},["30","31","32","33"],"Power is out. All our gadgets are drained. We need someone to take us to an evacuation center ASAP.","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"file_id":"34","file_unique_id":"35","file_size":837,"width":67,"height":90},{"file_id":"36","file_unique_id":"37","file_size":10374,"width":240,"height":320},{"file_id":"38","file_unique_id":"39","file_size":59720,"width":600,"height":800},{"file_id":"40","file_unique_id":"41","file_size":79003,"width":960,"height":1280},"AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANzAAM2BA","AQADVQxrG3KrmFR4","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANtAAM2BA","AQADVQxrG3KrmFRy","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN4AAM2BA","AQADVQxrG3KrmFR9","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA","AQADVQxrG3KrmFR-"]
83	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-192],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2288,-192],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2704,-192],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2912,-192],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[3120,-192],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Description and Media Trigger":"10"},{},"Description and Media Trigger",{},[],{},["11"],{"startTime":1762868073163,"executionIndex":0,"source":"12","hints":"13","executionTime":1,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714046,"message":"21"},{"item":0},{"message_id":59,"from":"22","chat":"23","date":1762867886,"photo":"24","caption":"25"},{"id":1377981370,"is_bot":false,"first_name":"26","username":"27","language_code":"28"},{"id":1377981370,"first_name":"26","username":"27","type":"29"},["30","31","32","33"],"Power is out. All our gadgets are drained. We need someone to take us to an evacuation center ASAP.","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"file_id":"34","file_unique_id":"35","file_size":837,"width":67,"height":90},{"file_id":"36","file_unique_id":"37","file_size":10374,"width":240,"height":320},{"file_id":"38","file_unique_id":"39","file_size":59720,"width":600,"height":800},{"file_id":"40","file_unique_id":"41","file_size":79003,"width":960,"height":1280},"AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANzAAM2BA","AQADVQxrG3KrmFR4","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANtAAM2BA","AQADVQxrG3KrmFRy","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN4AAM2BA","AQADVQxrG3KrmFR9","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA","AQADVQxrG3KrmFR-"]
84	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-192],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2288,-192],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2704,-192],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2912,-192],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[3120,-192],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Description and Media Trigger":"10"},{},"Description and Media Trigger",{},[],{},["11"],{"startTime":1762868075011,"executionIndex":0,"source":"12","hints":"13","executionTime":0,"executionStatus":"14","data":"15"},[],[],"success",{"main":"16"},["17"],["18"],{"json":"19","pairedItem":"20"},{"update_id":483714047,"message":"21"},{"item":0},{"message_id":60,"from":"22","chat":"23","date":1762868072,"photo":"24","caption":"25"},{"id":1377981370,"is_bot":false,"first_name":"26","username":"27","language_code":"28"},{"id":1377981370,"first_name":"26","username":"27","type":"29"},["30","31","32","33"],"Power is out. All our gadgets are drained. We need someone to take us to an evacuation center ASAP.","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"file_id":"34","file_unique_id":"35","file_size":837,"width":67,"height":90},{"file_id":"36","file_unique_id":"37","file_size":10374,"width":240,"height":320},{"file_id":"38","file_unique_id":"39","file_size":59720,"width":600,"height":800},{"file_id":"40","file_unique_id":"41","file_size":79003,"width":960,"height":1280},"AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANzAAM2BA","AQADVQxrG3KrmFR4","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANtAAM2BA","AQADVQxrG3KrmFRy","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN4AAM2BA","AQADVQxrG3KrmFR9","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA","AQADVQxrG3KrmFR-"]
85	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-192],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2288,-192],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2704,-192],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2912,-192],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[3120,-192],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-192],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Find User - Desc & Media",["13","4"],{"Description and Media Trigger":"14","Find User - Desc & Media":"15"},{},{},[],{},{},{},"Description and Media Trigger",["16"],["17"],{"startTime":1762868075011,"executionIndex":0,"source":"18","hints":"19","executionTime":0,"executionStatus":"20","data":"21"},{"startTime":1762868324261,"executionIndex":1,"source":"22","hints":"23","executionTime":1024,"executionStatus":"20","data":"24"},[],[],"success",{"main":"25"},["26"],[],{"main":"27"},["28"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["29"],["30"],["31","32"],{"json":"33","pairedItem":"34"},{"json":"35","pairedItem":"36"},{"json":"37","pairedItem":"38"},{"update_id":483714047,"message":"39"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"40","name":"41","latitude":10.391746,"longitude":123.968725,"description":"42","media":"42","timestamp":"43"},{"item":0},{"row_number":3,"user_id":1377981370,"current_step":"40","name":"41","latitude":10.391746,"longitude":123.968725,"description":"42","media":"42","timestamp":"44"},{"item":0},{"message_id":60,"from":"45","chat":"46","date":1762868072,"photo":"47","caption":"48"},"waiting_for_description","Francis James A. Lagang","","2025-11-11T07:21:01.406-05:00","2025-11-11T07:49:09.175-05:00",{"id":1377981370,"is_bot":false,"first_name":"49","username":"50","language_code":"51"},{"id":1377981370,"first_name":"49","username":"50","type":"52"},["53","54","55","56"],"Power is out. All our gadgets are drained. We need someone to take us to an evacuation center ASAP.","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"file_id":"57","file_unique_id":"58","file_size":837,"width":67,"height":90},{"file_id":"59","file_unique_id":"60","file_size":10374,"width":240,"height":320},{"file_id":"61","file_unique_id":"62","file_size":59720,"width":600,"height":800},{"file_id":"63","file_unique_id":"64","file_size":79003,"width":960,"height":1280},"AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANzAAM2BA","AQADVQxrG3KrmFR4","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANtAAM2BA","AQADVQxrG3KrmFRy","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN4AAM2BA","AQADVQxrG3KrmFR9","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA","AQADVQxrG3KrmFR-"]
86	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-192],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2288,-192],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2704,-192],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2912,-192],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[3120,-192],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-192],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"current_step":"end_of_form","row_number":"={{ $json.row_number }}","media":"={{ $('Description and Media Trigger').item.json.message.photo \\n    ? $('Description and Media Trigger').item.json.message.photo[$('Description and Media Trigger').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}\\n","description":"={{ $('Description and Media Trigger').item.json.message.caption || $('Description and Media Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3536,-192],"id":"ed64d4df-b84d-4265-b123-ba6a51997cc6","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]},"Find User - Desc & Media":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Update row in sheet",["13","14","4"],{"Description and Media Trigger":"15","Find User - Desc & Media":"16","Update row in sheet":"17"},{},{},[],{},{},{},"Description and Media Trigger","Find User - Desc & Media",["18"],["19"],["20"],{"startTime":1762868075011,"executionIndex":0,"source":"21","hints":"22","executionTime":0,"executionStatus":"23","data":"24"},{"startTime":1762868324261,"executionIndex":1,"source":"25","hints":"26","executionTime":1024,"executionStatus":"23","data":"27"},{"startTime":1762868716093,"executionIndex":2,"source":"28","hints":"29","executionTime":2878,"executionStatus":"23","data":"30"},[],[],"success",{"main":"31"},["32"],[],{"main":"33"},["34"],[],{"main":"35"},["36"],{"previousNode":"13","previousNodeOutput":0,"previousNodeRun":0},["37"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["38"],["39"],["40","41"],["42","43"],{"json":"44","pairedItem":"45"},{"json":"46","pairedItem":"47"},{"json":"48","pairedItem":"49"},{"json":"50","pairedItem":"51"},{"json":"52","pairedItem":"53"},{"update_id":483714047,"message":"54"},{"item":0},{"row_number":2,"user_id":1377981370,"current_step":"55","name":"56","latitude":10.391746,"longitude":123.968725,"description":"57","media":"57","timestamp":"58"},{"item":0},{"row_number":3,"user_id":1377981370,"current_step":"55","name":"56","latitude":10.391746,"longitude":123.968725,"description":"57","media":"57","timestamp":"59"},{"item":0},{"current_step":"60","row_number":2,"media":"61","description":"62"},{"item":0},{"current_step":"60","row_number":3,"media":"61","description":"62"},{"item":1},{"message_id":60,"from":"63","chat":"64","date":1762868072,"photo":"65","caption":"62"},"waiting_for_description","Francis James A. Lagang","","2025-11-11T07:21:01.406-05:00","2025-11-11T07:49:09.175-05:00","end_of_form","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA\\n","Power is out. All our gadgets are drained. We need someone to take us to an evacuation center ASAP.",{"id":1377981370,"is_bot":false,"first_name":"66","username":"67","language_code":"68"},{"id":1377981370,"first_name":"66","username":"67","type":"69"},["70","71","72","73"],"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"file_id":"74","file_unique_id":"75","file_size":837,"width":67,"height":90},{"file_id":"76","file_unique_id":"77","file_size":10374,"width":240,"height":320},{"file_id":"78","file_unique_id":"79","file_size":59720,"width":600,"height":800},{"file_id":"80","file_unique_id":"81","file_size":79003,"width":960,"height":1280},"AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANzAAM2BA","AQADVQxrG3KrmFR4","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANtAAM2BA","AQADVQxrG3KrmFRy","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN4AAM2BA","AQADVQxrG3KrmFR9","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA","AQADVQxrG3KrmFR-"]
87	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-192],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2288,-192],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2704,-192],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2912,-192],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[3120,-192],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-192],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"current_step":"end_of_form","row_number":"={{ $json.row_number }}","media":"={{ $('Description and Media Trigger').item.json.message.photo \\n    ? $('Description and Media Trigger').item.json.message.photo[$('Description and Media Trigger').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}\\n","description":"={{ $('Description and Media Trigger').item.json.message.caption || $('Description and Media Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3536,-192],"id":"ed64d4df-b84d-4265-b123-ba6a51997cc6","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"public":false,"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.3,"position":[3744,-192],"id":"0df1b513-cce8-446a-8f51-2188691a6710","name":"When chat message received","webhookId":"ab5df54e-fb30-424f-b3a7-2f3aae7f7dec"},{"parameters":{"notice":"","promptType":"auto","text":"={{ $json.chatInput }}","hasOutputParser":false,"needsFallback":false,"messages":{},"batching":{}},"type":"@n8n/n8n-nodes-langchain.chainLlm","typeVersion":1.7,"position":[3952,-192],"id":"510f2496-4de6-4e8d-93ae-fe4f523a1543","name":"Basic LLM Chain"},{"parameters":{"notice":"","modelName":"models/gemini-2.5-flash","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[4160,-192],"id":"f7d473db-82ad-49b8-96e7-b0ee865d8377","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"zdDZCTsALNpNUjT8","name":"Google Gemini(PaLM) Api account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]},"Find User - Desc & Media":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"Basic LLM Chain","type":"ai_languageModel","index":0}]]},"When chat message received":{"main":[[{"node":"Basic LLM Chain","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"Google Gemini Chat Model",["4"],{"Google Gemini Chat Model":"13"},{},{},[],{},{},{},["14"],{"startTime":1762869105397,"executionIndex":0,"source":"15","hints":"16","executionTime":703,"executionStatus":"17","data":"18"},[],[],"success",{"main":"19"},["20"],["21"],{"json":"22","pairedItem":"23"},"<!DOCTYPE html>\\n<html lang=en>\\n  <meta charset=utf-8>\\n  <meta name=viewport content=\\"initial-scale=1, minimum-scale=1, width=device-width\\">\\n  <title>Error 400 (Bad Request)!!1</title>\\n  <style>\\n    *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* > body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}#logo{background:url(//www.google.com/images/branding/googlelogo/1x/googlelogo_color_150x54dp.png) no-repeat;margin-left:-5px}@media only screen and (min-resolution:192dpi){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat 0% 0%/100% 100%;-moz-border-image:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) 0}}@media only screen and (-webkit-min-device-pixel-ratio:2){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat;-webkit-background-size:100% 100%}}#logo{display:inline-block;height:54px;width:150px}\\n  </style>\\n  <a href=//www.google.com/><span id=logo aria-label=Google></span></a>\\n  <p><b>400.</b> <ins>Thatâ€™s an error.</ins>\\n  <p>Your client has issued a malformed or illegal request.  <ins>Thatâ€™s all we know.</ins>\\n",{"item":0}]
88	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-400],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[224,-400],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-224],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-224],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[448,-224],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,-48],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-48],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[896,-48],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[224,-224],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-48],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[448,-48],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,144],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,144],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,144],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[672,144],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,368],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,368],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"current_step":"end_of_form","row_number":"={{ $json.row_number }}","media":"={{ $('Description and Media Trigger').item.json.message.photo \\n    ? $('Description and Media Trigger').item.json.message.photo[$('Description and Media Trigger').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}\\n","description":"={{ $('Description and Media Trigger').item.json.message.caption || $('Description and Media Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,368],"id":"ed64d4df-b84d-4265-b123-ba6a51997cc6","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://api.openai.com/v1/chat/completions","authentication":"predefinedCredentialType","nodeCredentialType":"openAiApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"model\\": \\"gpt-3.5-turbo\\",\\n  \\"messages\\": [\\n    {\\"role\\": \\"system\\", \\"content\\": \\"Classify the disaster report as one of: food, rescue, medical, power, others. Also assign urgency: Low, Medium, or High. Respond with JSON like {\\\\\\"type\\\\\\":\\\\\\"...\\\\\\",\\\\\\"urgency\\\\\\":\\\\\\"...\\\\\\"}\\"},\\n    {\\"role\\": \\"user\\", \\"content\\": \\"\\"}\\n  ],\\n  \\"max_tokens\\": 30,\\n  \\"temperature\\": 0\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[656,368],"id":"258520d4-3fa9-46a0-be60-770aeea04f62","name":"HTTP Request","credentials":{"openAiApi":{"id":"p2T40GsW7EeHqQhv","name":"OpenAi account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]},"Find User - Desc & Media":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4"},{"runData":"5","pinData":"6","lastNodeExecuted":"7"},{"contextData":"8","nodeExecutionStack":"9","waitingExecution":"10"},"HTTP Request",{"Description and Media Trigger":"11","Find User - Desc & Media":"12"},{},"Find User - Desc & Media",{},[],{},["13"],["14"],{"startTime":1762902512629,"executionIndex":0,"source":"15","hints":"16","executionTime":1,"executionStatus":"17","data":"18"},{"startTime":1762902512631,"executionIndex":1,"source":"19","hints":"20","executionTime":2478,"executionStatus":"17","data":"21"},[],[],"success",{"main":"22"},["23"],[],{"main":"24"},["25"],{"previousNode":"26"},["27"],["28"],"Description and Media Trigger",[],{"json":"29","pairedItem":"30"},{"update_id":483714048,"message":"31"},{"item":0},{"message_id":61,"from":"32","chat":"33","date":1762902509,"photo":"34","caption":"35"},{"id":1377981370,"is_bot":false,"first_name":"36","username":"37","language_code":"38"},{"id":1377981370,"first_name":"36","username":"37","type":"39"},["40","41","42","43"],"Power is out. All our gadgets are drained. We need someone to take us to an evacuation center ASAP.","ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"file_id":"44","file_unique_id":"45","file_size":837,"width":67,"height":90},{"file_id":"46","file_unique_id":"47","file_size":10374,"width":240,"height":320},{"file_id":"48","file_unique_id":"49","file_size":59720,"width":600,"height":800},{"file_id":"50","file_unique_id":"51","file_size":79003,"width":960,"height":1280},"AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANzAAM2BA","AQADVQxrG3KrmFR4","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANtAAM2BA","AQADVQxrG3KrmFRy","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN4AAM2BA","AQADVQxrG3KrmFR9","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA","AQADVQxrG3KrmFR-"]
91	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-400],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[224,-400],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-224],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-224],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[448,-224],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,-48],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-48],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[896,-48],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[224,-224],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-48],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[448,-48],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,144],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,144],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,144],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[672,144],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,368],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,368],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"current_step":"end_of_form","row_number":"={{ $json.row_number }}","media":"={{ $('Description and Media Trigger').item.json.message.photo \\n    ? $('Description and Media Trigger').item.json.message.photo[$('Description and Media Trigger').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}\\n","description":"={{ $('Description and Media Trigger').item.json.message.caption || $('Description and Media Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,368],"id":"ed64d4df-b84d-4265-b123-ba6a51997cc6","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://api.openai.com/v1/chat/completions","authentication":"predefinedCredentialType","nodeCredentialType":"openAiApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"model\\": \\"gpt-3.5-turbo\\",\\n  \\"messages\\": [\\n    {\\"role\\": \\"system\\", \\"content\\": \\"Classify the disaster report as one of: food, rescue, medical, power, others. Also assign urgency: Low, Medium, or High. Respond with JSON like {\\\\\\"type\\\\\\":\\\\\\"...\\\\\\",\\\\\\"urgency\\\\\\":\\\\\\"...\\\\\\"}\\"},\\n    {\\"role\\": \\"user\\", \\"content\\": \\"\\"}\\n  ],\\n  \\"max_tokens\\": 30,\\n  \\"temperature\\": 0\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[656,368],"id":"258520d4-3fa9-46a0-be60-770aeea04f62","name":"HTTP Request","credentials":{"openAiApi":{"id":"p2T40GsW7EeHqQhv","name":"OpenAi account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]},"Find User - Desc & Media":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Start":"10","Send Welcome Message":"11"},{},"Send Welcome Message",{},[],{},["12"],["13"],{"startTime":1762902598567,"executionIndex":0,"source":"14","hints":"15","executionTime":0,"executionStatus":"16","data":"17"},{"startTime":1762902598568,"executionIndex":1,"source":"18","hints":"19","executionTime":1151,"executionStatus":"16","data":"20"},[],[],"success",{"main":"21"},["22"],[],{"main":"23"},["24"],{"previousNode":"25"},["26"],["27"],"Start",["28"],{"json":"29","pairedItem":"30"},{"json":"31","pairedItem":"32"},{"update_id":483714049,"message":"33"},{"item":0},{"ok":true,"result":"34"},{"item":0},{"message_id":62,"from":"35","chat":"36","date":1762902596,"text":"37","entities":"38"},{"message_id":63,"from":"39","chat":"40","date":1762902599,"text":"41","entities":"42","link_preview_options":"43","reply_markup":"44"},{"id":1377981370,"is_bot":false,"first_name":"45","username":"46","language_code":"47"},{"id":1377981370,"first_name":"45","username":"46","type":"48"},"/start",["49"],{"id":8509425688,"is_bot":true,"first_name":"50","username":"51"},{"id":1377981370,"first_name":"45","username":"46","type":"48"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["52","53"],{"is_disabled":true},{"inline_keyboard":"54"},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"offset":0,"length":6,"type":"55"},"CrisisMapper","crisismapper_bot",{"offset":209,"length":41,"type":"56"},{"offset":250,"length":3,"type":"57","url":"58"},["59"],"bot_command","italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["60"],{"text":"61","callback_data":"62"},"Get Started","get_started"]
92	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-400],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[224,-400],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-224],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-224],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[448,-224],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,-48],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-48],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[896,-48],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[224,-224],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-48],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[448,-48],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,144],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,144],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,144],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[672,144],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,368],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,368],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"current_step":"end_of_form","row_number":"={{ $json.row_number }}","media":"={{ $('Description and Media Trigger').item.json.message.photo \\n    ? $('Description and Media Trigger').item.json.message.photo[$('Description and Media Trigger').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}\\n","description":"={{ $('Description and Media Trigger').item.json.message.caption || $('Description and Media Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,368],"id":"ed64d4df-b84d-4265-b123-ba6a51997cc6","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://api.openai.com/v1/chat/completions","authentication":"predefinedCredentialType","nodeCredentialType":"openAiApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"model\\": \\"gpt-3.5-turbo\\",\\n  \\"messages\\": [\\n    {\\"role\\": \\"system\\", \\"content\\": \\"Classify the disaster report as one of: food, rescue, medical, power, others. Also assign urgency: Low, Medium, or High. Respond with JSON like {\\\\\\"type\\\\\\":\\\\\\"...\\\\\\",\\\\\\"urgency\\\\\\":\\\\\\"...\\\\\\"}\\"},\\n    {\\"role\\": \\"user\\", \\"content\\": \\"\\"}\\n  ],\\n  \\"max_tokens\\": 30,\\n  \\"temperature\\": 0\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[656,368],"id":"258520d4-3fa9-46a0-be60-770aeea04f62","name":"HTTP Request","credentials":{"openAiApi":{"id":"p2T40GsW7EeHqQhv","name":"OpenAi account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]},"Find User - Desc & Media":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Get Started Trigger":"10","Check if Callback is Get Started":"11","Ask User's Name":"12","Append row in sheet":"13"},{},"Append row in sheet",{},[],{},["14"],["15"],["16"],["17"],{"startTime":1762902631019,"executionIndex":0,"source":"18","hints":"19","executionTime":1,"executionStatus":"20","data":"21"},{"startTime":1762902631020,"executionIndex":1,"source":"22","hints":"23","executionTime":3,"executionStatus":"20","data":"24"},{"startTime":1762902631023,"executionIndex":2,"source":"25","hints":"26","executionTime":1174,"executionStatus":"20","data":"27"},{"startTime":1762902632198,"executionIndex":3,"source":"28","hints":"29","executionTime":2363,"executionStatus":"20","data":"30"},[],[],"success",{"main":"31"},["32"],[],{"main":"33"},["34"],[],{"main":"35"},["36"],[],{"main":"37"},["38"],{"previousNode":"39"},["40","41"],{"previousNode":"42"},["43"],{"previousNode":"44"},["45"],["46"],"Get Started Trigger",["47"],[],"Check if Callback is Get Started",["48"],"Ask User's Name",["49"],{"json":"50","pairedItem":"51"},{"json":"50","pairedItem":"52"},{"json":"53","pairedItem":"54"},{"json":"55","pairedItem":"56"},{"update_id":483714050,"callback_query":"57"},{"item":0},{"item":0},{"ok":true,"result":"58"},{"item":0},{"user_id":1377981370,"current_step":"59","timestamp":"60"},{"item":0},{"id":"61","from":"62","message":"63","chat_instance":"64","data":"65"},{"message_id":64,"from":"66","chat":"67","date":1762902632,"text":"68","entities":"69","link_preview_options":"70"},"waiting_for_name","2025-11-11T18:10:33.105-05:00","5918384920470907126",{"id":1377981370,"is_bot":false,"first_name":"71","username":"72","language_code":"73"},{"message_id":63,"from":"74","chat":"75","date":1762902599,"text":"76","entities":"77","link_preview_options":"78","reply_markup":"79"},"1760275626831282877","get_started",{"id":8509425688,"is_bot":true,"first_name":"80","username":"81"},{"id":1377981370,"first_name":"71","username":"72","type":"82"},"Great! What's your full name?\\n\\nThis message was sent automatically with n8n",["83","84"],{"is_disabled":true},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en",{"id":8509425688,"is_bot":true,"first_name":"80","username":"81"},{"id":1377981370,"first_name":"71","username":"72","type":"82"},"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.\\n\\nThis message was sent automatically with n8n",["85","86"],{"is_disabled":true},{"inline_keyboard":"87"},"CrisisMapper","crisismapper_bot","private",{"offset":31,"length":41,"type":"88"},{"offset":72,"length":3,"type":"89","url":"90"},{"offset":209,"length":41,"type":"88"},{"offset":250,"length":3,"type":"89","url":"90"},["91"],"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999",["92"],{"text":"93","callback_data":"65"},"Get Started"]
94	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-400],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[224,-400],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-224],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-224],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[448,-224],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,-48],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-48],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[896,-48],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[224,-224],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-48],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[448,-48],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,144],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,144],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,144],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[672,144],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,368],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,368],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"current_step":"end_of_form","row_number":"={{ $json.row_number }}","media":"={{ $('Description and Media Trigger').item.json.message.photo \\n    ? $('Description and Media Trigger').item.json.message.photo[$('Description and Media Trigger').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}\\n","description":"={{ $('Description and Media Trigger').item.json.message.caption || $('Description and Media Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,368],"id":"ed64d4df-b84d-4265-b123-ba6a51997cc6","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://api.openai.com/v1/chat/completions","authentication":"predefinedCredentialType","nodeCredentialType":"openAiApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"model\\": \\"gpt-3.5-turbo\\",\\n  \\"messages\\": [\\n    {\\"role\\": \\"system\\", \\"content\\": \\"Classify the disaster report as one of: food, rescue, medical, power, others. Also assign urgency: Low, Medium, or High. Respond with JSON like {\\\\\\"type\\\\\\":\\\\\\"...\\\\\\",\\\\\\"urgency\\\\\\":\\\\\\"...\\\\\\"}\\"},\\n    {\\"role\\": \\"user\\", \\"content\\": \\"\\"}\\n  ],\\n  \\"max_tokens\\": 30,\\n  \\"temperature\\": 0\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[656,368],"id":"258520d4-3fa9-46a0-be60-770aeea04f62","name":"HTTP Request","credentials":{"openAiApi":{"id":"p2T40GsW7EeHqQhv","name":"OpenAi account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]},"Find User - Desc & Media":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Receive Coordinates":"10","Find User - Location":"11","Record User Coordinates":"12","Send a text message":"13"},{},"Send a text message",{},[],{},["14"],["15"],["16"],["17"],{"startTime":1762902679002,"executionIndex":0,"source":"18","hints":"19","executionTime":0,"executionStatus":"20","data":"21"},{"startTime":1762902679003,"executionIndex":1,"source":"22","hints":"23","executionTime":989,"executionStatus":"20","data":"24"},{"startTime":1762902679993,"executionIndex":2,"source":"25","hints":"26","executionTime":1343,"executionStatus":"20","data":"27"},{"startTime":1762902681337,"executionIndex":3,"source":"28","hints":"29","executionTime":954,"executionStatus":"20","data":"30"},[],[],"success",{"main":"31"},["32"],[],{"main":"33"},["34"],[],{"main":"35"},["36"],[],{"main":"37"},["38"],{"previousNode":"39"},["40"],{"previousNode":"41"},["42"],{"previousNode":"43"},["44"],["45"],"Receive Coordinates",["46"],"Find User - Location",["47"],"Record User Coordinates",["48"],{"json":"49","pairedItem":"50"},{"json":"51","pairedItem":"52"},{"json":"53","pairedItem":"54"},{"json":"55","pairedItem":"56"},{"update_id":483714052,"message":"57"},{"item":0},{"row_number":4,"user_id":1377981370,"current_step":"58","name":"59","latitude":"60","longitude":"60","description":"60","media":"60","timestamp":"61"},{"item":0},{"row_number":4,"current_step":"62","latitude":10.391845,"longitude":123.968693},{"item":0},{"ok":true,"result":"63"},{"item":0},{"message_id":68,"from":"64","chat":"65","date":1762902676,"location":"66"},"waiting_for_location","Francis Lagang","","2025-11-11T18:10:33.105-05:00","waiting_for_description",{"message_id":69,"from":"67","chat":"68","date":1762902682,"text":"69","entities":"70","link_preview_options":"71"},{"id":1377981370,"is_bot":false,"first_name":"72","username":"73","language_code":"74"},{"id":1377981370,"first_name":"72","username":"73","type":"75"},{"latitude":10.391845,"longitude":123.968693},{"id":8509425688,"is_bot":true,"first_name":"76","username":"77"},{"id":1377981370,"first_name":"72","username":"73","type":"75"},"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.\\n\\nThis message was sent automatically with n8n",["78","79"],{"is_disabled":true},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private","CrisisMapper","crisismapper_bot",{"offset":230,"length":41,"type":"80"},{"offset":271,"length":3,"type":"81","url":"82"},"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999"]
93	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-400],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[224,-400],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-224],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-224],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[448,-224],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,-48],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-48],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[896,-48],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[224,-224],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-48],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[448,-48],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,144],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,144],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,144],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[672,144],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,368],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,368],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"current_step":"end_of_form","row_number":"={{ $json.row_number }}","media":"={{ $('Description and Media Trigger').item.json.message.photo \\n    ? $('Description and Media Trigger').item.json.message.photo[$('Description and Media Trigger').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}\\n","description":"={{ $('Description and Media Trigger').item.json.message.caption || $('Description and Media Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,368],"id":"ed64d4df-b84d-4265-b123-ba6a51997cc6","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://api.openai.com/v1/chat/completions","authentication":"predefinedCredentialType","nodeCredentialType":"openAiApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"model\\": \\"gpt-3.5-turbo\\",\\n  \\"messages\\": [\\n    {\\"role\\": \\"system\\", \\"content\\": \\"Classify the disaster report as one of: food, rescue, medical, power, others. Also assign urgency: Low, Medium, or High. Respond with JSON like {\\\\\\"type\\\\\\":\\\\\\"...\\\\\\",\\\\\\"urgency\\\\\\":\\\\\\"...\\\\\\"}\\"},\\n    {\\"role\\": \\"user\\", \\"content\\": \\"\\"}\\n  ],\\n  \\"max_tokens\\": 30,\\n  \\"temperature\\": 0\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[656,368],"id":"258520d4-3fa9-46a0-be60-770aeea04f62","name":"HTTP Request","credentials":{"openAiApi":{"id":"p2T40GsW7EeHqQhv","name":"OpenAi account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]},"Find User - Desc & Media":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6"},{"contextData":"7","nodeExecutionStack":"8","waitingExecution":"9"},{"Name Trigger":"10","Find User":"11","If Callback Received Name":"12","Record Name":"13","Ask User Location":"14"},{},"Ask User Location",{},[],{},["15"],["16"],["17"],["18"],["19"],{"startTime":1762902664010,"executionIndex":0,"source":"20","hints":"21","executionTime":0,"executionStatus":"22","data":"23"},{"startTime":1762902664011,"executionIndex":1,"source":"24","hints":"25","executionTime":872,"executionStatus":"22","data":"26"},{"startTime":1762902664884,"executionIndex":2,"source":"27","hints":"28","executionTime":0,"executionStatus":"22","data":"29"},{"startTime":1762902664885,"executionIndex":3,"source":"30","hints":"31","executionTime":1425,"executionStatus":"22","data":"32"},{"startTime":1762902666311,"executionIndex":4,"source":"33","hints":"34","executionTime":967,"executionStatus":"22","data":"35"},[],[],"success",{"main":"36"},["37"],[],{"main":"38"},["39"],[],{"main":"40"},["41"],[],{"main":"42"},["43"],[],{"main":"44"},["45"],{"previousNode":"46"},["47"],{"previousNode":"48"},["49","50"],{"previousNode":"51"},["52"],{"previousNode":"53"},["54"],["55"],"Name Trigger",["56"],"Find User",["57"],[],"If Callback Received Name",["58"],"Record Name",["59"],{"json":"60","pairedItem":"61"},{"json":"62","pairedItem":"63"},{"json":"62","pairedItem":"64"},{"json":"65","pairedItem":"66"},{"json":"67","pairedItem":"68"},{"update_id":483714051,"message":"69"},{"item":0},{"row_number":4,"user_id":1377981370,"current_step":"70","name":"71","latitude":"71","longitude":"71","description":"71","media":"71","timestamp":"72"},{"item":0},{"item":0},{"row_number":4,"current_step":"73","name":"74"},{"item":0},{"ok":true,"result":"75"},{"item":0},{"message_id":66,"from":"76","chat":"77","date":1762902660,"text":"74"},"waiting_for_name","","2025-11-11T18:10:33.105-05:00","waiting_for_location","Francis Lagang",{"message_id":67,"from":"78","chat":"79","date":1762902667,"text":"80","entities":"81","link_preview_options":"82"},{"id":1377981370,"is_bot":false,"first_name":"83","username":"84","language_code":"85"},{"id":1377981370,"first_name":"83","username":"84","type":"86"},{"id":8509425688,"is_bot":true,"first_name":"87","username":"88"},{"id":1377981370,"first_name":"83","username":"84","type":"86"},"Thank you, Francis Lagang! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.\\n\\nThis message was sent automatically with n8n",["89","90"],{"is_disabled":true},"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private","CrisisMapper","crisismapper_bot",{"offset":164,"length":41,"type":"91"},{"offset":205,"length":3,"type":"92","url":"93"},"italic","text_link","https://n8n.io/?utm_source=n8n-internal&utm_medium=powered_by&utm_campaign=n8n-nodes-base.telegram_da308b7e65961590b45269f5d635895be90923699ad71f09883d15b493648999"]
95	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-400],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[224,-400],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-224],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-224],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[448,-224],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,-48],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-48],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[896,-48],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[224,-224],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-48],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[448,-48],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,144],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,144],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,144],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[672,144],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,368],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,368],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"current_step":"end_of_form","row_number":"={{ $json.row_number }}","media":"={{ $('Description and Media Trigger').item.json.message.photo \\n    ? $('Description and Media Trigger').item.json.message.photo[$('Description and Media Trigger').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}\\n","description":"={{ $('Description and Media Trigger').item.json.message.caption || $('Description and Media Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,368],"id":"ed64d4df-b84d-4265-b123-ba6a51997cc6","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://api.openai.com/v1/chat/completions","authentication":"predefinedCredentialType","nodeCredentialType":"openAiApi","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"model\\": \\"gpt-3.5-turbo\\",\\n  \\"messages\\": [\\n    {\\"role\\": \\"system\\", \\"content\\": \\"Classify the disaster report as one of: food, rescue, medical, power, others. Also assign urgency: Low, Medium, or High. Respond with JSON like {\\\\\\"type\\\\\\":\\\\\\"...\\\\\\",\\\\\\"urgency\\\\\\":\\\\\\"...\\\\\\"}\\"},\\n    {\\"role\\": \\"user\\", \\"content\\": \\"\\"}\\n  ],\\n  \\"max_tokens\\": 30,\\n  \\"temperature\\": 0\\n}\\n","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[656,368],"id":"258520d4-3fa9-46a0-be60-770aeea04f62","name":"HTTP Request","credentials":{"openAiApi":{"id":"p2T40GsW7EeHqQhv","name":"OpenAi account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]},"Find User - Desc & Media":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{},{"runData":"4","pinData":"5","lastNodeExecuted":"6","error":"7"},{"contextData":"8","nodeExecutionStack":"9","waitingExecution":"10"},{"Description and Media Trigger":"11","Find User - Desc & Media":"12","Update row in sheet":"13","HTTP Request":"14"},{},"HTTP Request",{"level":"15","tags":"16","description":"17","timestamp":1762902707783,"context":"18","functionality":"19","name":"20","node":"21","messages":"22","httpCode":"23","message":"24","stack":"25"},{},["26"],{},["27"],["28"],["29"],["30"],"warning",{},"You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.",{"itemIndex":0,"request":"31"},"regular","NodeApiError",{"parameters":"32","type":"33","typeVersion":4.3,"position":"34","id":"35","name":"6","credentials":"36"},["37"],"429","The service is receiving too many requests from you","NodeApiError: The service is receiving too many requests from you\\n    at ExecuteContext.requestWithAuthentication (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/node-execution-context/utils/request-helper-functions.ts:1420:10)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at ExecuteContext.requestWithAuthentication (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/node-execution-context/utils/request-helper-functions.ts:1706:11)",{"node":"38","data":"39","source":"40"},{"startTime":1762902700139,"executionIndex":0,"source":"41","hints":"42","executionTime":0,"executionStatus":"43","data":"44"},{"startTime":1762902700139,"executionIndex":1,"source":"45","hints":"46","executionTime":891,"executionStatus":"43","data":"47"},{"startTime":1762902701031,"executionIndex":2,"source":"48","hints":"49","executionTime":1299,"executionStatus":"43","data":"50"},{"startTime":1762902702331,"executionIndex":3,"source":"51","hints":"52","executionTime":5745,"executionStatus":"53","error":"54"},{"body":"55","headers":"56","method":"57","uri":"58","gzip":true,"rejectUnauthorized":true,"followRedirect":true,"resolveWithFullResponse":true,"followAllRedirects":true,"timeout":300000,"encoding":null,"json":false,"useStream":true},{"preBuiltAgentsCalloutHttpRequest":"59","curlImport":"59","method":"57","url":"58","authentication":"60","nodeCredentialType":"61","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"62","specifyBody":"62","jsonBody":"63","options":"64","infoMessage":"59"},"n8n-nodes-base.httpRequest",[656,368],"258520d4-3fa9-46a0-be60-770aeea04f62",{"openAiApi":"65"},"429 - \\"{\\\\n    \\\\\\"error\\\\\\": {\\\\n        \\\\\\"message\\\\\\": \\\\\\"You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.\\\\\\",\\\\n        \\\\\\"type\\\\\\": \\\\\\"insufficient_quota\\\\\\",\\\\n        \\\\\\"param\\\\\\": null,\\\\n        \\\\\\"code\\\\\\": \\\\\\"insufficient_quota\\\\\\"\\\\n    }\\\\n}\\\\n\\"",{"parameters":"66","type":"33","typeVersion":4.3,"position":"67","id":"35","name":"6","credentials":"68"},{"main":"69"},{"main":"51"},[],[],"success",{"main":"70"},["71"],[],{"main":"72"},["73"],[],{"main":"74"},["75"],[],"error",{"level":"15","tags":"16","description":"17","timestamp":1762902707783,"context":"18","functionality":"19","name":"20","node":"21","messages":"22","httpCode":"23","message":"24","stack":"25"},{"model":"76","messages":"77","max_tokens":30,"temperature":0},{"accept":"78","Authorization":"79","OpenAI-Organization":"59"},"POST","https://api.openai.com/v1/chat/completions","","predefinedCredentialType","openAiApi","json","={\\n  \\"model\\": \\"gpt-3.5-turbo\\",\\n  \\"messages\\": [\\n    {\\"role\\": \\"system\\", \\"content\\": \\"Classify the disaster report as one of: food, rescue, medical, power, others. Also assign urgency: Low, Medium, or High. Respond with JSON like {\\\\\\"type\\\\\\":\\\\\\"...\\\\\\",\\\\\\"urgency\\\\\\":\\\\\\"...\\\\\\"}\\"},\\n    {\\"role\\": \\"user\\", \\"content\\": \\"\\"}\\n  ],\\n  \\"max_tokens\\": 30,\\n  \\"temperature\\": 0\\n}\\n",{},{"id":"80","name":"81"},{"preBuiltAgentsCalloutHttpRequest":"59","curlImport":"59","method":"57","url":"58","authentication":"60","nodeCredentialType":"61","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"62","specifyBody":"62","jsonBody":"63","options":"82","infoMessage":"59"},[656,368],{"openAiApi":"83"},["84"],["85"],{"previousNode":"86"},["87"],{"previousNode":"88"},["89"],{"previousNode":"90"},"gpt-3.5-turbo",["91","92"],"application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7","**hidden**","p2T40GsW7EeHqQhv","OpenAi account",{},{"id":"80","name":"81"},["93"],["94"],"Description and Media Trigger",["95"],"Find User - Desc & Media",["96"],"Update row in sheet",{"role":"97","content":"98"},{"role":"99","content":"59"},{"json":"100","pairedItem":"101"},{"json":"102","pairedItem":"103"},{"json":"104","pairedItem":"105"},{"json":"100","pairedItem":"106"},"system","Classify the disaster report as one of: food, rescue, medical, power, others. Also assign urgency: Low, Medium, or High. Respond with JSON like {\\"type\\":\\"...\\",\\"urgency\\":\\"...\\"}","user",{"current_step":"107","row_number":4,"media":"108","description":"109"},{"item":0},{"update_id":483714053,"message":"110"},{"item":0},{"row_number":4,"user_id":1377981370,"current_step":"111","name":"112","latitude":10.391845,"longitude":123.968693,"description":"59","media":"59","timestamp":"113"},{"item":0},{"item":0},"end_of_form","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA\\n","Power is out. All our gadgets are drained. We need someone to take us to an evacuation center ASAP.",{"message_id":70,"from":"114","chat":"115","date":1762902697,"photo":"116","caption":"109"},"waiting_for_description","Francis Lagang","2025-11-11T18:10:33.105-05:00",{"id":1377981370,"is_bot":false,"first_name":"117","username":"118","language_code":"119"},{"id":1377981370,"first_name":"117","username":"118","type":"120"},["121","122","123","124"],"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"file_id":"125","file_unique_id":"126","file_size":837,"width":67,"height":90},{"file_id":"127","file_unique_id":"128","file_size":10374,"width":240,"height":320},{"file_id":"129","file_unique_id":"130","file_size":59720,"width":600,"height":800},{"file_id":"131","file_unique_id":"132","file_size":79003,"width":960,"height":1280},"AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANzAAM2BA","AQADVQxrG3KrmFR4","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANtAAM2BA","AQADVQxrG3KrmFRy","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN4AAM2BA","AQADVQxrG3KrmFR9","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA","AQADVQxrG3KrmFR-"]
96	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-400],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[224,-400],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-224],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-224],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[448,-224],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,-48],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-48],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[896,-48],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[224,-224],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-48],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[448,-48],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,144],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,144],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,144],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[672,144],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,368],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,368],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"current_step":"end_of_form","row_number":"={{ $json.row_number }}","media":"={{ $('Description and Media Trigger').item.json.message.photo \\n    ? $('Description and Media Trigger').item.json.message.photo[$('Description and Media Trigger').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}\\n","description":"={{ $('Description and Media Trigger').item.json.message.caption || $('Description and Media Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,368],"id":"ed64d4df-b84d-4265-b123-ba6a51997cc6","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"mode":"runOnceForAllItems","language":"javaScript","jsCode":"// Parse the first item in the returned array from uClassify\\nconst classes = items[0].json[0];\\n// Find the class with the highest probability\\nlet topClass = classes[0];\\n\\nfor (let c of classes) {\\n  if (c.p > topClass.p) topClass = c;\\n}\\n\\n// Output an item containing only the best class (type)\\nreturn [{ json: { type: topClass.className, probability: topClass.p } }];","notice":""},"type":"n8n-nodes-base.code","typeVersion":2,"position":[864,368],"id":"56ab17aa-83fc-48e9-b2b5-50c534c7bcbc","name":"Extract Classification Result"},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://api.uclassify.com/v1/uclassify/topics/classify","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"texts\\": [ \\"{{ $json.description }}\\" ]\\n}","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[656,368],"id":"258520d4-3fa9-46a0-be60-770aeea04f62","name":"uClassify (AI) Request","credentials":{"openAiApi":{"id":"p2T40GsW7EeHqQhv","name":"OpenAi account"},"httpHeaderAuth":{"id":"VxZc1cjaRgBJsWRh","name":"uClassify account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]},"Find User - Desc & Media":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"uClassify (AI) Request","type":"main","index":0}]]},"uClassify (AI) Request":{"main":[[{"node":"Extract Classification Result","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4","error":"8"},{"contextData":"9","nodeExecutionStack":"10","metadata":"11","waitingExecution":"12","waitingExecutionSource":"13"},"uClassify (AI) Request",["14","15","4","16"],{"Description and Media Trigger":"17","Find User - Desc & Media":"18","Update row in sheet":"19","uClassify (AI) Request":"20"},{},{"level":"21","tags":"22","timestamp":1762903444397,"context":"23","functionality":"24","name":"25","node":"26","messages":"27","httpCode":"28","message":"29","stack":"30"},{},["31"],{},{},{},"Description and Media Trigger","Update row in sheet","Find User - Desc & Media",["32"],["33"],["34"],["35"],"warning",{},{"itemIndex":0,"request":"36"},"regular","NodeApiError",{"parameters":"37","type":"38","typeVersion":4.3,"position":"39","id":"40","name":"4","credentials":"41"},["29"],"ERR_INVALID_HTTP_TOKEN","Header name must be a valid HTTP token [\\"uClassify API Key\\"]","NodeApiError: Header name must be a valid HTTP token [\\"uClassify API Key\\"]\\n    at ExecuteContext.execute (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/HttpRequest/V3/HttpRequestV3.node.ts:858:16)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at WorkflowExecute.executeNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1093:8)\\n    at WorkflowExecute.runNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1274:11)\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1708:27\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:2324:11",{"node":"42","data":"43","source":"44"},{"startTime":1762902700139,"executionIndex":0,"source":"45","hints":"46","executionTime":0,"executionStatus":"47","data":"48"},{"startTime":1762902700139,"executionIndex":1,"source":"49","hints":"50","executionTime":891,"executionStatus":"47","data":"51"},{"startTime":1762902701031,"executionIndex":2,"source":"52","hints":"53","executionTime":1299,"executionStatus":"47","data":"54"},{"startTime":1762903443207,"executionIndex":3,"source":"55","hints":"56","executionTime":1289,"executionStatus":"57","error":"58"},{"body":"59","headers":"60","method":"61","uri":"62","gzip":true,"rejectUnauthorized":true,"followRedirect":true,"resolveWithFullResponse":true,"followAllRedirects":true,"timeout":300000,"encoding":null,"json":false,"useStream":true},{"preBuiltAgentsCalloutHttpRequest":"63","curlImport":"63","method":"61","url":"62","authentication":"64","genericAuthType":"65","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"66","specifyBody":"66","jsonBody":"67","options":"68","infoMessage":"63"},"n8n-nodes-base.httpRequest",[656,368],"258520d4-3fa9-46a0-be60-770aeea04f62",{"openAiApi":"69","httpHeaderAuth":"70"},{"parameters":"71","type":"38","typeVersion":4.3,"position":"72","id":"40","name":"4","credentials":"73"},{"main":"74"},{"main":"55"},[],[],"success",{"main":"75"},["76"],[],{"main":"77"},["78"],[],{"main":"79"},["80"],[],"error",{"level":"21","tags":"22","timestamp":1762903444397,"context":"23","functionality":"24","name":"25","node":"26","messages":"27","httpCode":"28","message":"29","stack":"30"},{"texts":"81"},{"uClassify API Key":"82","accept":"83"},"POST","https://api.uclassify.com/v1/uclassify/topics/classify","","genericCredentialType","httpHeaderAuth","json","={\\n  \\"texts\\": [ \\"{{ $json.description }}\\" ]\\n}",{},{"id":"84","name":"85"},{"id":"86","name":"87"},{"preBuiltAgentsCalloutHttpRequest":"63","curlImport":"63","method":"61","url":"62","authentication":"64","genericAuthType":"65","provideSslCertificates":false,"sendQuery":false,"sendHeaders":false,"sendBody":true,"contentType":"66","specifyBody":"66","jsonBody":"67","options":"88","infoMessage":"63"},[656,368],{"openAiApi":"89","httpHeaderAuth":"90"},["91"],["92"],{"previousNode":"14"},["93"],{"previousNode":"16"},["94"],{"previousNode":"15","previousNodeOutput":0,"previousNodeRun":0},["95"],"**hidden**","application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7","p2T40GsW7EeHqQhv","OpenAi account","VxZc1cjaRgBJsWRh","uClassify account",{},{"id":"84","name":"85"},{"id":"86","name":"87"},["96"],["97"],["98"],["99"],"Power is out. All our gadgets are drained. We need someone to take us to an evacuation center ASAP.",{"json":"100","pairedItem":"101"},{"json":"102","pairedItem":"103"},{"json":"104","pairedItem":"105"},{"json":"100","pairedItem":"106"},{"current_step":"107","row_number":4,"media":"108","description":"95"},{"item":0},{"update_id":483714053,"message":"109"},{"item":0},{"row_number":4,"user_id":1377981370,"current_step":"110","name":"111","latitude":10.391845,"longitude":123.968693,"description":"63","media":"63","timestamp":"112"},{"item":0},{"item":0},"end_of_form","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA\\n",{"message_id":70,"from":"113","chat":"114","date":1762902697,"photo":"115","caption":"95"},"waiting_for_description","Francis Lagang","2025-11-11T18:10:33.105-05:00",{"id":1377981370,"is_bot":false,"first_name":"116","username":"117","language_code":"118"},{"id":1377981370,"first_name":"116","username":"117","type":"119"},["120","121","122","123"],"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"file_id":"124","file_unique_id":"125","file_size":837,"width":67,"height":90},{"file_id":"126","file_unique_id":"127","file_size":10374,"width":240,"height":320},{"file_id":"128","file_unique_id":"129","file_size":59720,"width":600,"height":800},{"file_id":"130","file_unique_id":"131","file_size":79003,"width":960,"height":1280},"AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANzAAM2BA","AQADVQxrG3KrmFR4","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANtAAM2BA","AQADVQxrG3KrmFRy","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN4AAM2BA","AQADVQxrG3KrmFR9","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA","AQADVQxrG3KrmFR-"]
97	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-400],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[224,-400],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-224],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-224],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[448,-224],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,-48],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-48],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[896,-48],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[224,-224],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-48],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[448,-48],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,144],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,144],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,144],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[672,144],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,368],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,368],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"current_step":"end_of_form","row_number":"={{ $json.row_number }}","media":"={{ $('Description and Media Trigger').item.json.message.photo \\n    ? $('Description and Media Trigger').item.json.message.photo[$('Description and Media Trigger').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}\\n","description":"={{ $('Description and Media Trigger').item.json.message.caption || $('Description and Media Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,368],"id":"ed64d4df-b84d-4265-b123-ba6a51997cc6","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"mode":"runOnceForAllItems","language":"javaScript","jsCode":"// Parse the first item in the returned array from uClassify\\nconst classes = items[0].json[0];\\n// Find the class with the highest probability\\nlet topClass = classes[0];\\n\\nfor (let c of classes) {\\n  if (c.p > topClass.p) topClass = c;\\n}\\n\\n// Output an item containing only the best class (type)\\nreturn [{ json: { type: topClass.className, probability: topClass.p } }];","notice":""},"type":"n8n-nodes-base.code","typeVersion":2,"position":[864,368],"id":"56ab17aa-83fc-48e9-b2b5-50c534c7bcbc","name":"Extract Classification Result"},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://api.uclassify.com/v1/uclassify/topics/classify","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","provideSslCertificates":false,"sendQuery":false,"sendHeaders":true,"specifyHeaders":"keypair","headerParameters":{"parameters":[{"name":"Authorization","value":"Token KGdniQyYUn2K"}]},"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"texts\\": [ \\"{{ $json.description }}\\" ]\\n}","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[656,368],"id":"258520d4-3fa9-46a0-be60-770aeea04f62","name":"uClassify (AI) Request","credentials":{"openAiApi":{"id":"p2T40GsW7EeHqQhv","name":"OpenAi account"},"httpHeaderAuth":{"id":"VxZc1cjaRgBJsWRh","name":"uClassify account"}}}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]},"Find User - Desc & Media":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"uClassify (AI) Request","type":"main","index":0}]]},"uClassify (AI) Request":{"main":[[{"node":"Extract Classification Result","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4","error":"8"},{"contextData":"9","nodeExecutionStack":"10","metadata":"11","waitingExecution":"12","waitingExecutionSource":"13"},"uClassify (AI) Request",["14","15","4","16"],{"Description and Media Trigger":"17","Find User - Desc & Media":"18","Update row in sheet":"19","uClassify (AI) Request":"20"},{},{"level":"21","tags":"22","timestamp":1762903553686,"context":"23","functionality":"24","name":"25","node":"26","messages":"27","httpCode":"28","message":"29","stack":"30"},{},["31"],{},{},{},"Description and Media Trigger","Update row in sheet","Find User - Desc & Media",["32"],["33"],["34"],["35"],"warning",{},{"itemIndex":0,"request":"36"},"regular","NodeApiError",{"parameters":"37","type":"38","typeVersion":4.3,"position":"39","id":"40","name":"4","credentials":"41"},["29"],"ERR_INVALID_HTTP_TOKEN","Header name must be a valid HTTP token [\\"uClassify API Key\\"]","NodeApiError: Header name must be a valid HTTP token [\\"uClassify API Key\\"]\\n    at ExecuteContext.execute (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-nodes-base@file+packages+nodes-base_@aws-sdk+credential-providers@3.808.0_asn1.js@5_afd197edb2c1f848eae21a96a97fab23/node_modules/n8n-nodes-base/nodes/HttpRequest/V3/HttpRequestV3.node.ts:858:16)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at WorkflowExecute.executeNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1093:8)\\n    at WorkflowExecute.runNode (/usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1274:11)\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:1708:27\\n    at /usr/local/lib/node_modules/n8n/node_modules/.pnpm/n8n-core@file+packages+core_@opentelemetry+api@1.9.0_@opentelemetry+sdk-trace-base@1.30_08b575bec2313d5d8a4cc75358971443/node_modules/n8n-core/src/execution-engine/workflow-execute.ts:2324:11",{"node":"42","data":"43","source":"44"},{"startTime":1762902700139,"executionIndex":0,"source":"45","hints":"46","executionTime":0,"executionStatus":"47","data":"48"},{"startTime":1762902700139,"executionIndex":1,"source":"49","hints":"50","executionTime":891,"executionStatus":"47","data":"51"},{"startTime":1762902701031,"executionIndex":2,"source":"52","hints":"53","executionTime":1299,"executionStatus":"47","data":"54"},{"startTime":1762903553398,"executionIndex":3,"source":"55","hints":"56","executionTime":288,"executionStatus":"57","error":"58"},{"body":"59","headers":"60","method":"61","uri":"62","gzip":true,"rejectUnauthorized":true,"followRedirect":true,"resolveWithFullResponse":true,"followAllRedirects":true,"timeout":300000,"encoding":null,"json":false,"useStream":true},{"preBuiltAgentsCalloutHttpRequest":"63","curlImport":"63","method":"61","url":"62","authentication":"64","genericAuthType":"65","provideSslCertificates":false,"sendQuery":false,"sendHeaders":true,"specifyHeaders":"66","headerParameters":"67","sendBody":true,"contentType":"68","specifyBody":"68","jsonBody":"69","options":"70","infoMessage":"63"},"n8n-nodes-base.httpRequest",[656,368],"258520d4-3fa9-46a0-be60-770aeea04f62",{"openAiApi":"71","httpHeaderAuth":"72"},{"parameters":"73","type":"38","typeVersion":4.3,"position":"74","id":"40","name":"4","credentials":"75"},{"main":"76"},{"main":"55"},[],[],"success",{"main":"77"},["78"],[],{"main":"79"},["80"],[],{"main":"81"},["82"],[],"error",{"level":"21","tags":"22","timestamp":1762903553686,"context":"23","functionality":"24","name":"25","node":"26","messages":"27","httpCode":"28","message":"29","stack":"30"},{"texts":"83"},{"authorization":"84","uClassify API Key":"84","accept":"85"},"POST","https://api.uclassify.com/v1/uclassify/topics/classify","","genericCredentialType","httpHeaderAuth","keypair",{"parameters":"86"},"json","={\\n  \\"texts\\": [ \\"{{ $json.description }}\\" ]\\n}",{},{"id":"87","name":"88"},{"id":"89","name":"90"},{"preBuiltAgentsCalloutHttpRequest":"63","curlImport":"63","method":"61","url":"62","authentication":"64","genericAuthType":"65","provideSslCertificates":false,"sendQuery":false,"sendHeaders":true,"specifyHeaders":"66","headerParameters":"91","sendBody":true,"contentType":"68","specifyBody":"68","jsonBody":"69","options":"92","infoMessage":"63"},[656,368],{"openAiApi":"93","httpHeaderAuth":"94"},["95"],["96"],{"previousNode":"14"},["97"],{"previousNode":"16"},["98"],{"previousNode":"15","previousNodeOutput":0,"previousNodeRun":0},["99"],"**hidden**","application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",["100"],"p2T40GsW7EeHqQhv","OpenAi account","VxZc1cjaRgBJsWRh","uClassify account",{"parameters":"101"},{},{"id":"87","name":"88"},{"id":"89","name":"90"},["102"],["103"],["104"],["105"],"Power is out. All our gadgets are drained. We need someone to take us to an evacuation center ASAP.",{"name":"106","value":"107"},["108"],{"json":"109","pairedItem":"110"},{"json":"111","pairedItem":"112"},{"json":"113","pairedItem":"114"},{"json":"109","pairedItem":"115"},"Authorization","Token KGdniQyYUn2K",{"name":"106","value":"107"},{"current_step":"116","row_number":4,"media":"117","description":"99"},{"item":0},{"update_id":483714053,"message":"118"},{"item":0},{"row_number":4,"user_id":1377981370,"current_step":"119","name":"120","latitude":10.391845,"longitude":123.968693,"description":"63","media":"63","timestamp":"121"},{"item":0},{"item":0},"end_of_form","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA\\n",{"message_id":70,"from":"122","chat":"123","date":1762902697,"photo":"124","caption":"99"},"waiting_for_description","Francis Lagang","2025-11-11T18:10:33.105-05:00",{"id":1377981370,"is_bot":false,"first_name":"125","username":"126","language_code":"127"},{"id":1377981370,"first_name":"125","username":"126","type":"128"},["129","130","131","132"],"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"file_id":"133","file_unique_id":"134","file_size":837,"width":67,"height":90},{"file_id":"135","file_unique_id":"136","file_size":10374,"width":240,"height":320},{"file_id":"137","file_unique_id":"138","file_size":59720,"width":600,"height":800},{"file_id":"139","file_unique_id":"140","file_size":79003,"width":960,"height":1280},"AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANzAAM2BA","AQADVQxrG3KrmFR4","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANtAAM2BA","AQADVQxrG3KrmFRy","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN4AAM2BA","AQADVQxrG3KrmFR9","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA","AQADVQxrG3KrmFR-"]
98	{"id":"EXVIlWqfZ2MPIEOk","name":"CrisisMapper","active":false,"nodes":[{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-400],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[224,-400],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["callback_query"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-224],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-224],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[448,-224],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,-48],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-48],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[896,-48],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[224,-224],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-48],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"looseTypeValidation":false,"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[448,-48],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,144],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,144],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,144],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutTelegram":"","resource":"message","operation":"sendMessage","chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","replyMarkup":"none","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[672,144],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"telegramTriggerNotice":"","updates":["message"],"attachmentNotice":"","additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,368],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"read","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"combineFilters":"AND","options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,368],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"preBuiltAgentsCalloutGoogleSheets":"","authentication":"oAuth2","resource":"sheet","operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"current_step":"end_of_form","row_number":"={{ $json.row_number }}","media":"={{ $('Description and Media Trigger').item.json.message.photo \\n    ? $('Description and Media Trigger').item.json.message.photo[$('Description and Media Trigger').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}\\n","description":"={{ $('Description and Media Trigger').item.json.message.caption || $('Description and Media Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,368],"id":"ed64d4df-b84d-4265-b123-ba6a51997cc6","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"mode":"runOnceForAllItems","language":"javaScript","jsCode":"// Parse the first item in the returned array from uClassify\\nconst classes = items[0].json[0];\\n// Find the class with the highest probability\\nlet topClass = classes[0];\\n\\nfor (let c of classes) {\\n  if (c.p > topClass.p) topClass = c;\\n}\\n\\n// Output an item containing only the best class (type)\\nreturn [{ json: { type: topClass.className, probability: topClass.p } }];","notice":""},"type":"n8n-nodes-base.code","typeVersion":2,"position":[864,368],"id":"56ab17aa-83fc-48e9-b2b5-50c534c7bcbc","name":"Extract Classification Result"},{"parameters":{"preBuiltAgentsCalloutHttpRequest":"","curlImport":"","method":"POST","url":"https://api.uclassify.com/v1/uclassify/topics/classify","authentication":"none","provideSslCertificates":false,"sendQuery":false,"sendHeaders":true,"specifyHeaders":"keypair","headerParameters":{"parameters":[{"name":"Authorization","value":"Token KGdniQyYUn2K"}]},"sendBody":true,"contentType":"json","specifyBody":"json","jsonBody":"={\\n  \\"texts\\": [ \\"{{ $json.description }}\\" ]\\n}","options":{},"infoMessage":""},"type":"n8n-nodes-base.httpRequest","typeVersion":4.3,"position":[656,368],"id":"258520d4-3fa9-46a0-be60-770aeea04f62","name":"uClassify (AI) Request"}],"connections":{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]},"Find User - Desc & Media":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"Update row in sheet":{"main":[[{"node":"uClassify (AI) Request","type":"main","index":0}]]},"uClassify (AI) Request":{"main":[[{"node":"Extract Classification Result","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"pinData":{}}	[{"startData":"1","resultData":"2","executionData":"3"},{"destinationNode":"4","runNodeFilter":"5"},{"runData":"6","pinData":"7","lastNodeExecuted":"4"},{"contextData":"8","nodeExecutionStack":"9","metadata":"10","waitingExecution":"11","waitingExecutionSource":"12"},"uClassify (AI) Request",["13","14","4","15"],{"Description and Media Trigger":"16","Find User - Desc & Media":"17","Update row in sheet":"18","uClassify (AI) Request":"19"},{},{"node:uClassify (AI) Request":"20"},[],{},{},{},"Description and Media Trigger","Update row in sheet","Find User - Desc & Media",["21"],["22"],["23"],["24"],{"response":"25"},{"startTime":1762902700139,"executionIndex":0,"source":"26","hints":"27","executionTime":0,"executionStatus":"28","data":"29"},{"startTime":1762902700139,"executionIndex":1,"source":"30","hints":"31","executionTime":891,"executionStatus":"28","data":"32"},{"startTime":1762902701031,"executionIndex":2,"source":"33","hints":"34","executionTime":1299,"executionStatus":"28","data":"35"},{"startTime":1762903658127,"executionIndex":3,"source":"36","hints":"37","executionTime":332,"executionStatus":"28","data":"38"},{"body":"39"},[],[],"success",{"main":"40"},["41"],[],{"main":"42"},["43"],[],{"main":"44"},["45"],[],{"main":"46"},["47"],["48"],{"previousNode":"13"},["49"],{"previousNode":"15"},["50"],{"previousNode":"14","previousNodeOutput":0,"previousNodeRun":0},["51"],{"textCoverage":0.555556,"classification":"52"},["53"],["54"],["55"],["56"],["57","58","59","60","61","62","63","64","65","66"],{"json":"67","pairedItem":"68"},{"json":"69","pairedItem":"70"},{"json":"71","pairedItem":"72"},{"json":"47","pairedItem":"73"},{"className":"74","p":0.0435354},{"className":"75","p":0.144461},{"className":"76","p":0.134358},{"className":"77","p":0.0593026},{"className":"78","p":0.148909},{"className":"79","p":0.0674258},{"className":"80","p":0.0995746},{"className":"81","p":0.222855},{"className":"82","p":0.0526404},{"className":"83","p":0.0269388},{"update_id":483714053,"message":"84"},{"item":0},{"row_number":4,"user_id":1377981370,"current_step":"85","name":"86","latitude":10.391845,"longitude":123.968693,"description":"87","media":"87","timestamp":"88"},{"item":0},{"current_step":"89","row_number":4,"media":"90","description":"91"},{"item":0},{"item":0},"Arts","Business","Computers","Games","Health","Home","Recreation","Science","Society","Sports",{"message_id":70,"from":"92","chat":"93","date":1762902697,"photo":"94","caption":"91"},"waiting_for_description","Francis Lagang","","2025-11-11T18:10:33.105-05:00","end_of_form","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA\\n","Power is out. All our gadgets are drained. We need someone to take us to an evacuation center ASAP.",{"id":1377981370,"is_bot":false,"first_name":"95","username":"96","language_code":"97"},{"id":1377981370,"first_name":"95","username":"96","type":"98"},["99","100","101","102"],"ð–˜ð–•ð–‘ð–šð–—ð–—ð–Žð–‰ð–Œð–Š","splurridge","en","private",{"file_id":"103","file_unique_id":"104","file_size":837,"width":67,"height":90},{"file_id":"105","file_unique_id":"106","file_size":10374,"width":240,"height":320},{"file_id":"107","file_unique_id":"108","file_size":59720,"width":600,"height":800},{"file_id":"109","file_unique_id":"110","file_size":79003,"width":960,"height":1280},"AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANzAAM2BA","AQADVQxrG3KrmFR4","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAANtAAM2BA","AQADVQxrG3KrmFRy","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN4AAM2BA","AQADVQxrG3KrmFR9","AgACAgUAAxkBAAMZaRLfzrfkGB_tYuIJdLNRm1EPHgIAAlUMaxtyq5hUD_Y7Q9JtoWYBAAMCAAN5AAM2BA","AQADVQxrG3KrmFR-"]
\.


--
-- Data for Name: execution_metadata; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."execution_metadata" ("id", "executionId", "key", "value") FROM stdin;
\.


--
-- Data for Name: tag_entity; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."tag_entity" ("name", "createdAt", "updatedAt", "id") FROM stdin;
\.


--
-- Data for Name: folder_tag; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."folder_tag" ("folderId", "tagId") FROM stdin;
\.


--
-- Data for Name: insights_metadata; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."insights_metadata" ("metaId", "workflowId", "projectId", "workflowName", "projectName") FROM stdin;
\.


--
-- Data for Name: insights_by_period; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."insights_by_period" ("id", "metaId", "type", "value", "periodUnit", "periodStart") FROM stdin;
\.


--
-- Data for Name: insights_raw; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."insights_raw" ("id", "metaId", "type", "value", "timestamp") FROM stdin;
\.


--
-- Data for Name: installed_packages; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."installed_packages" ("packageName", "installedVersion", "authorName", "authorEmail", "createdAt", "updatedAt") FROM stdin;
\.


--
-- Data for Name: installed_nodes; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."installed_nodes" ("name", "type", "latestVersion", "package") FROM stdin;
\.


--
-- Data for Name: invalid_auth_token; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."invalid_auth_token" ("token", "expiresAt") FROM stdin;
\.


--
-- Data for Name: migrations; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."migrations" ("id", "timestamp", "name") FROM stdin;
1	1587669153312	InitialMigration1587669153312
2	1589476000887	WebhookModel1589476000887
3	1594828256133	CreateIndexStoppedAt1594828256133
4	1607431743768	MakeStoppedAtNullable1607431743768
5	1611144599516	AddWebhookId1611144599516
6	1617270242566	CreateTagEntity1617270242566
7	1620824779533	UniqueWorkflowNames1620824779533
8	1626176912946	AddwaitTill1626176912946
9	1630419189837	UpdateWorkflowCredentials1630419189837
10	1644422880309	AddExecutionEntityIndexes1644422880309
11	1646834195327	IncreaseTypeVarcharLimit1646834195327
12	1646992772331	CreateUserManagement1646992772331
13	1648740597343	LowerCaseUserEmail1648740597343
14	1652254514002	CommunityNodes1652254514002
15	1652367743993	AddUserSettings1652367743993
16	1652905585850	AddAPIKeyColumn1652905585850
17	1654090467022	IntroducePinData1654090467022
18	1658932090381	AddNodeIds1658932090381
19	1659902242948	AddJsonKeyPinData1659902242948
20	1660062385367	CreateCredentialsUserRole1660062385367
21	1663755770893	CreateWorkflowsEditorRole1663755770893
22	1664196174001	WorkflowStatistics1664196174001
23	1665484192212	CreateCredentialUsageTable1665484192212
24	1665754637025	RemoveCredentialUsageTable1665754637025
25	1669739707126	AddWorkflowVersionIdColumn1669739707126
26	1669823906995	AddTriggerCountColumn1669823906995
27	1671535397530	MessageEventBusDestinations1671535397530
28	1671726148421	RemoveWorkflowDataLoadedFlag1671726148421
29	1673268682475	DeleteExecutionsWithWorkflows1673268682475
30	1674138566000	AddStatusToExecutions1674138566000
31	1674509946020	CreateLdapEntities1674509946020
32	1675940580449	PurgeInvalidWorkflowConnections1675940580449
33	1676996103000	MigrateExecutionStatus1676996103000
34	1677236854063	UpdateRunningExecutionStatus1677236854063
35	1677501636754	CreateVariables1677501636754
36	1679416281778	CreateExecutionMetadataTable1679416281778
37	1681134145996	AddUserActivatedProperty1681134145996
38	1681134145997	RemoveSkipOwnerSetup1681134145997
39	1690000000000	MigrateIntegerKeysToString1690000000000
40	1690000000020	SeparateExecutionData1690000000020
41	1690000000030	RemoveResetPasswordColumns1690000000030
42	1690000000030	AddMfaColumns1690000000030
43	1690787606731	AddMissingPrimaryKeyOnExecutionData1690787606731
44	1691088862123	CreateWorkflowNameIndex1691088862123
45	1692967111175	CreateWorkflowHistoryTable1692967111175
46	1693491613982	ExecutionSoftDelete1693491613982
47	1693554410387	DisallowOrphanExecutions1693554410387
48	1694091729095	MigrateToTimestampTz1694091729095
49	1695128658538	AddWorkflowMetadata1695128658538
50	1695829275184	ModifyWorkflowHistoryNodesAndConnections1695829275184
51	1700571993961	AddGlobalAdminRole1700571993961
52	1705429061930	DropRoleMapping1705429061930
53	1711018413374	RemoveFailedExecutionStatus1711018413374
54	1711390882123	MoveSshKeysToDatabase1711390882123
55	1712044305787	RemoveNodesAccess1712044305787
56	1714133768519	CreateProject1714133768519
57	1714133768521	MakeExecutionStatusNonNullable1714133768521
58	1717498465931	AddActivatedAtUserSetting1717498465931
59	1720101653148	AddConstraintToExecutionMetadata1720101653148
60	1721377157740	FixExecutionMetadataSequence1721377157740
61	1723627610222	CreateInvalidAuthTokenTable1723627610222
62	1723796243146	RefactorExecutionIndices1723796243146
63	1724753530828	CreateAnnotationTables1724753530828
64	1724951148974	AddApiKeysTable1724951148974
65	1726606152711	CreateProcessedDataTable1726606152711
66	1727427440136	SeparateExecutionCreationFromStart1727427440136
67	1728659839644	AddMissingPrimaryKeyOnAnnotationTagMapping1728659839644
68	1729607673464	UpdateProcessedDataValueColumnToText1729607673464
69	1729607673469	AddProjectIcons1729607673469
70	1730386903556	CreateTestDefinitionTable1730386903556
71	1731404028106	AddDescriptionToTestDefinition1731404028106
72	1731582748663	MigrateTestDefinitionKeyToString1731582748663
73	1732271325258	CreateTestMetricTable1732271325258
74	1732549866705	CreateTestRun1732549866705
75	1733133775640	AddMockedNodesColumnToTestDefinition1733133775640
76	1734479635324	AddManagedColumnToCredentialsTable1734479635324
77	1736172058779	AddStatsColumnsToTestRun1736172058779
78	1736947513045	CreateTestCaseExecutionTable1736947513045
79	1737715421462	AddErrorColumnsToTestRuns1737715421462
80	1738709609940	CreateFolderTable1738709609940
81	1739549398681	CreateAnalyticsTables1739549398681
82	1740445074052	UpdateParentFolderIdColumn1740445074052
83	1741167584277	RenameAnalyticsToInsights1741167584277
84	1742918400000	AddScopesColumnToApiKeys1742918400000
85	1745322634000	ClearEvaluation1745322634000
86	1745587087521	AddWorkflowStatisticsRootCount1745587087521
87	1745934666076	AddWorkflowArchivedColumn1745934666076
88	1745934666077	DropRoleTable1745934666077
89	1747824239000	AddProjectDescriptionColumn1747824239000
90	1750252139166	AddLastActiveAtColumnToUser1750252139166
91	1750252139166	AddScopeTables1750252139166
92	1750252139167	AddRolesTables1750252139167
93	1750252139168	LinkRoleToUserTable1750252139168
94	1750252139170	RemoveOldRoleColumn1750252139170
95	1752669793000	AddInputsOutputsToTestCaseExecution1752669793000
96	1753953244168	LinkRoleToProjectRelationTable1753953244168
97	1754475614601	CreateDataStoreTables1754475614601
98	1754475614602	ReplaceDataStoreTablesWithDataTables1754475614602
99	1756906557570	AddTimestampsToRoleAndRoleIndexes1756906557570
100	1758731786132	AddAudienceColumnToApiKeys1758731786132
101	1758794506893	AddProjectIdToVariableTable1758794506893
102	1759399811000	ChangeValueTypesForInsights1759399811000
103	1760019379982	CreateChatHubTables1760019379982
104	1760020838000	UniqueRoleNames1760020838000
105	1760314000000	CreateWorkflowDependencyTable1760314000000
106	1760965142113	DropUnusedChatHubColumns1760965142113
107	1761047826451	AddWorkflowVersionColumn1761047826451
\.


--
-- Data for Name: processed_data; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."processed_data" ("workflowId", "context", "createdAt", "updatedAt", "value") FROM stdin;
\.


--
-- Data for Name: project_relation; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."project_relation" ("projectId", "userId", "role", "createdAt", "updatedAt") FROM stdin;
lo5eMUeT6xJE2ZPX	0936ff70-3fd3-4423-863d-b5b2a98d70bf	project:personalOwner	2025-11-11 02:20:36.223+00	2025-11-11 02:20:36.223+00
\.


--
-- Data for Name: scope; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."scope" ("slug", "displayName", "description") FROM stdin;
annotationTag:create	Create Annotation Tag	Allows creating new annotation tags.
annotationTag:read	annotationTag:read	\N
annotationTag:update	annotationTag:update	\N
annotationTag:delete	annotationTag:delete	\N
annotationTag:list	annotationTag:list	\N
annotationTag:*	annotationTag:*	\N
auditLogs:manage	auditLogs:manage	\N
auditLogs:*	auditLogs:*	\N
banner:dismiss	banner:dismiss	\N
banner:*	banner:*	\N
community:register	community:register	\N
community:*	community:*	\N
communityPackage:install	communityPackage:install	\N
communityPackage:uninstall	communityPackage:uninstall	\N
communityPackage:update	communityPackage:update	\N
communityPackage:list	communityPackage:list	\N
communityPackage:manage	communityPackage:manage	\N
communityPackage:*	communityPackage:*	\N
credential:share	credential:share	\N
credential:move	credential:move	\N
credential:create	credential:create	\N
credential:read	credential:read	\N
credential:update	credential:update	\N
credential:delete	credential:delete	\N
credential:list	credential:list	\N
credential:*	credential:*	\N
externalSecretsProvider:sync	externalSecretsProvider:sync	\N
externalSecretsProvider:create	externalSecretsProvider:create	\N
externalSecretsProvider:read	externalSecretsProvider:read	\N
externalSecretsProvider:update	externalSecretsProvider:update	\N
externalSecretsProvider:delete	externalSecretsProvider:delete	\N
externalSecretsProvider:list	externalSecretsProvider:list	\N
externalSecretsProvider:*	externalSecretsProvider:*	\N
externalSecret:list	externalSecret:list	\N
externalSecret:use	externalSecret:use	\N
externalSecret:*	externalSecret:*	\N
eventBusDestination:test	eventBusDestination:test	\N
eventBusDestination:create	eventBusDestination:create	\N
eventBusDestination:read	eventBusDestination:read	\N
eventBusDestination:update	eventBusDestination:update	\N
eventBusDestination:delete	eventBusDestination:delete	\N
eventBusDestination:list	eventBusDestination:list	\N
eventBusDestination:*	eventBusDestination:*	\N
ldap:sync	ldap:sync	\N
ldap:manage	ldap:manage	\N
ldap:*	ldap:*	\N
license:manage	license:manage	\N
license:*	license:*	\N
logStreaming:manage	logStreaming:manage	\N
logStreaming:*	logStreaming:*	\N
orchestration:read	orchestration:read	\N
orchestration:list	orchestration:list	\N
orchestration:*	orchestration:*	\N
project:create	project:create	\N
project:read	project:read	\N
project:update	project:update	\N
project:delete	project:delete	\N
project:list	project:list	\N
project:*	project:*	\N
saml:manage	saml:manage	\N
saml:*	saml:*	\N
securityAudit:generate	securityAudit:generate	\N
securityAudit:*	securityAudit:*	\N
sourceControl:pull	sourceControl:pull	\N
sourceControl:push	sourceControl:push	\N
sourceControl:manage	sourceControl:manage	\N
sourceControl:*	sourceControl:*	\N
tag:create	tag:create	\N
tag:read	tag:read	\N
tag:update	tag:update	\N
tag:delete	tag:delete	\N
tag:list	tag:list	\N
tag:*	tag:*	\N
user:resetPassword	user:resetPassword	\N
user:changeRole	user:changeRole	\N
user:enforceMfa	user:enforceMfa	\N
user:create	user:create	\N
user:read	user:read	\N
user:update	user:update	\N
user:delete	user:delete	\N
user:list	user:list	\N
user:*	user:*	\N
variable:create	variable:create	\N
variable:read	variable:read	\N
variable:update	variable:update	\N
variable:delete	variable:delete	\N
variable:list	variable:list	\N
variable:*	variable:*	\N
projectVariable:create	projectVariable:create	\N
projectVariable:read	projectVariable:read	\N
projectVariable:update	projectVariable:update	\N
projectVariable:delete	projectVariable:delete	\N
projectVariable:list	projectVariable:list	\N
projectVariable:*	projectVariable:*	\N
workersView:manage	workersView:manage	\N
workersView:*	workersView:*	\N
workflow:share	workflow:share	\N
workflow:execute	workflow:execute	\N
workflow:move	workflow:move	\N
workflow:activate	workflow:activate	\N
workflow:deactivate	workflow:deactivate	\N
workflow:create	workflow:create	\N
workflow:read	workflow:read	\N
workflow:update	workflow:update	\N
workflow:delete	workflow:delete	\N
workflow:list	workflow:list	\N
workflow:*	workflow:*	\N
folder:create	folder:create	\N
folder:read	folder:read	\N
folder:update	folder:update	\N
folder:delete	folder:delete	\N
folder:list	folder:list	\N
folder:move	folder:move	\N
folder:*	folder:*	\N
insights:list	insights:list	\N
insights:*	insights:*	\N
oidc:manage	oidc:manage	\N
oidc:*	oidc:*	\N
provisioning:manage	provisioning:manage	\N
provisioning:*	provisioning:*	\N
dataTable:create	dataTable:create	\N
dataTable:read	dataTable:read	\N
dataTable:update	dataTable:update	\N
dataTable:delete	dataTable:delete	\N
dataTable:list	dataTable:list	\N
dataTable:readRow	dataTable:readRow	\N
dataTable:writeRow	dataTable:writeRow	\N
dataTable:listProject	dataTable:listProject	\N
dataTable:*	dataTable:*	\N
execution:delete	execution:delete	\N
execution:read	execution:read	\N
execution:retry	execution:retry	\N
execution:list	execution:list	\N
execution:get	execution:get	\N
execution:*	execution:*	\N
workflowTags:update	workflowTags:update	\N
workflowTags:list	workflowTags:list	\N
workflowTags:*	workflowTags:*	\N
role:manage	role:manage	\N
role:*	role:*	\N
mcp:manage	mcp:manage	\N
mcp:*	mcp:*	\N
mcpApiKey:create	mcpApiKey:create	\N
mcpApiKey:rotate	mcpApiKey:rotate	\N
mcpApiKey:*	mcpApiKey:*	\N
chatHub:manage	chatHub:manage	\N
chatHub:message	chatHub:message	\N
chatHub:*	chatHub:*	\N
*	*	\N
\.


--
-- Data for Name: role_scope; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."role_scope" ("roleSlug", "scopeSlug") FROM stdin;
global:owner	annotationTag:create
global:owner	annotationTag:read
global:owner	annotationTag:update
global:owner	annotationTag:delete
global:owner	annotationTag:list
global:owner	auditLogs:manage
global:owner	banner:dismiss
global:owner	community:register
global:owner	communityPackage:install
global:owner	communityPackage:uninstall
global:owner	communityPackage:update
global:owner	communityPackage:list
global:owner	credential:share
global:owner	credential:move
global:owner	credential:create
global:owner	credential:read
global:owner	credential:update
global:owner	credential:delete
global:owner	credential:list
global:owner	externalSecretsProvider:sync
global:owner	externalSecretsProvider:create
global:owner	externalSecretsProvider:read
global:owner	externalSecretsProvider:update
global:owner	externalSecretsProvider:delete
global:owner	externalSecretsProvider:list
global:owner	externalSecret:list
global:owner	externalSecret:use
global:owner	eventBusDestination:test
global:owner	eventBusDestination:create
global:owner	eventBusDestination:read
global:owner	eventBusDestination:update
global:owner	eventBusDestination:delete
global:owner	eventBusDestination:list
global:owner	ldap:sync
global:owner	ldap:manage
global:owner	license:manage
global:owner	logStreaming:manage
global:owner	orchestration:read
global:owner	project:create
global:owner	project:read
global:owner	project:update
global:owner	project:delete
global:owner	project:list
global:owner	saml:manage
global:owner	securityAudit:generate
global:owner	sourceControl:pull
global:owner	sourceControl:push
global:owner	sourceControl:manage
global:owner	tag:create
global:owner	tag:read
global:owner	tag:update
global:owner	tag:delete
global:owner	tag:list
global:owner	user:resetPassword
global:owner	user:changeRole
global:owner	user:enforceMfa
global:owner	user:create
global:owner	user:read
global:owner	user:update
global:owner	user:delete
global:owner	user:list
global:owner	variable:create
global:owner	variable:read
global:owner	variable:update
global:owner	variable:delete
global:owner	variable:list
global:owner	projectVariable:create
global:owner	projectVariable:read
global:owner	projectVariable:update
global:owner	projectVariable:delete
global:owner	projectVariable:list
global:owner	workersView:manage
global:owner	workflow:share
global:owner	workflow:execute
global:owner	workflow:move
global:owner	workflow:create
global:owner	workflow:read
global:owner	workflow:update
global:owner	workflow:delete
global:owner	workflow:list
global:owner	folder:create
global:owner	folder:read
global:owner	folder:update
global:owner	folder:delete
global:owner	folder:list
global:owner	folder:move
global:owner	insights:list
global:owner	oidc:manage
global:owner	provisioning:manage
global:owner	dataTable:list
global:owner	role:manage
global:owner	mcp:manage
global:owner	mcpApiKey:create
global:owner	mcpApiKey:rotate
global:owner	chatHub:manage
global:owner	chatHub:message
global:admin	annotationTag:create
global:admin	annotationTag:read
global:admin	annotationTag:update
global:admin	annotationTag:delete
global:admin	annotationTag:list
global:admin	auditLogs:manage
global:admin	banner:dismiss
global:admin	community:register
global:admin	communityPackage:install
global:admin	communityPackage:uninstall
global:admin	communityPackage:update
global:admin	communityPackage:list
global:admin	credential:share
global:admin	credential:move
global:admin	credential:create
global:admin	credential:read
global:admin	credential:update
global:admin	credential:delete
global:admin	credential:list
global:admin	externalSecretsProvider:sync
global:admin	externalSecretsProvider:create
global:admin	externalSecretsProvider:read
global:admin	externalSecretsProvider:update
global:admin	externalSecretsProvider:delete
global:admin	externalSecretsProvider:list
global:admin	externalSecret:list
global:admin	externalSecret:use
global:admin	eventBusDestination:test
global:admin	eventBusDestination:create
global:admin	eventBusDestination:read
global:admin	eventBusDestination:update
global:admin	eventBusDestination:delete
global:admin	eventBusDestination:list
global:admin	ldap:sync
global:admin	ldap:manage
global:admin	license:manage
global:admin	logStreaming:manage
global:admin	orchestration:read
global:admin	project:create
global:admin	project:read
global:admin	project:update
global:admin	project:delete
global:admin	project:list
global:admin	saml:manage
global:admin	securityAudit:generate
global:admin	sourceControl:pull
global:admin	sourceControl:push
global:admin	sourceControl:manage
global:admin	tag:create
global:admin	tag:read
global:admin	tag:update
global:admin	tag:delete
global:admin	tag:list
global:admin	user:resetPassword
global:admin	user:changeRole
global:admin	user:enforceMfa
global:admin	user:create
global:admin	user:read
global:admin	user:update
global:admin	user:delete
global:admin	user:list
global:admin	variable:create
global:admin	variable:read
global:admin	variable:update
global:admin	variable:delete
global:admin	variable:list
global:admin	projectVariable:create
global:admin	projectVariable:read
global:admin	projectVariable:update
global:admin	projectVariable:delete
global:admin	projectVariable:list
global:admin	workersView:manage
global:admin	workflow:share
global:admin	workflow:execute
global:admin	workflow:move
global:admin	workflow:create
global:admin	workflow:read
global:admin	workflow:update
global:admin	workflow:delete
global:admin	workflow:list
global:admin	folder:create
global:admin	folder:read
global:admin	folder:update
global:admin	folder:delete
global:admin	folder:list
global:admin	folder:move
global:admin	insights:list
global:admin	oidc:manage
global:admin	provisioning:manage
global:admin	dataTable:list
global:admin	role:manage
global:admin	mcp:manage
global:admin	mcpApiKey:create
global:admin	mcpApiKey:rotate
global:admin	chatHub:manage
global:admin	chatHub:message
global:member	annotationTag:create
global:member	annotationTag:read
global:member	annotationTag:update
global:member	annotationTag:delete
global:member	annotationTag:list
global:member	eventBusDestination:test
global:member	eventBusDestination:list
global:member	tag:create
global:member	tag:read
global:member	tag:update
global:member	tag:list
global:member	user:list
global:member	variable:read
global:member	variable:list
global:member	dataTable:list
global:member	mcpApiKey:create
global:member	mcpApiKey:rotate
global:member	chatHub:message
project:admin	credential:share
project:admin	credential:move
project:admin	credential:create
project:admin	credential:read
project:admin	credential:update
project:admin	credential:delete
project:admin	credential:list
project:admin	project:read
project:admin	project:update
project:admin	project:delete
project:admin	project:list
project:admin	sourceControl:push
project:admin	projectVariable:create
project:admin	projectVariable:read
project:admin	projectVariable:update
project:admin	projectVariable:delete
project:admin	projectVariable:list
project:admin	workflow:execute
project:admin	workflow:move
project:admin	workflow:create
project:admin	workflow:read
project:admin	workflow:update
project:admin	workflow:delete
project:admin	workflow:list
project:admin	folder:create
project:admin	folder:read
project:admin	folder:update
project:admin	folder:delete
project:admin	folder:list
project:admin	folder:move
project:admin	dataTable:create
project:admin	dataTable:read
project:admin	dataTable:update
project:admin	dataTable:delete
project:admin	dataTable:readRow
project:admin	dataTable:writeRow
project:admin	dataTable:listProject
project:personalOwner	credential:share
project:personalOwner	credential:move
project:personalOwner	credential:create
project:personalOwner	credential:read
project:personalOwner	credential:update
project:personalOwner	credential:delete
project:personalOwner	credential:list
project:personalOwner	project:read
project:personalOwner	project:list
project:personalOwner	workflow:share
project:personalOwner	workflow:execute
project:personalOwner	workflow:move
project:personalOwner	workflow:create
project:personalOwner	workflow:read
project:personalOwner	workflow:update
project:personalOwner	workflow:delete
project:personalOwner	workflow:list
project:personalOwner	folder:create
project:personalOwner	folder:read
project:personalOwner	folder:update
project:personalOwner	folder:delete
project:personalOwner	folder:list
project:personalOwner	folder:move
project:personalOwner	dataTable:create
project:personalOwner	dataTable:read
project:personalOwner	dataTable:update
project:personalOwner	dataTable:delete
project:personalOwner	dataTable:readRow
project:personalOwner	dataTable:writeRow
project:personalOwner	dataTable:listProject
project:editor	credential:create
project:editor	credential:read
project:editor	credential:update
project:editor	credential:delete
project:editor	credential:list
project:editor	project:read
project:editor	project:list
project:editor	projectVariable:create
project:editor	projectVariable:read
project:editor	projectVariable:update
project:editor	projectVariable:delete
project:editor	projectVariable:list
project:editor	workflow:execute
project:editor	workflow:create
project:editor	workflow:read
project:editor	workflow:update
project:editor	workflow:delete
project:editor	workflow:list
project:editor	folder:create
project:editor	folder:read
project:editor	folder:update
project:editor	folder:delete
project:editor	folder:list
project:editor	dataTable:create
project:editor	dataTable:read
project:editor	dataTable:update
project:editor	dataTable:delete
project:editor	dataTable:readRow
project:editor	dataTable:writeRow
project:editor	dataTable:listProject
project:viewer	credential:read
project:viewer	credential:list
project:viewer	project:read
project:viewer	project:list
project:viewer	projectVariable:read
project:viewer	projectVariable:list
project:viewer	workflow:read
project:viewer	workflow:list
project:viewer	folder:read
project:viewer	folder:list
project:viewer	dataTable:read
project:viewer	dataTable:readRow
project:viewer	dataTable:listProject
credential:owner	credential:share
credential:owner	credential:move
credential:owner	credential:read
credential:owner	credential:update
credential:owner	credential:delete
credential:user	credential:read
workflow:owner	workflow:share
workflow:owner	workflow:execute
workflow:owner	workflow:move
workflow:owner	workflow:read
workflow:owner	workflow:update
workflow:owner	workflow:delete
workflow:editor	workflow:execute
workflow:editor	workflow:read
workflow:editor	workflow:update
\.


--
-- Data for Name: settings; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."settings" ("key", "value", "loadOnStartup") FROM stdin;
ui.banners.dismissed	["V1"]	t
features.ldap	{"loginEnabled":false,"loginLabel":"","connectionUrl":"","allowUnauthorizedCerts":false,"connectionSecurity":"none","connectionPort":389,"baseDn":"","bindingAdminDn":"","bindingAdminPassword":"","firstNameAttribute":"","lastNameAttribute":"","emailAttribute":"","loginIdAttribute":"","ldapIdAttribute":"","userFilter":"","synchronizationEnabled":false,"synchronizationInterval":60,"searchPageSize":0,"searchTimeout":60}	t
userManagement.authenticationMethod	email	t
features.sourceControl.sshKeys	{"encryptedPrivateKey":"U2FsdGVkX1/FOPWf9n2jt+IA51ynYPMfGwxYZD4s7V3FpOlPbL3ehj/vlTEiGbQApzzC4laVSEcsTYt/2jvlu37lnW72SYLQOb60z2QHcUQLDBCQvCrcfnMBdChoQj40ApLseaoK+dBlcu42jwnTMBrvxKiAupFfyQuUUsyALPSnyvss30GQ+LaVm6gFBvuMXz+dFvjptDgzU1WB+fi0nEz6EAUydCMhkVxN11KJiQMs+SzCJTHbhwTrgKB2O7epZeWydmYShdCJB5k13vX0UkoEan1nW3tFogJulsu5KwxQOiSHhiE1c5Wm+sDyc+D1jMgIWYCXy4j+RJPrpu31OBOV9SKTW2ggskfi3bnDpz096OIZfMWGuqrfwO6xJN+d8AKfDTTc4J0or2Dq2sKgiw9vlmVGMBNh+BDdsk39/VtIfXXjhsmujbefEIbBmUhnt9w7Aw30LdMTucQqsnJLPgd4jRtg+BEWpc0lqoStwo/zqtTp0a65l5dS+sshwZErOobHNg7m3FWAjtGfSXAnFaEshKjJHRbXBnyUGt3DeSYv02lqzOPcJ90jqSxG2NbM","publicKey":"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIDqGPuwhuDiDfKkK/GKkAUUvO0YvtnMpX3+1PemS1Erh n8n deploy key"}	t
features.sourceControl	{"branchName":"main","connectionType":"ssh","keyGeneratorType":"ed25519"}	t
userManagement.isInstanceOwnerSetUp	true	t
license.cert	eyJsaWNlbnNlS2V5IjoiLS0tLS1CRUdJTiBMSUNFTlNFIEtFWS0tLS0tXG5qYWtLaEdjSmRQdnZZYXFFUVZWaWJUeEU5V1hlMWdRQVYzZjRJbzNjVG1sd2k3QVFoTDlJTmdQNmpmeTlQL3dRXG5rT1RsWTZ1ejZuMEU2VkVIRTlHeG53WXBRdVdPMElxTTNZdnducm9ESlcvRU9mLytqcHkvTGhGSDQ1VloyTkdkXG43RndQRGpuSzhjL3lqQUZGMU11R3VVZ0xXZFNCNjU1aDBia2k3dkVjMmdnYVNzaUZxMFBmR2pMU3JSVkpYZktHXG54NmVKTnZPZmM4SUs2cDFCZEZkRWcyT0pYY0p2WTFCOENKanA0QjVLNGtHVEhOZlg3d0lwUkR2NCtvUGRzQTVNXG5sSUZBb1ZuQTU4NFRPcmYwdzVvKzRxa0FLdEQxMmwyRWZsWHZtZ1lwc1BrdXA3V2lieUtvTDEzWUZjQUpVK09BXG5haHdjRVlhOW5qWTIvMWY2d3RRczlnPT18fFUyRnNkR1ZrWDErMzV5TllNTHhYN3FOVG1QWGYrWTA4bHdSVmF1XG41T1dVd3BOVXNzTUYwRVM4dUF3RzRiRnhyWEVXZmlHOHpTRVVnRVh0NU1NK3YyVHkvNHUzVzRTRzdwZit5c0VFXG5qaXZhVUZORWYrZGhpWVJkQXQxMlVmWG1OWjZIaXpidEFRYVRTZEthb05JNXZ6M3dndW9KbXFTTmh1cHNKMEpKXG5NMzFzbWJ3ZWR3TVZiSGVDOXE0Y2pURHZGUlNNREcvZ0IwcUVVTE9BUXF5NVpVVytmM0ZOdVBFUTlDeVlVWFZDXG5tNitEeEU2TnJvNHBDR1ZWcTRnV0p5NDdoR0hsWUtwREc0bmJyREcvcXVvV01ReWtsTnZRTWNZNU10N0E1YldBXG5yajZ1cGZpWkFLaE9uSTBRR0NsUHNTck1OKzdNaElUa2xNTTNKbzVOQUVnSGs4azc1Q0ZoRktpN2tFemt2cTNHXG5rb2liZExvYkJ4Ull6MlVVV09XNEgwSC9uVmdnQ3FoVUgyMis3Ly83RUkzU2IzQ2xSWnVQNnNDK1Fqekk5MmlYXG5JTFd3MW4zbmRMK2lubER4NFU1Ti9hd29nWC94dDZPN3pvU0FnT3RFWmhMTXluclBqdjBadW5VcU9hUHloOFdVXG54OTA2eCtSdXRaTWlRa21SNGZpK2pZVE9Fd2V3MklCaEg0Y1ZkU1IwakR2eC9pV2JvKy9ZVkFoZTVQOE03NkdDXG5XZjlhT2VnNHFtaWdTMVlNS0hXN296ZGxjLzVaeWlPcEcrRG8yVEwvZ0RRU3NHWVRJVlAzVFhCRVpJclE0bWlPXG5vd0N3Z1p4eXhjQnJSZ3oxV25udENnK05Sa05BL0FSOHBpckFHdVhoQ2R6QmZsOUFyVkxFWjI1MWhyTE5YOThYXG55T2RXZ01HbFlJNmlQcVVZV1JzRElBaDZEdWpzRDlSeDJXZXVxRG81QnNLaHZLNEtjOGp1NFlPYWlnN2xRV3BzXG50Z0pNdzVvTFB5T3A3bVN2dGpKVkRpS1ZGWHNDS3lqRkJXR0ZKOFpOV3I1MUkrazlWYXM3cmdLM1UzdDcySDdSXG5WWGFYZ1g3WU4vSVhNR3Y1Y1JhRDFWQ1A3S0lrUC9peGR2L2VubnNoQnlPWC8vZnJ4R1JHbUpVeE9vYVZXVEpiXG5KbFN2VDA1QjZNVmw3Y1BSY05ZLzJydkZmdVdaMGxURjg0TC80SDdkdi9zdWFDMzhtOFBseGNsTlMwelJ3N1ZmXG40RHp3N3F0bnhBSWpLQzN6SkVCZTRtejhsNC9wOVduM1h0dUJnR0tZb1JLV0lrd2JlSnYrZnA4RzRLeElCbzlOXG5ZVXRyTGNmdDNvRldKTEpDRWZpbkt6TnREaHBiOHdvOVBtdEgzQkY1RzVqbW5JME5HNHR2RUcvRHd3Z29JMmdWXG56VUw1eWp6cmxNV1pHVjZkTmdUa1V5aWc3MWxCTjRPWkIzOU5NRkNYYUx3VCtKRTFhbXdnL3IyR2hIYm93Uy9zXG5YemgrbXhTR0tFM0RxM2VtSm1vUVRKRmduSXFTVFZlSkhVRjU4ZDlKUWJhcERhbVJFZnZwK0lCOUFWRi9kUExRXG5SMFk3eGg1UDhIMnQwVCtTYi9ST2JDWFdEWkwydnBrazdmZGs0eWdRL0hTb2JvM2hsQ05iWEl0SjVYeFBpb1BqXG5uQzQwQUk1ZzFxbDZJeHEvQjhhUlZOWHVOZHBzaW9uLytnem9kZ0h3ZmhDc3AxaDBXOHViNzYvZno3Rkc5dmlwXG5jRVBCNW1CMGlpVDdiSjVzbmZVY1BnVk4yMDBLdlZSdDdVbzN0ZFpzQWxQTzRxMXZUeGFUTit6UG1QbFZOWWVsXG5CTy9lNHFYS1Nlam5lcUNtZzZJN3JVc0NSTGdzOHpEZml5aE1NV0RURHZwYWprWUg2blIvUGxhQTdvU010RmRMXG5Edktad3RsWUwwY0NQd3VxOHJLS2JLekdHaHBkKzFOeUdEd2dpWDczOVNhL0ppakVUUlBKdlFJR1FFZm4vdEhGXG5sZk9BWGtrZXpjcXdwQng5b0xuTWoyVWpLZG9FRDJOWjhMbmJ5dXhwbFV1ejQ3NmtqKy9FR1dGcUhlaUtFcVRiXG4xbWJqZWcwOU1zdTUzWmZraHVRMzZPbjZKVmNRejlzY0lSckQ1aU5pcmQ4MkV3TThtOS9wWmIyWEhiNjZFUE5lXG5WUEtLT0pjZE53dnQ5VWNtYUJwbFVQem1mZU9GWDBha3pXMjVkQmZoZTI5QXZST1FsYUN6SzJlM2FDR1FieFVhXG5TY3A2bDQvaVJ0YVFKVjRxTmhIZDJpQ1h0MWZ3Ky9YR041Rm5DUjEwMHE1a3JFeGZKR1lFMnR6UEM1UUFISC94XG5LUUViVmFTQ1Z0OTdSdkp4TWQwOEtIWjVTRU1SaWQ3VldOU3prR2hvMFRnZHVvaHJ6Zm1lVENUdHZYcm9HVGl2XG4xNFRaQmo2OHBFb0wvRGxtNHJtNndOVlZPSkdFdEs5U2QzK3ZaYnd1TURRSnl5ckxqcnRNUjU2S1JBT0hwUXlXXG4rSml1UGt5YnhEbDN6dkVnc2dqUXd3WThtaHAvZElWVWNjRWx5R2wvZEJzL3dhSzZUUWJTMmZsU01hNUJWNmxXXG4wb3NqaGtUZVJxUThLYS9EbzRac3IvNWpJdEVyZXhLQ1VtaVYzQWVqZlJLT1A1QlMzemRTMkFwODYxbC9CdzI5XG41UTZCK0Z0eFV0SUZkYUdKdVhSMWtma3hJRVhDSmk5MFVadEEwVXpCaVdVNDdOSmRxZFFWQWJiOXRPODNKMEpEXG4wTlBNM3FqOU9ncTFmSUptcTh0LzVYQTA0LytaYlZEUGdjakhmTkIzZHdwdlY1RWNmRHV3WFBTcHMwR2I3d1FtXG5nZ0ZNT21Id1hhYjRZR2JBY0EzYm5wOXkvOXJuU2lRWEEwdmpYejl6dE5aZVA1cjErc2NaSXk5OWVCZ2JPYTYyXG5YcmZBdnRxNzlOM2R5QUh1NTQ2TkQ5THNSKzVUQW85R21ETGx3RWFocmxNSXROVjBxR25rdnZPcS9lVms1MWFpXG5rbS9mVGtjWmdXcHRmTDdoZVNhZVhhRnNFTkh0YkRvK3hLcklBNGw3SHlqbkhJUFE9PXx8UXB1Y0FESFFSc0lqXG5GVkZqcmNWOExRaDI4K05yUE1yUFVFeHJ4dmZ5VVRGcjhvY3lCd3ZSOXYyYUJjYTNFNkRmZTFCUDZtb3NTdCt5XG5qNU9yVmZXZUhTd2p3WEJNYUpveVNoM0hNOGppaFovMENqMWd5MGRyOXgwdzN5cTNiQSs1QnI1RmhrbmlMU2RYXG5BZ0FZRFpycnM1Z0hRK3lZK1VsSnZlV1Z0aklxUC9ORU1wTDl6SHFwV3ZwMWVjLzNzbDZMV1E4T3gxeUNOTUlkXG5aS2NpaVFpTkFiakpVcWhNT043R0htSkVia1A3OGd2aG0vT2N0SzB3Y0kvZktqbHBQUHJ2TldhMTBmalpZZmEzXG5aNXE3R3h6NU83TWFCZGJZWVlndXVmZEZwUXdDL0pqTTNBQkk5Y0FmdTNVV0FiYmMxeDVKSUNyemw1U0N0R200XG5UVlNKR3NVbTVnPT1cbi0tLS0tRU5EIExJQ0VOU0UgS0VZLS0tLS0iLCJ4NTA5IjoiLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tXG5NSUlFRERDQ0FmUUNDUUNxZzJvRFQ4MHh3akFOQmdrcWhraUc5dzBCQVFVRkFEQklNUXN3Q1FZRFZRUUdFd0pFXG5SVEVQTUEwR0ExVUVDQXdHUW1WeWJHbHVNUTh3RFFZRFZRUUhEQVpDWlhKc2FXNHhGekFWQmdOVkJBTU1EbXhwXG5ZMlZ1YzJVdWJqaHVMbWx2TUI0WERUSXlNRFl5TkRBME1UQTBNRm9YRFRJek1EWXlOREEwTVRBME1Gb3dTREVMXG5NQWtHQTFVRUJoTUNSRVV4RHpBTkJnTlZCQWdNQmtKbGNteHBiakVQTUEwR0ExVUVCd3dHUW1WeWJHbHVNUmN3XG5GUVlEVlFRRERBNXNhV05sYm5ObExtNDRiaTVwYnpDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDXG5BUW9DZ2dFQkFNQk0wNVhCNDRnNXhmbUNMd2RwVVR3QVQ4K0NCa3lMS0ZzZXprRDVLLzZXaGFYL1hyc2QvUWQwXG4yMEo3d2w1V2RIVTRjVkJtRlJqVndWemtsQ0syeVlKaThtang4c1hzR3E5UTFsYlVlTUtmVjlkc2dmdWhubEFTXG50blFaZ2x1Z09uRjJGZ1JoWGIvakswdHhUb2FvK2JORTZyNGdJRXpwa3RITEJUWXZ2aXVKbXJlZjdXYlBSdDRJXG5uZDlEN2xoeWJlYnloVjdrdXpqUUEvcFBLSFRGczhNVEhaOGhZVXhSeXJwbTMrTVl6UUQrYmpBMlUxRkljdGFVXG53UVhZV2FON3QydVR3Q3Q5ekFLc21ZL1dlT2J2bDNUWk41T05MQXp5V0dDdWxtNWN3S1IzeGJsQlp6WG5CNmdzXG5Pbk4yT0FkU3RjelRWQ3ljbThwY0ZVcnl0S1NLa0dFQ0F3RUFBVEFOQmdrcWhraUc5dzBCQVFVRkFBT0NBZ0VBXG5sSjAxd2NuMXZqWFhDSHVvaTdSMERKMWxseDErZGFmcXlFcVBBMjdKdStMWG1WVkdYUW9yUzFiOHhqVXFVa2NaXG5UQndiV0ZPNXo1ZFptTnZuYnlqYXptKzZvT2cwUE1hWXhoNlRGd3NJMlBPYmM3YkZ2MmVheXdQdC8xQ3BuYzQwXG5xVU1oZnZSeC9HQ1pQQ1d6My8yUlBKV1g5alFEU0hYQ1hxOEJXK0kvM2N1TERaeVkzZkVZQkIwcDNEdlZtYWQ2XG42V0hRYVVyaU4wL0xxeVNPcC9MWmdsbC90MDI5Z1dWdDA1WmliR29LK2NWaFpFY3NMY1VJaHJqMnVGR0ZkM0ltXG5KTGcxSktKN2pLU0JVUU9kSU1EdnNGVUY3WWRNdk11ckNZQTJzT05OOENaK0k1eFFWMUtTOWV2R0hNNWZtd2dTXG5PUEZ2UHp0RENpMC8xdVc5dE9nSHBvcnVvZGFjdCtFWk5rQVRYQ3ZaaXUydy9xdEtSSkY0VTRJVEVtNWFXMGt3XG42enVDOHh5SWt0N3ZoZHM0OFV1UlNHSDlqSnJBZW1sRWl6dEdJTGhHRHF6UUdZYmxoVVFGR01iQmI3amhlTHlDXG5MSjFXT0c2MkYxc3B4Q0tCekVXNXg2cFIxelQxbWhFZ2Q0TWtMYTZ6UFRwYWNyZDk1QWd4YUdLRUxhMVJXU0ZwXG5NdmRoR2s0TnY3aG5iOHIrQnVNUkM2aWVkUE1DelhxL001MGNOOEFnOGJ3K0oxYUZvKzBFSzJoV0phN2tpRStzXG45R3ZGalNkekNGbFVQaEtra1Vaa1NvNWFPdGNRcTdKdTZrV0JoTG9GWUtncHJscDFRVkIwc0daQTZvNkR0cWphXG5HNy9SazZ2YmFZOHdzTllLMnpCWFRUOG5laDVab1JaL1BKTFV0RUV0YzdZPVxuLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLSJ9	f
\.


--
-- Data for Name: shared_credentials; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."shared_credentials" ("credentialsId", "projectId", "role", "createdAt", "updatedAt") FROM stdin;
7x35n8A75QzWftQ2	lo5eMUeT6xJE2ZPX	credential:owner	2025-11-11 02:56:27.455+00	2025-11-11 02:56:27.455+00
bMdngHKZ99tCKomj	lo5eMUeT6xJE2ZPX	credential:owner	2025-11-11 05:57:27.785+00	2025-11-11 05:57:27.785+00
zdDZCTsALNpNUjT8	lo5eMUeT6xJE2ZPX	credential:owner	2025-11-11 07:51:55.398+00	2025-11-11 07:51:55.398+00
p2T40GsW7EeHqQhv	lo5eMUeT6xJE2ZPX	credential:owner	2025-11-11 23:06:43.629+00	2025-11-11 23:06:43.629+00
VxZc1cjaRgBJsWRh	lo5eMUeT6xJE2ZPX	credential:owner	2025-11-11 23:17:42.712+00	2025-11-11 23:17:42.712+00
\.


--
-- Data for Name: shared_workflow; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."shared_workflow" ("workflowId", "projectId", "role", "createdAt", "updatedAt") FROM stdin;
EXVIlWqfZ2MPIEOk	lo5eMUeT6xJE2ZPX	workflow:owner	2025-11-11 02:59:22.229+00	2025-11-11 02:59:22.229+00
mBZxoj5g1bytRJeO	lo5eMUeT6xJE2ZPX	workflow:owner	2025-11-11 12:46:53.528+00	2025-11-11 12:46:53.528+00
\.


--
-- Data for Name: test_run; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."test_run" ("id", "workflowId", "status", "errorCode", "errorDetails", "runAt", "completedAt", "metrics", "createdAt", "updatedAt") FROM stdin;
\.


--
-- Data for Name: test_case_execution; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."test_case_execution" ("id", "testRunId", "executionId", "status", "runAt", "completedAt", "errorCode", "errorDetails", "metrics", "createdAt", "updatedAt", "inputs", "outputs") FROM stdin;
\.


--
-- Data for Name: user_api_keys; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."user_api_keys" ("id", "userId", "label", "apiKey", "createdAt", "updatedAt", "scopes", "audience") FROM stdin;
\.


--
-- Data for Name: variables; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."variables" ("key", "type", "value", "id", "projectId") FROM stdin;
\.


--
-- Data for Name: webhook_entity; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."webhook_entity" ("webhookPath", "method", "node", "webhookId", "pathLength", "workflowId") FROM stdin;
\.


--
-- Data for Name: workflow_dependency; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."workflow_dependency" ("id", "workflowId", "workflowVersionId", "dependencyType", "dependencyKey", "dependencyInfo", "indexVersionId", "createdAt") FROM stdin;
\.


--
-- Data for Name: workflow_history; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."workflow_history" ("versionId", "workflowId", "authors", "createdAt", "updatedAt", "nodes", "connections") FROM stdin;
1c3ebaf8-59e2-4ab4-b200-14479d929af1	EXVIlWqfZ2MPIEOk	Francis James Lagang	2025-11-11 02:59:23.772+00	2025-11-11 02:59:23.772+00	[{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}]	{}
46316e34-1b3f-4520-9b40-43dfed26804c	EXVIlWqfZ2MPIEOk	Francis James Lagang	2025-11-11 11:06:05.12+00	2025-11-11 11:06:05.12+00	[{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send a text message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}]	{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}}
cd7444cc-aede-460d-a8d4-dc2cfe51818d	EXVIlWqfZ2MPIEOk	Francis James Lagang	2025-11-11 12:01:26.126+00	2025-11-11 12:01:26.126+00	[{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send a text message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["callback_query"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Telegram Trigger1","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"If"},{"parameters":{"chatId":"=","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"1de0d934-a7e3-48dc-97f1-0669babc5720","name":"Send a text message1","webhookId":"308e6fb3-3f64-4d67-aec8-90637a50a5c7","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}]	{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Telegram Trigger1":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[{"node":"Send a text message1","type":"main","index":0}]]}}
edd9eae4-8dec-4c1a-8586-cd9554b2e6ae	EXVIlWqfZ2MPIEOk	Francis James Lagang	2025-11-11 12:03:49.389+00	2025-11-11 12:03:49.389+00	[{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Telegram Trigger","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send a text message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["callback_query"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Telegram Trigger1","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"If"},{"parameters":{"chatId":"=","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"1de0d934-a7e3-48dc-97f1-0669babc5720","name":"Send a text message1","webhookId":"308e6fb3-3f64-4d67-aec8-90637a50a5c7","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}]	{"Telegram Trigger":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Telegram Trigger1":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[{"node":"Send a text message1","type":"main","index":0}]]}}
3bdaa928-39d5-4d15-bf99-8651ca99c8b1	EXVIlWqfZ2MPIEOk	Francis James Lagang	2025-11-11 12:05:17.545+00	2025-11-11 12:05:17.545+00	[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"If"},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["callback_query"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"chatId":"=","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"1de0d934-a7e3-48dc-97f1-0669babc5720","name":"Ask User's Name","webhookId":"308e6fb3-3f64-4d67-aec8-90637a50a5c7","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}]	{"If":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]}}
ffb1756b-3b65-47d0-938c-4dcbdcc9aee9	EXVIlWqfZ2MPIEOk	Francis James Lagang	2025-11-11 12:21:22.998+00	2025-11-11 12:21:22.998+00	[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"If"},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["callback_query"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Send a text message","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}]	{"If":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Send a text message":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]}}
0863ab13-f7e6-43e9-9621-ace444e94e15	EXVIlWqfZ2MPIEOk	Francis James Lagang	2025-11-11 12:35:41.164+00	2025-11-11 12:35:41.164+00	[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"If"},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["callback_query"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Telegram Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If1"},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Telegram Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}]	{"If":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Telegram Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"Find User":{"main":[[{"node":"If1","type":"main","index":0}]]},"If1":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]}}
49f5faca-d8a7-4f88-a12e-2d3fb9a0c95c	mBZxoj5g1bytRJeO	Francis James Lagang	2025-11-11 12:46:54.973+00	2025-11-11 12:46:54.973+00	[{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"If"},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["callback_query"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Telegram Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If1"},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Telegram Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Telegram Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}]	{"If":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"If","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Telegram Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"Find User":{"main":[[{"node":"If1","type":"main","index":0}]]},"If1":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]}}
7633f1fc-4482-4fa6-b988-af070644ffa4	EXVIlWqfZ2MPIEOk	Francis James Lagang	2025-11-11 13:06:20.728+00	2025-11-11 13:06:20.728+00	[{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["callback_query"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-192],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2288,-192],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2704,-192],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}]	{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[]]}}
655e8c9c-340a-49af-b3a5-4e7148b76db5	EXVIlWqfZ2MPIEOk	Francis James Lagang	2025-11-11 13:21:32.879+00	2025-11-11 13:21:32.879+00	[{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["callback_query"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-192],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2288,-192],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2704,-192],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2912,-192],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}]	{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}}
538196d4-17aa-48dd-bf7a-fded16007f90	EXVIlWqfZ2MPIEOk	Francis James Lagang	2025-11-11 13:32:06.315+00	2025-11-11 13:32:06.315+00	[{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["callback_query"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-192],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2288,-192],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2704,-192],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2912,-192],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[3120,-192],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}}]	{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]}}
63c3a336-0702-4f59-8d22-e6d3ef3eb09d	EXVIlWqfZ2MPIEOk	Francis James Lagang	2025-11-11 13:45:53.508+00	2025-11-11 13:45:53.508+00	[{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["callback_query"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-192],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2288,-192],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2704,-192],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2912,-192],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[3120,-192],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-192],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"current_step":"end_of_form","row_number":"={{ $json.row_number }}","media":"={{ $('Description and Media Trigger').item.json.message.photo \\n    ? $('Description and Media Trigger').item.json.message.photo[$('Description and Media Trigger').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}\\n","description":"={{ $('Description and Media Trigger').item.json.message.caption || $('Description and Media Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3536,-192],"id":"ed64d4df-b84d-4265-b123-ba6a51997cc6","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}]	{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]},"Find User - Desc & Media":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]}}
318324e5-ee70-403c-ad90-07c19909e061	EXVIlWqfZ2MPIEOk	Francis James Lagang	2025-11-11 14:22:47.493+00	2025-11-11 14:22:47.493+00	[{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["callback_query"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-192],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2288,-192],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2704,-192],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2912,-192],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[3120,-192],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-192],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"current_step":"end_of_form","row_number":"={{ $json.row_number }}","media":"={{ $('Description and Media Trigger').item.json.message.photo \\n    ? $('Description and Media Trigger').item.json.message.photo[$('Description and Media Trigger').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}\\n","description":"={{ $('Description and Media Trigger').item.json.message.caption || $('Description and Media Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3536,-192],"id":"ed64d4df-b84d-4265-b123-ba6a51997cc6","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}]	{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]},"Find User - Desc & Media":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]}}
73e65a33-2dd6-49d3-9b2e-3d5bdbb21cc7	EXVIlWqfZ2MPIEOk	Francis James Lagang	2025-11-11 22:53:30.546+00	2025-11-11 22:53:30.546+00	[{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,480],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[224,480],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["callback_query"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,704],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,704],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[448,704],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,256],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,256],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[896,256],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[224,704],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,256],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[448,256],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,-192],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-192],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,-192],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[672,-192],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,32],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,32],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"current_step":"end_of_form","row_number":"={{ $json.row_number }}","media":"={{ $('Description and Media Trigger').item.json.message.photo \\n    ? $('Description and Media Trigger').item.json.message.photo[$('Description and Media Trigger').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}\\n","description":"={{ $('Description and Media Trigger').item.json.message.caption || $('Description and Media Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,32],"id":"ed64d4df-b84d-4265-b123-ba6a51997cc6","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}]	{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]},"Find User - Desc & Media":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]}}
5da6ed48-d7c6-4e6f-862a-75d56b885cf3	EXVIlWqfZ2MPIEOk	Francis James Lagang	2025-11-11 22:54:16.996+00	2025-11-11 22:54:16.996+00	[{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,0],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["callback_query"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[416,0],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1040,-96],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[832,-96],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1456,-96],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[1872,-192],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2080,-192],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,0],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[1248,-96],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1664,-96],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2496,-192],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[2288,-192],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2704,-192],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2912,-192],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[3120,-192],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3328,-192],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"current_step":"end_of_form","row_number":"={{ $json.row_number }}","media":"={{ $('Description and Media Trigger').item.json.message.photo \\n    ? $('Description and Media Trigger').item.json.message.photo[$('Description and Media Trigger').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}\\n","description":"={{ $('Description and Media Trigger').item.json.message.caption || $('Description and Media Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[3536,-192],"id":"ed64d4df-b84d-4265-b123-ba6a51997cc6","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}]	{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]},"Find User - Desc & Media":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]}}
0f3e70cb-7e6b-4f2c-aaa8-b19e97c71c3e	EXVIlWqfZ2MPIEOk	Francis James Lagang	2025-11-11 23:01:46.468+00	2025-11-11 23:01:46.468+00	[{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-400],"id":"5acd9b0f-8134-443e-8f53-f5696eb93a37","name":"Start","webhookId":"27ff5a29-a9a3-46c6-aa30-22cb58926fbe","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"chatId":"={{ $json.message.chat.id }}","text":"Welcome to CrisisMapper! ðŸš¨ I'm here to help during emergencies and disasters. Tap Get Started below to begin registering your request. Your information is private and will help responders assist you better.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Get Started","additionalFields":{"callback_data":"get_started"}}]}}]},"additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[224,-400],"id":"822ebb67-dba8-4034-9db9-9bd276638d09","name":"Send Welcome Message","webhookId":"bb2adf6e-ece5-48ca-8e0a-3cb40709fe0a","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["callback_query"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-224],"id":"ab846c1d-44b2-450c-9a11-aa042f989682","name":"Get Started Trigger","webhookId":"634af622-09b9-489a-bc49-53873dce15ce","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"user_id":"={{ $json.result.chat.id }}","current_step":"waiting_for_name","timestamp":"={{ $now.toISO() }}"},"matchingColumns":[],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-224],"id":"265ed1a2-30a4-4795-8b55-d7c15ceac366","name":"Append row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $json.callback_query.message.chat.id }}","text":"Great! What's your full name?","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[448,-224],"id":"a95d433c-be83-400a-b572-e22262195379","name":"Ask User's Name","webhookId":"76d7f736-77cd-4efb-8bac-505d9c9c4d00","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_name"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,-48],"id":"0520bcb7-e14e-4507-8842-cd4c3dad7a6a","name":"Find User","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_location","name":"={{ $('Name Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[672,-48],"id":"3eebae69-1278-45d8-97ec-e5240573eda4","name":"Record Name","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Name Trigger').item.json.message.chat.id }}","text":"=Thank you, {{ $json.name }}! Please tap the attachment menu (ðŸ“Ž), select Location, and share your current location to continue. This will help us locate you better.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[896,-48],"id":"1bd70bdc-1b11-4af0-893b-69c91b8bf970","name":"Ask User Location","webhookId":"c4ee6c4b-d8e6-41f0-97be-584b317d5cbf","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"16008af8-fa08-49bd-b802-af4716daccc5","leftValue":"={{ $json.callback_query.data }}","rightValue":"get_started","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[224,-224],"id":"962b0df7-def1-47c2-bbcb-e76f3da1779d","name":"Check if Callback is Get Started"},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,-48],"id":"8676ef02-36fc-4fa9-9b9a-c5f4c2f78f9e","name":"Name Trigger","webhookId":"b5179cc0-80c6-4f36-a535-006005da5273","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"393510d8-748c-4db3-9071-0632d5424c7e","leftValue":"={{ $json.current_step }}","rightValue":"waiting_for_name","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[448,-48],"id":"41f97389-cd06-47d9-8526-fcce5394e2e6","name":"If Callback Received Name"},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"=waiting_for_location"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,144],"id":"4b435cc2-aefc-46fa-8ce6-e7c021a9b41d","name":"Find User - Location","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,144],"id":"b73d2061-ca68-4b84-a4d8-1639e2490464","name":"Receive Coordinates","webhookId":"e57dd133-3e03-4a31-8275-f304128e677d","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $json.row_number }}","current_step":"waiting_for_description","latitude":"={{ $('Receive Coordinates').item.json.message.location.latitude }}","longitude":"={{ $('Receive Coordinates').item.json.message.location.longitude }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,144],"id":"36837a3b-3359-40ec-bf1c-db4d740dacc0","name":"Record User Coordinates","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $('Receive Coordinates').item.json.message.chat.id }}","text":"Please describe your situation in detail and, if possible, attach only one photo/video by tapping the ðŸ“Ž or camera button. IMPORTANT NOTE: If you have an attachment, send both your description and photos together in one message.","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[672,144],"id":"2a13ed0b-07fa-4fbd-ac7a-cc8d83e2ed07","name":"Send a text message","webhookId":"ab8e9fd8-eee9-4936-b2aa-218e6c56914f","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,368],"id":"d2eed437-4500-4a17-8a41-3cf245a8c2b8","name":"Description and Media Trigger","webhookId":"30f623da-7d8b-4ebe-a6d7-617487934479","credentials":{"telegramApi":{"id":"7x35n8A75QzWftQ2","name":"Telegram account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"user_id","lookupValue":"={{ $json.message.chat.id }}"},{"lookupColumn":"current_step","lookupValue":"waiting_for_description"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[224,368],"id":"9d5bce11-6c2c-49da-acf7-6c4f88032ce3","name":"Find User - Desc & Media","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc","mode":"list","cachedResultName":"CrisisMapper - Responses","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1gE1Y6POmrCWDSs40DSCpkilxaw1Iye8pbI8L1tAyGLc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"current_step":"end_of_form","row_number":"={{ $json.row_number }}","media":"={{ $('Description and Media Trigger').item.json.message.photo \\n    ? $('Description and Media Trigger').item.json.message.photo[$('Description and Media Trigger').item.json.message.photo.length - 1].file_id \\n    : ($('Record description and attachments').item.json.message.video \\n        ? $('Record description and attachments').item.json.message.video.file_id \\n        : '') \\n}}\\n","description":"={{ $('Description and Media Trigger').item.json.message.caption || $('Description and Media Trigger').item.json.message.text }}"},"matchingColumns":["row_number"],"schema":[{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"current_step","displayName":"current_step","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"latitude","displayName":"latitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"longitude","displayName":"longitude","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"description","displayName":"description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"media","displayName":"media","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"timestamp","displayName":"timestamp","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[448,368],"id":"ed64d4df-b84d-4265-b123-ba6a51997cc6","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"bMdngHKZ99tCKomj","name":"Google Sheets account"}}}]	{"Start":{"main":[[{"node":"Send Welcome Message","type":"main","index":0}]]},"Get Started Trigger":{"main":[[{"node":"Check if Callback is Get Started","type":"main","index":0}]]},"Ask User's Name":{"main":[[{"node":"Append row in sheet","type":"main","index":0}]]},"Append row in sheet":{"main":[[]]},"Find User":{"main":[[{"node":"If Callback Received Name","type":"main","index":0}]]},"Record Name":{"main":[[{"node":"Ask User Location","type":"main","index":0}]]},"Check if Callback is Get Started":{"main":[[{"node":"Ask User's Name","type":"main","index":0}]]},"Name Trigger":{"main":[[{"node":"Find User","type":"main","index":0}]]},"If Callback Received Name":{"main":[[{"node":"Record Name","type":"main","index":0}]]},"Ask User Location":{"main":[[]]},"Find User - Location":{"main":[[{"node":"Record User Coordinates","type":"main","index":0}]]},"Receive Coordinates":{"main":[[{"node":"Find User - Location","type":"main","index":0}]]},"Record User Coordinates":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"Description and Media Trigger":{"main":[[{"node":"Find User - Desc & Media","type":"main","index":0}]]},"Find User - Desc & Media":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]}}
\.


--
-- Data for Name: workflow_statistics; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."workflow_statistics" ("count", "latestEvent", "name", "workflowId", "rootCount") FROM stdin;
1	2025-11-11 02:59:39.526+00	data_loaded	EXVIlWqfZ2MPIEOk	1
18	2025-11-11 23:25:54.75+00	manual_error	EXVIlWqfZ2MPIEOk	0
80	2025-11-11 23:27:39.798+00	manual_success	EXVIlWqfZ2MPIEOk	0
\.


--
-- Data for Name: workflows_tags; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY "public"."workflows_tags" ("workflowId", "tagId") FROM stdin;
\.


--
-- Data for Name: buckets; Type: TABLE DATA; Schema: storage; Owner: supabase_storage_admin
--

COPY "storage"."buckets" ("id", "name", "owner", "created_at", "updated_at", "public", "avif_autodetection", "file_size_limit", "allowed_mime_types", "owner_id", "type") FROM stdin;
\.


--
-- Data for Name: buckets_analytics; Type: TABLE DATA; Schema: storage; Owner: supabase_storage_admin
--

COPY "storage"."buckets_analytics" ("id", "type", "format", "created_at", "updated_at") FROM stdin;
\.


--
-- Data for Name: objects; Type: TABLE DATA; Schema: storage; Owner: supabase_storage_admin
--

COPY "storage"."objects" ("id", "bucket_id", "name", "owner", "created_at", "updated_at", "last_accessed_at", "metadata", "version", "owner_id", "user_metadata", "level") FROM stdin;
\.


--
-- Data for Name: prefixes; Type: TABLE DATA; Schema: storage; Owner: supabase_storage_admin
--

COPY "storage"."prefixes" ("bucket_id", "name", "created_at", "updated_at") FROM stdin;
\.


--
-- Data for Name: s3_multipart_uploads; Type: TABLE DATA; Schema: storage; Owner: supabase_storage_admin
--

COPY "storage"."s3_multipart_uploads" ("id", "in_progress_size", "upload_signature", "bucket_id", "key", "version", "owner_id", "created_at", "user_metadata") FROM stdin;
\.


--
-- Data for Name: s3_multipart_uploads_parts; Type: TABLE DATA; Schema: storage; Owner: supabase_storage_admin
--

COPY "storage"."s3_multipart_uploads_parts" ("id", "upload_id", "size", "part_number", "bucket_id", "key", "etag", "owner_id", "version", "created_at") FROM stdin;
\.


--
-- Name: refresh_tokens_id_seq; Type: SEQUENCE SET; Schema: auth; Owner: supabase_auth_admin
--

SELECT pg_catalog.setval('"auth"."refresh_tokens_id_seq"', 1, false);


--
-- Name: auth_provider_sync_history_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"public"."auth_provider_sync_history_id_seq"', 1, false);


--
-- Name: execution_annotations_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"public"."execution_annotations_id_seq"', 1, false);


--
-- Name: execution_entity_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"public"."execution_entity_id_seq"', 98, true);


--
-- Name: execution_metadata_temp_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"public"."execution_metadata_temp_id_seq"', 1, false);


--
-- Name: insights_by_period_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"public"."insights_by_period_id_seq"', 1, false);


--
-- Name: insights_metadata_metaId_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"public"."insights_metadata_metaId_seq"', 1, false);


--
-- Name: insights_raw_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"public"."insights_raw_id_seq"', 1, false);


--
-- Name: migrations_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"public"."migrations_id_seq"', 107, true);


--
-- Name: workflow_dependency_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('"public"."workflow_dependency_id_seq"', 1, false);


--
-- PostgreSQL database dump complete
--

-- \unrestrict qMHZrBhY2v9N53J2tJTekuuSlHw8qoWfUh7z2Ggi6QEteFLrUvsFhCXsIZtLq4S

RESET ALL;
